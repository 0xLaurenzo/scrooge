const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ccSB1loE.js","./DP0efHZ0.js","./CeVBPrFO.js","./CT0gzPnX.js","./DZoNvPrZ.js","./Dp1pzeXC.js","./BtE3a2Ng.js","./mrxuGU4B.js","./3g_5aFX4.js","./CFljRYqt.js","./CdrdKq2l.js","./C7SqeoV7.js","./By6lBcqx.js","./BZybav6A.js","./BowwM8Xu.js","./CQuLVgNe.js","./DWrVWhaS.js","./BXfHNWSe.js","./DZbxmvnF.js","./DC6DblS2.js","./Dmg8YACJ.js","./Bx_La0gs.js","./BSvI1CRX.js","./CpyJZi8s.js","./Drlge1ho.js","./C5o8buha.js","./C2TGDEd8.js","./CnhAF0Vn.js","./Dr5mt_yB.js","./Ds16yR4G.js","./73M9s1lq.js","./DyfQKuZl.js","./BR_gbFP7.js","./lyi5dSIG.js","./DTLUvoe_.js","./I8ryY87Q.js","./BJ706Cpd.js","./CPxVPybI.js","./NmkuyrqU.js","./Beg3BuFC.js","./H5LtYLrv.js","./Cr9SZni8.js","./1G0r1HB8.js","./C4SDetXb.js","./BH_mKRvT.js","./D2S8kQ25.js"])))=>i.map(i=>d[i]);
import{f as Xf,a as Qf}from"./BTtfwK2B.js";import{U as IC,V as SC,P as xC,am as NC,an as TC,Q as PC,G as OC,p as RC,j as DC,s as _0,k as Sh,m as xh,i as $C}from"./B_qOtKNu.js";import"./Cp8kOm10.js";import{o as kC}from"./Bb8jmPeH.js";import{i as UC}from"./D_P4wuAK.js";import{_ as Lt}from"./Dp1pzeXC.js";function BC(t,e,...n){var r=t,s=NC,i;IC(()=>{s!==(s=e())&&(i&&(TC(i),i=null),i=xC(()=>s(r,...n)))},SC),PC&&(r=OC)}const LC=Symbol(),yg=Object.getPrototypeOf,Nh=new WeakMap,MC=t=>t&&(Nh.has(t)?Nh.get(t):yg(t)===Object.prototype||yg(t)===Array.prototype),FC=t=>MC(t)&&t[LC]||null,wg=(t,e=!0)=>{Nh.set(t,e)},Bl={},nd=t=>typeof t=="object"&&t!==null,gs=new WeakMap,oa=new WeakSet,jC=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>nd(l)&&!oa.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const g=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return wg(g,!0),s.set(l,[u,g]),Reflect.ownKeys(l).forEach(f=>{if(Object.getOwnPropertyDescriptor(g,f))return;const p=Reflect.get(l,f),{enumerable:m}=Reflect.getOwnPropertyDescriptor(l,f),b={value:p,enumerable:m,configurable:!0};if(oa.has(p))wg(p,!1);else if(p instanceof Promise)delete b.value,b.get=()=>d(p);else if(gs.has(p)){const[C,y]=gs.get(p);b.value=i(C,y(),d)}Object.defineProperty(g,f,b)}),Object.preventExtensions(g)},o=new WeakMap,a=[1,1],c=l=>{if(!nd(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,g=(x,O=++a[0])=>{d!==O&&(d=O,h.forEach(P=>P(x,O)))};let f=a[1];const p=(x=++a[1])=>(f!==x&&!h.size&&(f=x,b.forEach(([O])=>{const P=O[1](x);P>d&&(d=P)})),d),m=x=>(O,P)=>{const k=[...O];k[1]=[x,...k[1]],g(k,P)},b=new Map,C=(x,O)=>{if((Bl?"production":void 0)!=="production"&&b.has(x))throw new Error("prop listener already exists");if(h.size){const P=O[3](m(x));b.set(x,[O,P])}else b.set(x,[O])},y=x=>{var O;const P=b.get(x);P&&(b.delete(x),(O=P[1])==null||O.call(P))},E=x=>(h.add(x),h.size===1&&b.forEach(([P,k],B)=>{if((Bl?"production":void 0)!=="production"&&k)throw new Error("remove already exists");const L=P[3](m(B));b.set(B,[P,L])}),()=>{h.delete(x),h.size===0&&b.forEach(([P,k],B)=>{k&&(k(),b.set(B,[P]))})}),w=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),_=e(w,{deleteProperty(x,O){const P=Reflect.get(x,O);y(O);const k=Reflect.deleteProperty(x,O);return k&&g(["delete",[O],P]),k},set(x,O,P,k){const B=Reflect.has(x,O),L=Reflect.get(x,O,k);if(B&&(t(L,P)||o.has(P)&&t(L,o.get(P))))return!0;y(O),nd(P)&&(P=FC(P)||P);let I=P;if(P instanceof Promise)P.then(S=>{P.status="fulfilled",P.value=S,g(["resolve",[O],S])}).catch(S=>{P.status="rejected",P.reason=S,g(["reject",[O],S])});else{!gs.has(P)&&n(P)&&(I=c(P));const S=!oa.has(I)&&gs.get(I);S&&C(O,S)}return Reflect.set(x,O,I,k),g(["set",[O],P,L]),!0}});o.set(l,_);const N=[w,p,i,E];return gs.set(_,N),Reflect.ownKeys(l).forEach(x=>{const O=Object.getOwnPropertyDescriptor(l,x);"value"in O&&(_[x]=l[x],delete O.value,delete O.writable),Object.defineProperty(w,x,O)}),_})=>[c,gs,oa,t,e,n,r,s,i,o,a],[zC]=jC();function Ze(t={}){return zC(t)}function Nt(t,e,n){const r=gs.get(t);(Bl?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Ta(t,e){const n=gs.get(t);(Bl?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function gi(t){return oa.add(t),t}function Pt(t,e,n,r){let s=t[e];return Nt(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function qC(t){const e=Ze({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function HC(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var bg={};const M={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof bg<"u"?bg.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},Pa={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=M.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var WC=20,VC=1,mi=1e6,vg=1e6,GC=-7,KC=21,YC=!1,Ic="[big.js] ",Ni=Ic+"Invalid ",vu=Ni+"decimal places",ZC=Ni+"rounding mode",A0=Ic+"Division by zero",je={},br=void 0,JC=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function I0(){function t(e){var n=this;if(!(n instanceof t))return e===br?I0():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Ni+"value");e=e===0&&1/e<0?"-0":String(e)}XC(n,e)}n.constructor=t}return t.prototype=je,t.DP=WC,t.RM=VC,t.NE=GC,t.PE=KC,t.strict=YC,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function XC(t,e){var n,r,s;if(!JC.test(e))throw Error(Ni+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Ti(t,e,n,r){var s=t.c;if(n===br&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(ZC);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==br))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==br||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Pi(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}je.abs=function(){var t=new this.constructor(this);return t.s=1,t};je.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};je.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>mi)throw Error(vu);if(!s[0])throw Error(A0);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),g=a=s.length,f=r.length,p=r.slice(0,a),m=p.length,b=t,C=b.c=[],y=0,E=o+(b.e=e.e-t.e)+1;for(b.s=i,i=E<0?0:E,h.unshift(0);m++<a;)p.push(0);do{for(l=0;l<10;l++){if(a!=(m=p.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=p[d]){u=s[d]>p[d]?1:-1;break}if(u<0){for(c=m==a?s:h;m;){if(p[--m]<c[m]){for(d=m;d&&!p[--d];)p[d]=9;--p[d],p[m]+=10}p[m]-=c[m]}for(;!p[0];)p.shift()}else break}C[y++]=u?l:++l,p[0]&&u?p[m]=r[g]||0:p=[r[g]]}while((g++<f||p[0]!==br)&&i--);return!C[0]&&y!=1&&(C.shift(),b.e--,E--),y>E&&Ti(b,E,n.RM,p[0]!==br),b};je.eq=function(t){return this.cmp(t)===0};je.gt=function(t){return this.cmp(t)>0};je.gte=function(t){return this.cmp(t)>-1};je.lt=function(t){return this.cmp(t)<0};je.lte=function(t){return this.cmp(t)<1};je.minus=je.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};je.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(A0);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};je.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};je.plus=je.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};je.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-vg||t>vg)throw Error(Ni+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};je.prec=function(t,e){if(t!==~~t||t<1||t>mi)throw Error(Ni+"precision");return Ti(new this.constructor(this),t,e)};je.round=function(t,e){if(t===br)t=0;else if(t!==~~t||t<-mi||t>mi)throw Error(vu);return Ti(new this.constructor(this),t+this.e+1,e)};je.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Ic+"No square root");i=Math.sqrt(+Pi(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Ti(t,(s.DP-=4)+t.e+1,s.RM)};je.times=je.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};je.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==br){if(t!==~~t||t<0||t>mi)throw Error(vu);for(n=Ti(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Pi(n,!0,!!r)};je.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==br){if(t!==~~t||t<0||t>mi)throw Error(vu);for(n=Ti(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Pi(n,!1,!!r)};je[Symbol.for("nodejs.util.inspect.custom")]=je.toJSON=je.toString=function(){var t=this,e=t.constructor;return Pi(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};je.toNumber=function(){var t=+Pi(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Ic+"Imprecise conversion");return t};je.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==br){if(t!==~~t||t<1||t>mi)throw Error(Ni+"precision");for(n=Ti(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Pi(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};je.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Ic+"valueOf disallowed");return Pi(t,t.e<=e.NE||t.e>=e.PE,!0)};var $o=I0();const QC={bigNumber(t){return t?new $o(t):new $o(0)},multiply(t,e){if(t===void 0||e===void 0)return new $o(0);const n=new $o(t),r=new $o(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},e_=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],t_=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],n_=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],r_={getERC20Abi:t=>M.USDT_CONTRACT_ADDRESSES.includes(t)?n_:e_,getSwapAbi:()=>t_},yn={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},we={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function rd(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const me={setItem(t,e){aa()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(aa())return localStorage.getItem(t)||void 0},removeItem(t){aa()&&localStorage.removeItem(t)},clear(){aa()&&localStorage.clear()}};function aa(){return typeof window<"u"&&typeof localStorage<"u"}function Wr(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var Eg={};const sd=(typeof process<"u"&&typeof Eg<"u"?Eg.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",S0=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],s_="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Me={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:sd,SECURE_SITE_DASHBOARD:`${sd}/dashboard`,SECURE_SITE_FAVICON:`${sd}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},G={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=G.getActiveNamespace(),e=G.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{me.setItem(we.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=me.getItem(we.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{me.removeItem(we.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{me.setItem(we.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{me.setItem(we.ACTIVE_CAIP_NETWORK_ID,t),G.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return me.getItem(we.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{me.removeItem(we.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=rd(t);me.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=G.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),me.setItem(we.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=me.getItem(we.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=rd(t);me.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return me.getItem(we.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=rd(t);return me.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{me.setItem(we.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return me.getItem(we.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{me.removeItem(we.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return me.getItem(we.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=me.getItem(we.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{me.setItem(we.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return me.getItem(we.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=me.getItem(we.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));me.setItem(we.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=G.getConnectedNamespaces();e.includes(t)||(e.push(t),G.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=G.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),G.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return me.getItem(we.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{me.setItem(we.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{me.removeItem(we.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=me.getItem(we.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=G.getBalanceCache();me.setItem(we.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=G.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;G.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=G.getBalanceCache();e[t.caipAddress]=t,me.setItem(we.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=me.getItem(we.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=G.getBalanceCache();me.setItem(we.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=G.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),G.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=G.getNativeBalanceCache();e[t.caipAddress]=t,me.setItem(we.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=me.getItem(we.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=G.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;G.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=G.getEnsCache();e[t.address]=t,me.setItem(we.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=G.getEnsCache();me.setItem(we.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=me.getItem(we.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=G.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;G.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=G.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},me.setItem(we.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=G.getIdentityCache();me.setItem(we.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{me.removeItem(we.PORTFOLIO_CACHE),me.removeItem(we.NATIVE_BALANCE_CACHE),me.removeItem(we.ENS_CACHE),me.removeItem(we.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{me.setItem(we.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=me.getItem(we.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=G.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===M.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};me.setItem(we.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=me.getItem(we.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=G.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),me.setItem(we.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=me.getItem(we.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=G.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),me.setItem(we.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=G.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),me.setItem(we.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(G.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ce={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ce.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Me.TEN_SEC_MS:!0},isAllowedRetry(t,e=Me.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ce.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Me.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ce.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ce.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?G.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ce.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return M.W3M_API_URL},getBlockchainApiUrl(){return M.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return M.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Me.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in M.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function ko(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Sc{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await ko(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await ko(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ko(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ko(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ko(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const i_={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Me.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ce.isTelegram()){if(ce.isIos())return t.filter(e=>e!=="google");if(ce.isMac())return t.filter(e=>e!=="x");if(ce.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},fe=Ze({features:Me.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Me.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),z={state:fe,subscribeKey(t,e){return Pt(fe,t,e)},setOptions(t){Object.assign(fe,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...fe.remoteFeatures,...t};fe.remoteFeatures=e,(n=fe.remoteFeatures)!=null&&n.socials&&(fe.remoteFeatures.socials=i_.filterSocialsByPlatform(fe.remoteFeatures.socials))},setFeatures(t){if(!t)return;fe.features||(fe.features=Me.DEFAULT_FEATURES);const e={...fe.features,...t};fe.features=e},setProjectId(t){fe.projectId=t},setCustomRpcUrls(t){fe.customRpcUrls=t},setAllWallets(t){fe.allWallets=t},setIncludeWalletIds(t){fe.includeWalletIds=t},setExcludeWalletIds(t){fe.excludeWalletIds=t},setFeaturedWalletIds(t){fe.featuredWalletIds=t},setTokens(t){fe.tokens=t},setTermsConditionsUrl(t){fe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){fe.privacyPolicyUrl=t},setCustomWallets(t){fe.customWallets=t},setIsSiweEnabled(t){fe.isSiweEnabled=t},setIsUniversalProvider(t){fe.isUniversalProvider=t},setSdkVersion(t){fe.sdkVersion=t},setMetadata(t){fe.metadata=t},setDisableAppend(t){fe.disableAppend=t},setEIP6963Enabled(t){fe.enableEIP6963=t},setDebug(t){fe.debug=t},setEnableWalletConnect(t){fe.enableWalletConnect=t},setEnableWalletGuide(t){fe.enableWalletGuide=t},setEnableAuthLogger(t){fe.enableAuthLogger=t},setEnableWallets(t){fe.enableWallets=t},setPreferUniversalLinks(t){fe.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){fe.hasMultipleAddresses=t},setSIWX(t){fe.siwx=t},setConnectMethodsOrder(t){fe.features={...fe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){fe.features={...fe.features,walletFeaturesOrder:t}},setSocialsOrder(t){fe.remoteFeatures={...fe.remoteFeatures,socials:t}},setCollapseWallets(t){fe.features={...fe.features,collapseWallets:t}},setEnableEmbedded(t){fe.enableEmbedded=t},setAllowUnsupportedChain(t){fe.allowUnsupportedChain=t},setManualWCControl(t){fe.manualWCControl=t},setEnableNetworkSwitch(t){fe.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(fe.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){fe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return fe.universalProviderConfigOverride},getSnapshot(){return Ta(fe)}},o_=Object.freeze({enabled:!0,events:[]}),a_=new Sc({baseUrl:ce.getAnalyticsUrl(),clientId:null}),c_=5,l_=60*1e3,rs=Ze({...o_}),u_={state:rs,subscribeKey(t,e){return Pt(rs,t,e)},async sendError(t,e){if(!rs.enabled)return;const n=Date.now();if(rs.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<l_}).length>=c_)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};rs.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=z.state;await a_.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){rs.enabled=!0},disable(){rs.enabled=!1},clearEvents(){rs.events=[]}};class fo extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,fo.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,fo):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function Cg(t,e){const n=t instanceof fo?t:new fo(t instanceof Error?t.message:String(t),e,t);throw u_.sendError(n,n.category),n}function Cn(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Cg(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Cg(a,e)}},n[r]=i}else n[r]=s}),n}const mr={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},d_={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===mr.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${mr.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===mr.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${mr.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===M.CHAIN.SOLANA&&t===mr.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${mr.COINBASE.url}/dapp?cb_url=${r}`)}},pn=Ze({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),h_={state:pn,subscribeNetworkImages(t){return Nt(pn.networkImages,()=>t(pn.networkImages))},subscribeKey(t,e){return Pt(pn,t,e)},subscribe(t){return Nt(pn,()=>t(pn))},setWalletImage(t,e){pn.walletImages[t]=e},setNetworkImage(t,e){pn.networkImages[t]=e},setChainImage(t,e){pn.chainImages[t]=e},setConnectorImage(t,e){pn.connectorImages={...pn.connectorImages,[t]:e}},setTokenImage(t,e){pn.tokenImages[t]=e},setCurrencyImage(t,e){pn.currencyImages[t]=e}},Vn=Cn(h_),f_={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},id=Ze({networkImagePromises:{}}),x0={async fetchWalletImage(t){if(t)return await ue._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(id.networkImagePromises[t]||(id.networkImagePromises[t]=ue._fetchNetworkImage(t)),await id.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Vn.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Vn.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Vn.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Vn.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Vn.state.connectorImages[t.imageId]},getChainImage(t){return Vn.state.networkImages[f_[t]]}},ss=Ze({message:"",variant:"info",open:!1}),p_={state:ss,subscribeKey(t,e){return Pt(ss,t,e)},open(t,e){const{debug:n}=z.state,{shortMessage:r,longMessage:s}=t;n&&(ss.message=r,ss.variant=e,ss.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){ss.open=!1,ss.message="",ss.variant="info"}},ot=Cn(p_),g_=ce.getAnalyticsUrl(),m_=new Sc({baseUrl:g_,clientId:null}),y_=["MODAL_CREATED"],Tr=Ze({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Fe={state:Tr,subscribe(t){return Nt(Tr,()=>t(Tr))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=z.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=K.state.address;if(y_.includes(t.data.event)||typeof window>"u")return;await m_.post({path:"/e",params:Fe.getSdkProperties(),body:{eventId:ce.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Tr.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===M.HTTP_STATUS_CODES.FORBIDDEN&&!Tr.reportedErrors.FORBIDDEN&&(ot.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${aa()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Tr.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Tr.timestamp=Date.now(),Tr.data=t,(e=z.state.features)!=null&&e.analytics&&Fe._sendAnalyticsEvent(Tr)}},w_=ce.getApiUrl(),Gt=new Sc({baseUrl:w_,clientId:null}),b_=40,_g=4,v_=20,ve=Ze({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ue={state:ve,subscribeKey(t,e){return Pt(ve,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=z.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return z.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Gt.baseUrl}/getWalletImage/${t}`,n=await Gt.getBlob({path:e,params:ue._getSdkProperties()});Vn.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Gt.baseUrl}/public/getAssetImage/${t}`,n=await Gt.getBlob({path:e,params:ue._getSdkProperties()});Vn.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Gt.baseUrl}/public/getAssetImage/${t}`,n=await Gt.getBlob({path:e,params:ue._getSdkProperties()});Vn.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Gt.baseUrl}/public/getCurrencyImage/${t}`,n=await Gt.getBlob({path:e,params:ue._getSdkProperties()});Vn.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Gt.baseUrl}/public/getTokenImage/${t}`,n=await Gt.getBlob({path:e,params:ue._getSdkProperties()});Vn.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ce.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===mr.COINBASE.id?!0:T.state.activeChain==="solana"&&(n.id===mr.SOLFLARE.id||n.id===mr.PHANTOM.id)):t},async fetchProjectConfig(){return(await Gt.get({path:"/appkit/v1/config",params:ue._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Gt.get({path:"/projects/v1/origins",params:ue._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===M.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=M.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=T.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!x0.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ue._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Y.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ue._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ue._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ue._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ue._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(mr).map(o=>o.id));const r=await Gt.get({path:"/getWallets",params:{...ue._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ue._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=z.state;if(t!=null&&t.length){const e={...ue._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??_g,include:t},{data:n}=await ue.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ue._fetchWalletImage(i))),ve.featured=r,ve.allFeatured=r}},async fetchRecommendedWallets(){try{ve.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=z.state,r=[...e??[],...n??[]].filter(Boolean),s=T.getRequestedCaipNetworkIds().join(","),i={page:1,entries:_g,include:t,exclude:r,chains:s},{data:o,count:a}=await ue.fetchWallets(i),c=G.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ue._fetchWalletImage(d))),ve.recommended=o,ve.allRecommended=o,ve.count=a??0}catch{}finally{ve.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=z.state,s=T.getRequestedCaipNetworkIds().join(","),i=[...ve.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:b_,include:e,exclude:i,chains:s},{data:a,count:c}=await ue.fetchWallets(o),l=a.slice(0,v_).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ue._fetchWalletImage(u))),ve.wallets=ce.uniqueBy([...ve.wallets,...ue._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),ve.count=c>ve.count?c:ve.count,ve.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ue.fetchWallets(e);n&&n.forEach(r=>{ve.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=z.state,s=T.getRequestedCaipNetworkIds().join(",");ve.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ue.fetchWallets(i);Fe.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ue._fetchWalletImage(c)),ce.wait(300)]),ve.search=ue._filterOutExtensions(o)},initPromise(t,e){const n=ve.promises[t];return n||(ve.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ue.initPromise("connectorImages",ue.fetchConnectorImages),e&&ue.initPromise("featuredWallets",ue.fetchFeaturedWallets),n&&ue.initPromise("recommendedWallets",ue.fetchRecommendedWallets),r&&ue.initPromise("networkImages",ue.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=z.state.features)!=null&&t.analytics&&ue.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Gt.get({path:"/getAnalyticsConfig",params:ue._getSdkProperties()});z.setFeatures({analytics:t})}catch{z.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){ve.featured=ve.allFeatured,ve.recommended=ve.allRecommended;return}const e=T.getRequestedCaipNetworkIds().join(",");ve.featured=ve.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.recommended=ve.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.filteredWallets=ve.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){ve.filteredWallets=[]},setFilterByNamespace(t){if(!t){ve.featured=ve.allFeatured,ve.recommended=ve.allRecommended;return}const e=T.getRequestedCaipNetworkIds().join(",");ve.featured=ve.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.recommended=ve.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.filteredWallets=ve.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},qe=Ze({view:"Connect",history:["Connect"],transactionStack:[]}),E_={state:qe,subscribeKey(t,e){return Pt(qe,t,e)},pushTransactionStack(t){qe.transactionStack.push(t)},popTransactionStack(t){const e=qe.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),ge.goBack();break;case"cancel":s==null||s(),ge.goBack();break}},push(t,e){t!==qe.view&&(qe.view=t,qe.history.push(t),qe.data=e)},reset(t,e){qe.view=t,qe.history=[t],qe.data=e},replace(t,e){qe.history.at(-1)===t||(qe.view=t,qe.history[qe.history.length-1]=t,qe.data=e)},goBack(){var r;const t=T.state.activeCaipAddress,e=ge.state.view==="ConnectingFarcaster",n=!t&&e;if(qe.history.length>1){qe.history.pop();const[s]=qe.history.slice(-1);s&&(t&&s==="Connect"?qe.view="Account":qe.view=s)}else Be.close();(r=qe.data)!=null&&r.wallet&&(qe.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){K.setFarcasterUrl(void 0,T.state.activeChain);const a=Y.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Ta(z.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(qe.history.length>1){qe.history=qe.history.slice(0,t+1);const[e]=qe.history.slice(-1);e&&(qe.view=e)}},goBackOrCloseModal(){ge.state.history.length>1?ge.goBack():Be.close()}},ge=Cn(E_),Pr=Ze({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Th={state:Pr,subscribe(t){return Nt(Pr,()=>t(Pr))},setThemeMode(t){Pr.themeMode=t;try{const e=Y.getAuthConnector();if(e){const n=Th.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Wr(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Pr.themeVariables={...Pr.themeVariables,...t};try{const e=Y.getAuthConnector();if(e){const n=Th.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Wr(Pr.themeVariables,Pr.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Ta(Pr)}},nn=Cn(Th),N0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Pe=Ze({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...N0},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),C_={state:Pe,subscribe(t){return Nt(Pe,()=>{t(Pe)})},subscribeKey(t,e){return Pt(Pe,t,e)},initialize(t){t.forEach(e=>{const n=G.getConnectedConnectorId(e);n&&Y.setConnectorId(n,e)})},setActiveConnector(t){t&&(Pe.activeConnector=gi(t))},setConnectors(t){t.filter(s=>!Pe.allConnectors.some(i=>i.id===s.id&&Y.getConnectorName(i.name)===Y.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Pe.allConnectors.push(gi(s))});const n=Y.getEnabledNamespaces(),r=Y.getEnabledConnectors(n);Pe.connectors=Y.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Pe.filterByNamespaceMap).forEach(e=>{Pe.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Pe.filterByNamespaceMap[e]=!0}),Y.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Pe.filterByNamespaceMap[t]=e,Y.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Y.getEnabledNamespaces(),e=Y.getEnabledConnectors(t),n=Y.areAllNamespacesEnabled();Pe.connectors=Y.mergeMultiChainConnectors(e),n?ue.clearFilterByNamespaces():ue.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Pe.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Pe.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Pe.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Y.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===M.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Y.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===M.CONNECTOR_ID.AUTH){const s=t,i=Ta(z.state),o=nn.getSnapshot().themeMode,a=nn.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Wr(a,o)}),Y.setConnectors([t])}else Y.setConnectors([t])},getAuthConnector(t){var r;const e=t||T.state.activeChain,n=Pe.connectors.find(s=>s.id===M.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Pe.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Pe.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Pe.allConnectors.filter(r=>r.chain===T.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Ta(z.state),r=nn.getSnapshot().themeMode,s=nn.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Wr(s,r)})},getConnectorsByNamespace(t){const e=Pe.allConnectors.filter(n=>n.chain===t);return Y.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Y.getConnector(t.id,t.rdns),n=T.state.activeChain;d_.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?ge.push("ConnectingExternal",{connector:e}):ge.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Y.getConnectorsByNamespace(t):Y.mergeMultiChainConnectors(Pe.allConnectors)},setFilterByNamespace(t){Pe.filterByNamespace=t,Pe.connectors=Y.getConnectors(t),ue.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Pe.activeConnectorIds={...Pe.activeConnectorIds,[e]:t},G.setConnectedConnectorId(e,t))},removeConnectorId(t){Pe.activeConnectorIds={...Pe.activeConnectorIds,[t]:void 0},G.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Pe.activeConnectorIds[t]},isConnected(t){return t?!!Pe.activeConnectorIds[t]:Object.values(Pe.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Pe.activeConnectorIds={...N0}}},Y=Cn(C_),Oa={getConnectionStatus(t,e){const n=Y.state.activeConnectorIds[e],r=se.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===M.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=se.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=Y.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>Y.getConnectorById(a.connectorId)),o=Oa.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var po={};const __="https://secure.walletconnect.org/sdk",A_=(typeof process<"u"&&typeof po<"u"?po.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||__,I_=(typeof process<"u"&&typeof po<"u"?po.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",S_=(typeof process<"u"&&typeof po<"u"?po.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ae={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ct={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},x_=1e3,qr={checkNamespaceConnectorId(t,e){return Y.getConnectorId(t)===e},isSocialProvider(t){return Me.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Y.setActiveConnector(e),s==null||s(ce.isMobile()&&t),r){const l=Be.subscribeKey("open",u=>{u||(ge.state.view!==r&&ge.replace(r),l(),a(new Error("Modal closed")))})}const c=T.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Be.close(),c(),o(yn.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=T.subscribeKey("activeCaipAddress",s=>{s&&(Be.close(),r(),e(yn.parseCaipAddress(s)))});se.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=K.state.socialWindow,i=K.state.socialProvider,o=!1,a=null;const c=T.subscribeKey("activeCaipAddress",l=>{l&&(e&&Be.close(),c())});return new Promise((l,u)=>{async function d(g){var f;if((f=g.data)!=null&&f.resultUri)if(g.origin===M.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const p=Y.getAuthConnector();if(p&&!o){s&&(s.close(),K.setSocialWindow(void 0,T.state.activeChain),s=K.state.socialWindow),o=!0;const m=g.data.resultUri;if(i&&Fe.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await p.provider.connectSocial(m),i){G.setConnectedSocialProvider(i),await se.connectExternal({id:p.id,type:p.type,socialUri:m},p.chain);const b=T.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(yn.parseCaipAddress(b)),Fe.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Fe.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Fe.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(K.setSocialProvider(t,T.state.activeChain),i=K.state.socialProvider,Fe.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const g=Be.subscribeKey("open",p=>{!p&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),g())}),f=Y.getAuthConnector();if(f&&!K.state.farcasterUrl)try{const{url:p}=await f.provider.getFarcasterUri();K.setFarcasterUrl(p,T.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const g=Y.getAuthConnector();a=ce.returnOpenHref(`${M.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g&&i){const{uri:f}=await g.provider.getSocialRedirectUri({provider:i});if(a&&f){K.setSocialWindow(a,T.state.activeChain),s=K.state.socialWindow,a.location.href=f;const p=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(p))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Be.subscribeKey("open",c=>{c||(ge.state.view!==e&&ge.replace(e),a(),i(new Error("Modal closed")))})}const o=T.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Be.close(),o(),s(yn.parseCaipAddress(a)))})})},async updateEmail(){const t=G.getConnectedConnectorId(T.state.activeChain),e=Y.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==M.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return ge.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Be.close(),clearInterval(i),o(),r({email:a}))},x_),o=Be.subscribeKey("open",a=>{a||(ge.state.view!=="Connect"&&ge.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return T.checkIfSmartAccountEnabled()&&((n=K.state.preferredAccountTypes)==null?void 0:n[t])===Ct.ACCOUNT_TYPES.EOA}},Qs=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),ut=Ze({...Qs}),N_={state:ut,subscribeKey(t,e){return Pt(ut,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ce.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){ut.message=Qs.message,ut.variant=Qs.variant,ut.svg=Qs.svg,ut.open=Qs.open,ut.autoClose=Qs.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Qs.autoClose}){ut.open?(ut.open=!1,setTimeout(()=>{ut.message=t,ut.variant=n,ut.svg=e,ut.open=!0,ut.autoClose=r},150)):(ut.message=t,ut.variant=n,ut.svg=e,ut.open=!0,ut.autoClose=r)}},Gn=N_,Ke=Ze({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),T_={state:Ke,subscribe(t){return Nt(Ke,()=>t(Ke))},setLastNetworkInView(t){Ke.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Ke.loading=!0;try{const s=await pe.fetchTransactions({account:t,cursor:Ke.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=ca.filterSpamTransactions(s.data),o=ca.filterByConnectedChain(i),a=[...Ke.transactions,...o];Ke.loading=!1,e==="coinbase"?Ke.coinbaseTransactions=ca.groupTransactionsByYearAndMonth(Ke.coinbaseTransactions,s.data):(Ke.transactions=a,Ke.transactionsByYear=ca.groupTransactionsByYearAndMonth(Ke.transactionsByYear,o)),Ke.empty=a.length===0,Ke.next=s.next?s.next:void 0}catch{const i=T.state.activeChain;Fe.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:z.state.projectId,cursor:Ke.next,isSmartAccount:((r=K.state.preferredAccountTypes)==null?void 0:r[i])===Ct.ACCOUNT_TYPES.SMART_ACCOUNT}}),Gn.showError("Failed to fetch transactions"),Ke.loading=!1,Ke.empty=!0,Ke.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Ke.next=void 0},resetTransactions(){Ke.transactions=[],Ke.transactionsByYear={},Ke.lastNetworkInView=void 0,Ke.loading=!1,Ke.empty=!1,Ke.next=void 0}},ca=Cn(T_,"API_ERROR"),Ne=Ze({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Vs;const P_={state:Ne,subscribe(t){return Nt(Ne,()=>t(Ne))},subscribeKey(t,e){return Pt(Ne,t,e)},_getClient(){return Ne._client},setClient(t){Ne._client=gi(t)},initialize(t){const e=G.getConnections();for(const n of t){const r=n.namespace;if(r){const s=Ne.connections.get(r)??[],i=e[r]??[],o=[...s,...i];Ne.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(ce.isTelegram()||ce.isSafari()&&ce.isIos()){if(Vs){await Vs,Vs=void 0;return}if(!ce.isPairingExpired(Ne==null?void 0:Ne.wcPairingExpiry)){const s=Ne.wcUri;Ne.wcUri=s;return}Vs=(e=(t=se._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),se.state.status="connecting",await Vs,Vs=void 0,Ne.wcPairingExpiry=void 0,se.state.status="connected"}else await((r=(n=se._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=se._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&T.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=se._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||T.state.activeChain;e&&Y.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Be.setLoading(!0,T.state.activeChain);const n=Y.getAuthConnector();n&&(K.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),G.setPreferredAccountTypes(K.state.preferredAccountTypes??{[e]:t}),await se.reconnectExternal(n),Be.setLoading(!1,T.state.activeChain),Fe.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=se._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=se._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=se._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=se._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=se._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=se._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=se._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=se._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=se._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=se._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=se._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=se._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Ne.wcUri=void 0,Ne.wcPairingExpiry=void 0,Ne.wcLinking=void 0,Ne.recentWallet=void 0,Ne.status="disconnected",ca.resetTransactions(),G.deleteWalletConnectDeepLink()},resetUri(){Ne.wcUri=void 0,Ne.wcPairingExpiry=void 0,Vs=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=se.state;t&&G.setWalletConnectDeepLink(t),e&&G.setAppKitRecent(e),Fe.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=ge.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Ne.wcBasic=t},setUri(t){Ne.wcUri=t,Ne.wcPairingExpiry=ce.getPairingExpiry()},setWcLinking(t){Ne.wcLinking=t},setWcError(t){Ne.wcError=t,Ne.buffering=!1},setRecentWallet(t){Ne.recentWallet=t},setBuffering(t){Ne.buffering=t},setStatus(t){Ne.status=t},setIsSwitchingConnection(t){Ne.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=se._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new fo("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){Ne.connections=new Map(Ne.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&qr.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await se.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Y.getConnectorById(t.connectorId),s=t.connectorId===M.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await se.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await se.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Y.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===M.CONNECTOR_ID.AUTH,a=t.connectorId===M.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&qr.isSocialProvider(i)){const{address:d}=await qr.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Be.open({view:"ConnectingFarcaster"})},onConnect(){ge.replace("ProfileWallets")}});c=d}else{const{address:d}=await qr.connectEmail({closeModalOnConnect:r,onOpen(){Be.open({view:"EmailLogin"})},onConnect(){ge.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await qr.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Be.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){ge.replace("ProfileWallets")}});c=d}else{const d=await se.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await se.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){Oa.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=K.getCaipAddress(n);if(o){const{address:c}=yn.parseCaipAddress(o);i=c}const a=Oa.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await se.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await se.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},se=Cn(P_),Ui=Ze({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),vr={state:Ui,subscribe(t){return Nt(Ui,()=>t(Ui))},subscribeOpen(t){return Pt(Ui,"open",t)},set(t){Object.assign(Ui,{...Ui,...t})}};function O_(t){const e=Array.from(T.state.chains.keys());let n=[];return t?(n.push([t,T.state.chains.get(t)]),qr.checkNamespaceConnectorId(t,M.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&qr.checkNamespaceConnectorId(r,M.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,T.state.chains.get(r)])}):qr.checkNamespaceConnectorId(t,M.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&qr.checkNamespaceConnectorId(r,M.CONNECTOR_ID.AUTH)&&n.push([r,T.state.chains.get(r)])})):n=Array.from(T.state.chains.entries()),n}function T0(){var r,s;const t=((r=T.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=T.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Me.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const R_={async getTokenList(){var r;const t=T.state.activeCaipNetwork,e=await pe.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=T.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(se==null?void 0:se.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await pe.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await pe.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=se.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await Sp.getMyTokensWithBalance(t);return K.setTokenBalance(e,T.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:T0(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Le=Ze({tokenBalances:[],loading:!1}),D_={state:Le,subscribe(t){return Nt(Le,()=>t(Le))},subscribeKey(t,e){return Pt(Le,t,e)},setToken(t){t&&(Le.token=gi(t))},setTokenAmount(t){Le.sendTokenAmount=t},setReceiverAddress(t){Le.receiverAddress=t},setReceiverProfileImageUrl(t){Le.receiverProfileImageUrl=t},setReceiverProfileName(t){Le.receiverProfileName=t},setNetworkBalanceInUsd(t){Le.networkBalanceInUSD=t},setLoading(t){Le.loading=t},async sendToken(){var t;try{switch(ke.setLoading(!0),(t=T.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await ke.sendEvmToken();return;case"solana":await ke.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{ke.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=T.state.activeChain,e=(n=K.state.preferredAccountTypes)==null?void 0:n[t];if(!ke.state.sendTokenAmount||!ke.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ke.state.token)throw new Error("A token is required");(r=ke.state.token)!=null&&r.address?(Fe.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ct.ACCOUNT_TYPES.SMART_ACCOUNT,token:ke.state.token.address,amount:ke.state.sendTokenAmount,network:((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await ke.sendERC20Token({receiverAddress:ke.state.receiverAddress,tokenAddress:ke.state.token.address,sendTokenAmount:ke.state.sendTokenAmount,decimals:ke.state.token.quantity.decimals})):(Fe.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ct.ACCOUNT_TYPES.SMART_ACCOUNT,token:ke.state.token.symbol||"",amount:ke.state.sendTokenAmount,network:((i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await ke.sendNativeToken({receiverAddress:ke.state.receiverAddress,sendTokenAmount:ke.state.sendTokenAmount,decimals:ke.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Le.loading=!0;const e=(i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=T.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=T.state.activeCaipAddress,s=r?ce.getPlainAddress(r):void 0;if(Le.lastRetry&&!ce.isAllowedRetry(Le.lastRetry,30*Me.ONE_SEC_MS))return Le.loading=!1,[];try{if(s&&e&&n){const a=await Sp.getMyTokensWithBalance();return Le.tokenBalances=a,Le.lastRetry=void 0,a}}catch(a){Le.lastRetry=Date.now(),t==null||t(a),Gn.showError("Token Balance Unavailable")}finally{Le.loading=!1}return[]},fetchNetworkBalance(){if(Le.tokenBalances.length===0)return;const t=R_.mapBalancesToSwapTokens(Le.tokenBalances);if(!t)return;const e=t.find(n=>n.address===T0());e&&(Le.networkBalanceInUSD=e?QC.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;ge.pushTransactionStack({});const e=t.receiverAddress,n=K.state.address,r=se.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await se.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Fe.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=K.state.preferredAccountTypes)==null?void 0:i.eip155)===Ct.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=ke.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=se._getClient())==null||c.updateBalance("eip155"),ke.resetSend()},async sendERC20Token(t){ge.pushTransactionStack({onSuccess(){ge.replace("Account")}});const e=se.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(K.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ce.getPlainAddress(t.tokenAddress);await se.writeContract({fromAddress:K.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:r_.getERC20Abi(n),chainNamespace:"eip155"}),ke.resetSend()}},async sendSolanaToken(){var t;if(!ke.state.sendTokenAmount||!ke.state.receiverAddress)throw new Error("An amount and receiver address are required");ge.pushTransactionStack({onSuccess(){ge.replace("Account")}}),await se.sendTransaction({chainNamespace:"solana",to:ke.state.receiverAddress,value:ke.state.sendTokenAmount}),(t=se._getClient())==null||t.updateBalance("solana"),ke.resetSend()},resetSend(){Le.token=void 0,Le.sendTokenAmount=void 0,Le.receiverAddress=void 0,Le.receiverProfileImageUrl=void 0,Le.receiverProfileName=void 0,Le.loading=!1,Le.tokenBalances=[]}},ke=Cn(D_),od={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Yc={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Q=Ze({chains:qC(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),$_={state:Q,subscribe(t){return Nt(Q,()=>{t(Q)})},subscribeKey(t,e){return Pt(Q,t,e)},subscribeChainProp(t,e,n){let r;return Nt(Q.chains,()=>{var i;const s=n||Q.activeChain;if(s){const o=(i=Q.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=G.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=z.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Q.noAdapters=!0),Q.noAdapters||(Q.activeChain=a==null?void 0:a.namespace,Q.activeCaipNetwork=i,T.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Q.activeChain&&vr.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);T.state.chains.set(u,{namespace:u,networkState:Ze({...Yc,caipNetwork:d==null?void 0:d[0]}),accountState:Ze(od),caipNetworks:d??[],...n}),T.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Q.activeChain===t){const r=Array.from(Q.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&T.setActiveCaipNetwork(s)}}Q.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Q.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Yc,caipNetwork:r[0]},accountState:od,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),T.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Q.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Q.chains.set(t.chainNamespace,{...e,caipNetworks:r}),T.setRequestedCaipNetworks(r,t.chainNamespace),Y.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Q.chains.get(t);if(n){const o=((r=Q.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&T.setActiveCaipNetwork(n.caipNetworks[0]),Q.chains.set(t,{...n,caipNetworks:a}),T.setRequestedCaipNetworks(a||[],t),a.length===0&&Y.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Q.chains.get(t);n&&(n.networkState={...n.networkState||Yc,...e},Q.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Q.chains.get(t);if(r){const s={...r.accountState||od,...e};Q.chains.set(t,{...r,accountState:s}),(Q.chains.size===1||Q.activeChain===t)&&(e.caipAddress&&(Q.activeCaipAddress=e.caipAddress),K.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Q.chains.get(t);if(n){const r={...n.networkState||Yc,...e};Q.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){T.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Y.removeConnectorId(n)},setActiveNamespace(t){var r,s;Q.activeChain=t;const e=t?Q.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Q.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Q.activeCaipNetwork=n,T.setChainNetworkData(t,{caipNetwork:n}),G.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),vr.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Q.activeChain!==t.chainNamespace&&T.setIsSwitchingNamespace(!0);const e=Q.chains.get(t.chainNamespace);Q.activeChain=t.chainNamespace,Q.activeCaipNetwork=t,T.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Q.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Q.activeCaipAddress=void 0,T.setAccountProp("caipAddress",Q.activeCaipAddress,t.chainNamespace),e&&K.replaceState(e.accountState),ke.resetSend(),vr.set({activeChain:Q.activeChain,selectedNetworkId:(i=Q.activeCaipNetwork)==null?void 0:i.caipNetworkId}),G.setActiveCaipNetworkId(t.caipNetworkId),!T.checkIfSupportedNetwork(t.chainNamespace)&&z.state.enableNetworkSwitch&&!z.state.allowUnsupportedChain&&!se.state.wcBasic&&T.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Q.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==T.state.activeChain,n=(s=T.getNetworkData(t))==null?void 0:s.caipNetwork,r=T.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await T.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=T.state.chains.get(T.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Q.activeCaipNetwork)==null?void 0:o.id)})),r=T.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Be.close()}catch{ge.goBack()}Fe.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Q.activeChain,n=Q.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Q.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Q.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Q.activeChain;if(e&&(n=e),!n)return;const r=(s=Q.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Q.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Q.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ce.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Q.chains.forEach(e=>{const n=T.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){T.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=T.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Y.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Q.chains.forEach(e=>{const n=T.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Q.activeCaipNetwork},getActiveCaipAddress(){return Q.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Q.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=T.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());T.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Q.activeCaipNetwork,r=T.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Q.activeChain)return!0;const e=T.getRequestedCaipNetworks(Q.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){T.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=Pa.caipNetworkIdToNumber((r=Q.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Q.activeChain;if(!e||!t)return!1;const n=T.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Be.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Q.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Me.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){T.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Q.activeCaipAddress=void 0,T.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Y.removeConnectorId(e)},setIsSwitchingNamespace(t){Q.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Q.chains.forEach(s=>{M.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Q.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=T.state.chains.get(t))==null?void 0:e.accountState:K.state},getNetworkData(t){var n;const e=t||Q.activeChain;if(e)return(n=T.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=T.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Y.state.filterByNamespace;return(t?[Q.chains.get(t)]:Array.from(Q.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?T.getRequestedCaipNetworks(t):T.getAllRequestedCaipNetworks()}},T=Cn($_),k_={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},P0=ce.getBlockchainApiUrl(),Kt=Ze({clientId:null,api:new Sc({baseUrl:P0,clientId:null}),supportedChains:{http:[],ws:[]}}),pe={state:Kt,async get(t){const{st:e,sv:n}=pe.getSdkProperties(),r=z.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Kt.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=z.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Kt.supportedChains.http.length||await pe.getSupportedNetworks()}catch{return!1}return Kt.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await pe.get({path:"v1/supported-chains"});return Kt.supportedChains=t,t}catch{return Kt.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await pe.isNetworkSupported(e))return{avatar:"",name:""};const r=G.getIdentityFromCacheForAddress(t);if(r)return r;const s=await pe.get({path:`/v1/identity/${t}`,params:{sender:T.state.activeCaipAddress?ce.getPlainAddress(T.state.activeCaipAddress):void 0}});return G.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await pe.isNetworkSupported((a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?pe.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await pe.isNetworkSupported((o=T.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?pe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await pe.isNetworkSupported((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await pe.isNetworkSupported((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Kt.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:z.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await pe.isNetworkSupported((r=T.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=pe.getSdkProperties();if(!await pe.isNetworkSupported((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return pe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await pe.isNetworkSupported((o=T.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Kt.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Me.CONVERT_SLIPPAGE_TOLERANCE},projectId:z.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=pe.getSdkProperties();if(!await pe.isNetworkSupported((o=T.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return pe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=pe.getSdkProperties();if(!await pe.isNetworkSupported((l=T.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Gn.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=G.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await pe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return G.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await pe.isNetworkSupported((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await pe.isNetworkSupported((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pe.get({path:`/v1/profile/reverse/${t}`,params:{sender:K.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await pe.isNetworkSupported((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await pe.isNetworkSupported((i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Kt.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await pe.isNetworkSupported((a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Kt.api.post({path:"/v1/generators/onrampurl",params:{projectId:z.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await pe.isNetworkSupported((e=T.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await pe.get({path:"/v1/onramp/options"})}catch{return k_}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await pe.isNetworkSupported((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Kt.api.post({path:"/v1/onramp/quote",params:{projectId:z.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await pe.isNetworkSupported((n=T.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await pe.isNetworkSupported((s=T.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Kt.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:z.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Kt.clientId=t,Kt.api=new Sc({baseUrl:P0,clientId:t})}},U_="1.0.8";let Un=class Ph extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Ph?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Ph&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${U_}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ts(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const O0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,R0=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,D0=/^\(.+?\).*?$/,Ag=/^tuple(?<array>(\[(\d*)\])*)$/;function Oh(t){let e=t.type;if(Ag.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Oh(i),s<n-1&&(e+=", ")}const r=ts(Ag,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Oh({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Uo(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Oh(s),r!==n-1&&(e+=", ")}return e}function B_(t){var e;return t.type==="function"?`function ${t.name}(${Uo(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Uo(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Uo(t.inputs)})`:t.type==="error"?`error ${t.name}(${Uo(t.inputs)})`:t.type==="constructor"?`constructor(${Uo(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const $0=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function L_(t){return $0.test(t)}function M_(t){return ts($0,t)}const k0=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function F_(t){return k0.test(t)}function j_(t){return ts(k0,t)}const U0=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function z_(t){return U0.test(t)}function q_(t){return ts(U0,t)}const B0=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function L0(t){return B0.test(t)}function H_(t){return ts(B0,t)}const M0=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function W_(t){return M0.test(t)}function V_(t){return ts(M0,t)}const F0=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function G_(t){return F0.test(t)}function K_(t){return ts(F0,t)}const Y_=/^receive\(\) external payable$/;function Z_(t){return Y_.test(t)}const J_=new Set(["indexed"]),Rh=new Set(["calldata","memory","storage"]);class X_ extends Un{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Q_ extends Un{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class eA extends Un{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class tA extends Un{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class nA extends Un{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class rA extends Un{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class sA extends Un{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class _o extends Un{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class iA extends Un{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class oA extends Un{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class aA extends Un{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class cA extends Un{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function lA(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const ad=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function uA(t,e={}){if(z_(t))return dA(t,e);if(F_(t))return hA(t,e);if(L_(t))return fA(t,e);if(W_(t))return pA(t,e);if(G_(t))return gA(t);if(Z_(t))return{type:"receive",stateMutability:"payable"};throw new iA({signature:t})}function dA(t,e={}){const n=q_(t);if(!n)throw new _o({signature:t,type:"function"});const r=Kn(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(yi(r[a],{modifiers:Rh,structs:e,type:"function"}));const o=[];if(n.returns){const a=Kn(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(yi(a[l],{modifiers:Rh,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function hA(t,e={}){const n=j_(t);if(!n)throw new _o({signature:t,type:"event"});const r=Kn(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(yi(r[o],{modifiers:J_,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function fA(t,e={}){const n=M_(t);if(!n)throw new _o({signature:t,type:"error"});const r=Kn(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(yi(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function pA(t,e={}){const n=V_(t);if(!n)throw new _o({signature:t,type:"constructor"});const r=Kn(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(yi(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function gA(t){const e=K_(t);if(!e)throw new _o({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const mA=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,yA=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,wA=/^u?int$/;function yi(t,e){var d,h;const n=lA(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(ad.has(n))return ad.get(n);const r=D0.test(t),s=ts(r?yA:mA,t);if(!s)throw new eA({param:t});if(s.name&&vA(s.name))throw new tA({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const g=Kn(s.type),f=[],p=g.length;for(let m=0;m<p;m++)f.push(yi(g[m],{structs:a}));l={components:f}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(wA.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!j0(c))throw new Q_({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new nA({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Rh.has(s.modifier)&&!EA(c,!!s.array))throw new rA({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return ad.set(n,u),u}function Kn(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Kn(a,[...e,n.trim()]):Kn(a,e,`${n}${o}`,r);case"(":return Kn(a,e,`${n}${o}`,r+1);case")":return Kn(a,e,`${n}${o}`,r-1);default:return Kn(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new cA({current:n,depth:r});return e.push(n.trim()),e}function j0(t){return t==="address"||t==="bool"||t==="function"||t==="string"||O0.test(t)||R0.test(t)}const bA=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function vA(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||O0.test(t)||R0.test(t)||bA.test(t)}function EA(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function CA(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!L0(a))continue;const c=H_(a);if(!c)throw new _o({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const f=l[h].trim();if(!f)continue;const p=yi(f,{type:"struct"});u.push(p)}if(!u.length)throw new oA({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=z0(c,e)}return r}const _A=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function z0(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(D0.test(o.type))r.push(o);else{const c=ts(_A,o.type);if(!(c!=null&&c.type))throw new sA({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new aA({type:u});r.push({...o,type:`tuple${l??""}`,components:z0(e[u]??[],e,new Set([...n,u]))})}else if(j0(u))r.push(o);else throw new X_({type:u})}}return r}function q0(t){const e=CA(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];L0(i)||n.push(uA(i,e))}return n}function et(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function ks(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new kA(t.type);return`${t.name}(${Eu(t.inputs,{includeName:e})})`}function Eu(t,{includeName:e=!1}={}){return t?t.map(n=>AA(n,{includeName:e})).join(e?", ":","):""}function AA(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Eu(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Us(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ct(t){return Us(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const H0="2.31.2";let Bo={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${H0}`},F=class Dh extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Dh?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Dh&&n.cause.docsPath||n.docsPath,i=(a=Bo.getDocsUrl)==null?void 0:a.call(Bo,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Bo.version?[`Version: ${Bo.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=H0}walk(e){return W0(this,e)}};function W0(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?W0(t.cause,e):e?null:t}class IA extends F{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class Ig extends F{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class V0 extends F{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Eu(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Cu extends F{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class SA extends F{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class xA extends F{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ct(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class NA extends F{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class az extends F{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class cz extends F{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class G0 extends F{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class TA extends F{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class K0 extends F{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Ll extends F{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class PA extends F{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class lz extends F{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class OA extends F{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ks(e.abiItem)}\`, and`,`\`${n.type}\` in \`${ks(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class uz extends F{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class $h extends F{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Eu(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class Y0 extends F{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ks(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class RA extends F{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class DA extends F{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class $A extends F{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class kA extends F{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Z0 extends F{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let J0=class extends F{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Sg extends F{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Ao(t,{dir:e,size:n=32}={}){return typeof t=="string"?xs(t,{dir:e,size:n}):UA(t,{dir:e,size:n})}function xs(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new J0({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function UA(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new J0({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let X0=class extends F{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class BA extends F{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let LA=class extends F{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Zr(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function sr(t,{size:e}){if(ct(t)>e)throw new LA({givenSize:ct(t),maxSize:e})}function Yn(t,e={}){const{signed:n}=e;e.size&&sr(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Bs(t,e={}){return Number(Yn(t,e))}function Q0(t,e={}){let n=Cr(t);return e.size&&(sr(n,{size:e.size}),n=Zr(n,{dir:"right"})),new TextDecoder().decode(n)}const MA=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xn(t,e={}){return typeof t=="number"||typeof t=="bigint"?ee(t,e):typeof t=="string"?_u(t,e):typeof t=="boolean"?eb(t,e):Ht(t,e)}function eb(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(sr(n,{size:e.size}),Ao(n,{size:e.size})):n}function Ht(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=MA[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(sr(r,{size:e.size}),Ao(r,{dir:"right",size:e.size})):r}function ee(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new X0({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ao(a,{size:r}):a}const FA=new TextEncoder;function _u(t,e={}){const n=FA.encode(t);return Ht(n,e)}const jA=new TextEncoder;function Au(t,e={}){return typeof t=="number"||typeof t=="bigint"?qA(t,e):typeof t=="boolean"?zA(t,e):Us(t)?Cr(t,e):tb(t,e)}function zA(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(sr(n,{size:e.size}),Ao(n,{size:e.size})):n}const Or={zero:48,nine:57,A:65,F:70,a:97,f:102};function xg(t){if(t>=Or.zero&&t<=Or.nine)return t-Or.zero;if(t>=Or.A&&t<=Or.F)return t-(Or.A-10);if(t>=Or.a&&t<=Or.f)return t-(Or.a-10)}function Cr(t,e={}){let n=t;e.size&&(sr(n,{size:e.size}),n=Ao(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=xg(r.charCodeAt(a++)),l=xg(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new F(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function qA(t,e){const n=ee(t,e);return Cr(n)}function tb(t,e={}){const n=jA.encode(t);return typeof e.size=="number"?(sr(n,{size:e.size}),Ao(n,{dir:"right",size:e.size})):n}const Zc=BigInt(2**32-1),Ng=BigInt(32);function HA(t,e=!1){return e?{h:Number(t&Zc),l:Number(t>>Ng&Zc)}:{h:Number(t>>Ng&Zc)|0,l:Number(t&Zc)|0}}function WA(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=HA(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const VA=(t,e,n)=>t<<n|e>>>32-n,GA=(t,e,n)=>e<<n|t>>>32-n,KA=(t,e,n)=>e<<n-32|t>>>64-n,YA=(t,e,n)=>t<<n-32|e>>>64-n,Bi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ZA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ml(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function wi(t,...e){if(!ZA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function pz(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ml(t.outputLen),Ml(t.blockLen)}function Fl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nb(t,e){wi(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function JA(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ra(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function cd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ar(t,e){return t<<32-e|t>>>e}const XA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function QA(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function eI(t){for(let e=0;e<t.length;e++)t[e]=QA(t[e]);return t}const Tg=XA?t=>t:eI,rb=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",tI=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gz(t){if(wi(t),rb)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=tI[t[n]];return e}const Rr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Pg(t){if(t>=Rr._0&&t<=Rr._9)return t-Rr._0;if(t>=Rr.A&&t<=Rr.F)return t-(Rr.A-10);if(t>=Rr.a&&t<=Rr.f)return t-(Rr.a-10)}function mz(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(rb)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Pg(t.charCodeAt(i)),a=Pg(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function nI(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ep(t){return typeof t=="string"&&(t=nI(t)),wi(t),t}function yz(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];wi(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class sb{}function ib(t){const e=r=>t().update(ep(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function wz(t=32){if(Bi&&typeof Bi.getRandomValues=="function")return Bi.getRandomValues(new Uint8Array(t));if(Bi&&typeof Bi.randomBytes=="function")return Uint8Array.from(Bi.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const rI=BigInt(0),Lo=BigInt(1),sI=BigInt(2),iI=BigInt(7),oI=BigInt(256),aI=BigInt(113),ob=[],ab=[],cb=[];for(let t=0,e=Lo,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ob.push(2*(5*r+n)),ab.push((t+1)*(t+2)/2%64);let s=rI;for(let i=0;i<7;i++)e=(e<<Lo^(e>>iI)*aI)%oI,e&sI&&(s^=Lo<<(Lo<<BigInt(i))-Lo);cb.push(s)}const lb=WA(cb,!0),cI=lb[0],lI=lb[1],Og=(t,e,n)=>n>32?KA(t,e,n):VA(t,e,n),Rg=(t,e,n)=>n>32?YA(t,e,n):GA(t,e,n);function uI(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Og(l,u,1)^n[a],h=Rg(l,u,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=ab[o],c=Og(s,i,a),l=Rg(s,i,a),u=ob[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=cI[r],t[1]^=lI[r]}Ra(n)}class tp extends sb{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Ml(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=JA(this.state)}clone(){return this._cloneInto()}keccak(){Tg(this.state32),uI(this.state32,this.rounds),Tg(this.state32),this.posOut=0,this.pos=0}update(e){Fl(this),e=ep(e),wi(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Fl(this,!1),wi(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ml(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(nb(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ra(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new tp(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const dI=(t,e,n)=>ib(()=>new tp(e,t,n)),ub=dI(1,136,256/8);function xc(t,e){const n=e||"hex",r=ub(Us(t,{strict:!1})?Au(t):t);return n==="bytes"?r:Xn(r)}const hI=t=>xc(Au(t));function fI(t){return hI(t)}function pI(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new F("Unable to normalize signature.");return s}const gI=t=>{const e=typeof t=="string"?t:B_(t);return pI(e)};function db(t){return fI(gI(t))}const np=db;class un extends F{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let Iu=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const ld=new Iu(8192);function Su(t,e){if(ld.has(`${t}.${e}`))return ld.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=xc(tb(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return ld.set(`${t}.${e}`,i),i}function si(t,e){if(!Tt(t,{strict:!1}))throw new un({address:t});return Su(t,e)}const mI=/^0x[a-fA-F0-9]{40}$/,ud=new Iu(8192);function Tt(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(ud.has(r))return ud.get(r);const s=mI.test(t)?t.toLowerCase()===t?!0:n?Su(t)===t:!0:!1;return ud.set(r,s),s}function go(t){return typeof t[0]=="string"?ns(t):yI(t)}function yI(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function ns(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Da(t,e,n,{strict:r}={}){return Us(t,{strict:!1})?wI(t,e,n,{strict:r}):pb(t,e,n,{strict:r})}function hb(t,e){if(typeof e=="number"&&e>0&&e>ct(t)-1)throw new Z0({offset:e,position:"start",size:ct(t)})}function fb(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ct(t)!==n-e)throw new Z0({offset:n,position:"end",size:ct(t)})}function pb(t,e,n,{strict:r}={}){hb(t,e);const s=t.slice(e,n);return r&&fb(s,e,n),s}function wI(t,e,n,{strict:r}={}){hb(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&fb(s,e,n),s}const vz=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,bI=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function gb(t,e){if(t.length!==e.length)throw new NA({expectedLength:t.length,givenLength:e.length});const n=vI({params:t,values:e}),r=sp(n);return r.length===0?"0x":r}function vI({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(rp({param:t[r],value:e[r]}));return n}function rp({param:t,value:e}){const n=ip(t.type);if(n){const[r,s]=n;return CI(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return xI(e,{param:t});if(t.type==="address")return EI(e);if(t.type==="bool")return AI(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=bI.exec(t.type)??[];return II(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return _I(e,{param:t});if(t.type==="string")return SI(e);throw new RA(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function sp(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=ct(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(ee(e+s,{size:32})),r.push(a),s+=ct(a)):n.push(a)}return go([...n,...r])}function EI(t){if(!Tt(t))throw new un({address:t});return{dynamic:!1,encoded:xs(t.toLowerCase())}}function CI(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new $A(t);if(!r&&t.length!==e)throw new SA({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=rp({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=sp(i);if(r){const a=ee(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?go([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:go(i.map(({encoded:o})=>o))}}function _I(t,{param:e}){const[,n]=e.type.split("bytes"),r=ct(t);if(!n){let s=t;return r%32!==0&&(s=xs(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:go([xs(ee(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new xA({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:xs(t,{dir:"right"})}}function AI(t){if(typeof t!="boolean")throw new F(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:xs(eb(t))}}function II(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new X0({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:ee(t,{size:32,signed:e})}}function SI(t){const e=_u(t),n=Math.ceil(ct(e)/32),r=[];for(let s=0;s<n;s++)r.push(xs(Da(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:go([xs(ee(ct(e),{size:32})),...r])}}function xI(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=rp({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?sp(r):go(r.map(({encoded:s})=>s))}}function ip(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const op=t=>Da(db(t),0,4);function ap(t){const{abi:e,args:n=[],name:r}=t,s=Us(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?op(a)===r:a.type==="event"?np(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?kh(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=mb(a.inputs,o.inputs,n);if(l)throw new OA({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function kh(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Tt(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>kh(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>kh(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function mb(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return mb(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Tt(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Tt(n[r],{strict:!1}):!1)return o}}function NI(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}function xr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const Dg="/docs/contract/encodeFunctionData";function TI(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=ap({abi:e,args:n,name:r});if(!i)throw new Ll(r,{docsPath:Dg});s=i}if(s.type!=="function")throw new Ll(void 0,{docsPath:Dg});return{abi:[s],functionName:op(ks(s))}}function xu(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:TI(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?gb(s.inputs,e??[]):void 0;return ns([i,o??"0x"])}const PI={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},OI={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},RI={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class $g extends F{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class yb extends F{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class DI extends F{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const $I={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new DI({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new yb({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new $g({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new $g({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function cp(t,{recursiveReadLimit:e=8192}={}){const n=Object.create($I);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function kI(t,e={}){typeof e.size<"u"&&sr(t,{size:e.size});const n=Ht(t,e);return Yn(n,e)}function UI(t,e={}){let n=t;if(typeof e.size<"u"&&(sr(n,{size:e.size}),n=Zr(n)),n.length>1||n[0]>1)throw new BA(n);return!!n[0]}function Vr(t,e={}){typeof e.size<"u"&&sr(t,{size:e.size});const n=Ht(t,e);return Bs(n,e)}function BI(t,e={}){let n=t;return typeof e.size<"u"&&(sr(n,{size:e.size}),n=Zr(n,{dir:"right"})),new TextDecoder().decode(n)}function Nu(t,e){const n=typeof e=="string"?Cr(e):e,r=cp(n);if(ct(n)===0&&t.length>0)throw new Cu;if(ct(e)&&ct(e)<32)throw new V0({data:typeof e=="string"?e:Ht(e),params:t,size:ct(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=ao(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function ao(t,e,{staticPosition:n}){const r=ip(e.type);if(r){const[s,i]=r;return MI(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return qI(t,e,{staticPosition:n});if(e.type==="address")return LI(t);if(e.type==="bool")return FI(t);if(e.type.startsWith("bytes"))return jI(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return zI(t,e);if(e.type==="string")return HI(t,{staticPosition:n});throw new DA(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const kg=32,Uh=32;function LI(t){const e=t.readBytes(32);return[Su(Ht(pb(e,-20))),32]}function MI(t,e,{length:n,staticPosition:r}){if(!n){const o=Vr(t.readBytes(Uh)),a=r+o,c=a+kg;t.setPosition(a);const l=Vr(t.readBytes(kg)),u=$a(e);let d=0;const h=[];for(let g=0;g<l;++g){t.setPosition(c+(u?g*32:d));const[f,p]=ao(t,e,{staticPosition:c});d+=p,h.push(f)}return t.setPosition(r+32),[h,32]}if($a(e)){const o=Vr(t.readBytes(Uh)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=ao(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=ao(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function FI(t){return[UI(t.readBytes(32),{size:32}),32]}function jI(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Vr(t.readBytes(32));t.setPosition(n+o);const a=Vr(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ht(c),32]}return[Ht(t.readBytes(Number.parseInt(s),32)),32]}function zI(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?kI(s,{signed:n}):Vr(s,{signed:n}),32]}function qI(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if($a(e)){const o=Vr(t.readBytes(Uh)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=ao(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=ao(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function HI(t,{staticPosition:e}){const n=Vr(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Vr(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=BI(Zr(i));return t.setPosition(e+32),[o,32]}function $a(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some($a);const n=ip(t.type);return!!(n&&$a({...t,type:n[1]}))}function WI(t){const{abi:e,data:n}=t,r=Da(n,0,4);if(r==="0x")throw new Cu;const i=[...e||[],OI,RI].find(o=>o.type==="error"&&r===op(ks(o)));if(!i)throw new G0(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Nu(i.inputs,Da(n,4)):void 0,errorName:i.name}}const Dn=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function wb({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Dn(e[i]):e[i]}`).join(", ")})`}const VI={gwei:9,wei:18},GI={ether:-9,wei:9},KI={ether:-18,gwei:-9};function Io(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function lp(t,e="wei"){return Io(t,VI[e])}function cn(t,e="wei"){return Io(t,GI[e])}class YI extends F{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class ZI extends F{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Ug(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function JI(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Ug(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Ug(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Nc(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class XI extends F{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class QI extends F{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class e2 extends F{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Nc(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class t2 extends F{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class n2 extends F{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var f;const g=Nc({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${lp(h)} ${((f=s==null?void 0:s.nativeCurrency)==null?void 0:f.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${cn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${cn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${cn(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",g].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class bb extends F{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class vb extends F{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class r2 extends F{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const s2=t=>t,up=t=>t;class i2 extends F{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:g}){var m;const f=n?xr(n):void 0;let p=Nc({from:f==null?void 0:f.address,to:d,value:typeof h<"u"&&`${lp(h)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${cn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${cn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${cn(l)} gwei`,nonce:u});g&&(p+=`
${JI(g)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",p].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Eb extends F{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=ap({abi:n,args:r,name:o}),l=c?wb({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?ks(c,{includeName:!0}):void 0,d=Nc({address:s&&s2(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class o2 extends F{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=WI({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[g]=h;c=PI[g]}else{const g=u?ks(u,{includeName:!0}):void 0,f=u&&h?wb({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[g?`Error: ${g}`:"",f&&f!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${f}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof G0&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class a2 extends F{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class c2 extends F{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class dp extends F{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class pa extends F{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${up(o)}`,e&&`Request body: ${Dn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class hp extends F{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${up(r)}`,`Request body: ${Dn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Bg extends F{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${up(n)}`,`Request body: ${Dn(e)}`],name:"TimeoutError"})}}const l2=-1;class dn extends F{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof hp?e.code:n??l2}}class _n extends dn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class ka extends dn{constructor(e){super(e,{code:ka.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(ka,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ua extends dn{constructor(e){super(e,{code:Ua.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Ua,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Ba extends dn{constructor(e,{method:n}={}){super(e,{code:Ba.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Ba,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class La extends dn{constructor(e){super(e,{code:La.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(La,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class bi extends dn{constructor(e){super(e,{code:bi.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(bi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Ma extends dn{constructor(e){super(e,{code:Ma.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Ma,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Fa extends dn{constructor(e){super(e,{code:Fa.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Fa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Ns extends dn{constructor(e){super(e,{code:Ns.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Ns,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class mo extends dn{constructor(e){super(e,{code:mo.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(mo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ii extends dn{constructor(e,{method:n}={}){super(e,{code:ii.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(ii,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class yo extends dn{constructor(e){super(e,{code:yo.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(yo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class ja extends dn{constructor(e){super(e,{code:ja.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(ja,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ft extends _n{constructor(e){super(e,{code:ft.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(ft,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class za extends _n{constructor(e){super(e,{code:za.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(za,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class qa extends _n{constructor(e,{method:n}={}){super(e,{code:qa.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(qa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ha extends _n{constructor(e){super(e,{code:Ha.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ha,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Wa extends _n{constructor(e){super(e,{code:Wa.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Wa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class _r extends _n{constructor(e){super(e,{code:_r.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(_r,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Va extends _n{constructor(e){super(e,{code:Va.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Va,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Ga extends _n{constructor(e){super(e,{code:Ga.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Ga,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Ka extends _n{constructor(e){super(e,{code:Ka.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Ka,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Ya extends _n{constructor(e){super(e,{code:Ya.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Ya,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Za extends _n{constructor(e){super(e,{code:Za.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Za,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Ja extends _n{constructor(e){super(e,{code:Ja.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Ja,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Xa extends _n{constructor(e){super(e,{code:Xa.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Xa,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class u2 extends dn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const d2=3;function jl(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof dp?t:t instanceof F?t.walk(f=>"data"in f)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,g=t instanceof Cu?new a2({functionName:i}):[d2,bi.code].includes(c)&&(l||u||d||h)?new o2({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof hp?u:h??d}):t;return new Eb(g,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function h2(t){const e=xc(`0x${t.substring(4)}`).substring(26);return Su(`0x${e}`)}async function f2({hash:t,signature:e}){const n=Us(t)?t:Xn(t),{secp256k1:r}=await Lt(async()=>{const{secp256k1:o}=await import("./ccSB1loE.js");return{secp256k1:o}},__vite__mapDeps([0,1]),import.meta.url);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,g=Number(h??d),f=Lg(g);return new r.Signature(Yn(l),Yn(u)).addRecoveryBit(f)}const o=Us(e)?e:Xn(e);if(ct(o)!==65)throw new Error("invalid signature length");const a=Bs(`0x${o.slice(130)}`),c=Lg(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Lg(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function p2({hash:t,signature:e}){return h2(await f2({hash:t,signature:e}))}function Ls(t,e="hex"){const n=Cb(t),r=cp(new Uint8Array(n.length));return n.encode(r),e==="hex"?Ht(r.bytes):r.bytes}function Cb(t){return Array.isArray(t)?g2(t.map(e=>Cb(e))):m2(t)}function g2(t){const e=t.reduce((s,i)=>s+i.length,0),n=_b(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function m2(t){const e=typeof t=="string"?Cr(t):t,n=_b(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function _b(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new F("Length is too large.")}function y2(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=xc(ns(["0x05",Ls([e?ee(e):"0x",s,n?ee(n):"0x"])]));return r==="bytes"?Cr(i):i}async function Ab(t){const{authorization:e,signature:n}=t;return p2({hash:y2(e),signature:n??e})}class w2 extends F{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var f;const g=Nc({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${lp(h)} ${((f=s==null?void 0:s.nativeCurrency)==null?void 0:f.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${cn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${cn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${cn(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",g].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class oi extends F{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(oi,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(oi,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class vi extends F{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${cn(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(vi,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Bh extends F{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${cn(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Bh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Lh extends F{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Lh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Mh extends F{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Mh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Fh extends F{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Fh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class jh extends F{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(jh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class zh extends F{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(zh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class qh extends F{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(qh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Hh extends F{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Hh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Qa extends F{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${cn(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${cn(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Qa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Tu extends F{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function fp(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof F?t.walk(s=>(s==null?void 0:s.code)===oi.code):t;return r instanceof F?new oi({cause:t,message:r.details}):oi.nodeMessage.test(n)?new oi({cause:t,message:t.details}):vi.nodeMessage.test(n)?new vi({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Bh.nodeMessage.test(n)?new Bh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Lh.nodeMessage.test(n)?new Lh({cause:t,nonce:e==null?void 0:e.nonce}):Mh.nodeMessage.test(n)?new Mh({cause:t,nonce:e==null?void 0:e.nonce}):Fh.nodeMessage.test(n)?new Fh({cause:t,nonce:e==null?void 0:e.nonce}):jh.nodeMessage.test(n)?new jh({cause:t}):zh.nodeMessage.test(n)?new zh({cause:t,gas:e==null?void 0:e.gas}):qh.nodeMessage.test(n)?new qh({cause:t,gas:e==null?void 0:e.gas}):Hh.nodeMessage.test(n)?new Hh({cause:t}):Qa.nodeMessage.test(n)?new Qa({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Tu({cause:t})}function b2(t,{docsPath:e,...n}){const r=(()=>{const s=fp(t,n);return s instanceof Tu?t:s})();return new w2(r,{docsPath:e,...n})}function pp(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}function gp(t,e){return({exclude:n,format:r})=>({exclude:n,format:s=>{const i=e(s);if(n)for(const o of n)delete i[o];return{...i,...r(s)}},type:t})}const v2={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function mp(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=E2(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Ht(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=ee(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=ee(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=ee(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=ee(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=ee(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=ee(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=v2[t.type]),typeof t.value<"u"&&(e.value=ee(t.value)),e}function E2(t){return t.map(e=>({address:e.address,r:e.r?ee(BigInt(e.r)):e.r,s:e.s?ee(BigInt(e.s)):e.s,chainId:ee(e.chainId),nonce:ee(e.nonce),...typeof e.yParity<"u"?{yParity:ee(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:ee(e.v)}:{}}))}function Mg(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new Sg({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Sg({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function C2(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=ee(e)),n!==void 0&&(o.nonce=ee(n)),r!==void 0&&(o.state=Mg(r)),s!==void 0){if(o.state)throw new ZI;o.stateDiff=Mg(s)}return o}function Ib(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Tt(n,{strict:!1}))throw new un({address:n});if(e[n])throw new YI({address:n});e[n]=C2(r)}return e}const Pu=2n**256n-1n;function Ou(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?xr(e):void 0;if(o&&!Tt(o.address))throw new un({address:o.address});if(i&&!Tt(i))throw new un({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new XI;if(r&&r>Pu)throw new vi({maxFeePerGas:r});if(s&&r&&s>r)throw new Qa({maxFeePerGas:r,maxPriorityFeePerGas:s})}class _2 extends F{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class yp extends F{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class A2 extends F{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${cn(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Sb extends F{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const xb={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Ru(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Bs(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Bs(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?xb[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=S2(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const I2=gp("transaction",Ru);function S2(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Nb(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Ru(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const x2=gp("block",Nb);async function ec(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?ee(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new Sb({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||Nb)(c)}async function Tb(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function N2(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await et(t,ec,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Yn(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):et(t,ec,"getBlock")({}),et(t,Tb,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new yp;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Fg(t,e){var h,g;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var f,p;return typeof((f=r==null?void 0:r.fees)==null?void 0:f.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)??1.2})();if(o<1)throw new _2;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=f=>f*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await et(t,ec,"getBlock")({});if(typeof((g=r==null?void 0:r.fees)==null?void 0:g.estimateFeesPerGas)=="function"){const f=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(f!==null)return f}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new yp;const f=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await N2(t,{block:u,chain:r,request:s}),p=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??p+f,maxPriorityFeePerGas:f}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await et(t,Tb,"getGasPrice")({}))}}async function T2(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?ee(r):n]},{dedupe:!!r});return Bs(s)}function wp(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Cr(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ht(i))}function bp(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Cr(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Cr(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ht(o))}function P2(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function O2(t,e,n){return t&e^~t&n}function R2(t,e,n){return t&e^t&n^e&n}class D2 extends sb{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=cd(this.buffer)}update(e){Fl(this),e=ep(e),wi(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=cd(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fl(this),nb(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ra(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;P2(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=cd(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const is=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$2=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),os=new Uint32Array(64);class k2 extends D2{constructor(e=32){super(64,e,8,!1),this.A=is[0]|0,this.B=is[1]|0,this.C=is[2]|0,this.D=is[3]|0,this.E=is[4]|0,this.F=is[5]|0,this.G=is[6]|0,this.H=is[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)os[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=os[d-15],g=os[d-2],f=ar(h,7)^ar(h,18)^h>>>3,p=ar(g,17)^ar(g,19)^g>>>10;os[d]=p+os[d-7]+f+os[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ar(a,6)^ar(a,11)^ar(a,25),g=u+h+O2(a,c,l)+$2[d]+os[d]|0,p=(ar(r,2)^ar(r,13)^ar(r,22))+R2(r,s,i)|0;u=l,l=c,c=a,a=o+g|0,o=i,i=s,s=r,r=g+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ra(os)}destroy(){this.set(0,0,0,0,0,0,0,0),Ra(this.buffer)}}const U2=ib(()=>new k2),B2=U2;function L2(t,e){return B2(Us(t,{strict:!1})?Au(t):t)}function M2(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=L2(e);return s.set([n],0),r==="bytes"?s:Ht(s)}function Pb(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(M2({commitment:i,to:r,version:n}));return s}const jg=6,Ob=32,vp=4096,Rb=Ob*vp,zg=Rb*jg-1-1*vp*jg,Db=1;class F2 extends F{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class $b extends F{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class j2 extends F{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class z2 extends F{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${Db}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function q2(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?Cr(t.data):t.data,r=ct(n);if(!r)throw new $b;if(r>zg)throw new F2({maxSize:zg,size:r});const s=[];let i=!0,o=0;for(;i;){const a=cp(new Uint8Array(Rb));let c=0;for(;c<vp;){const l=n.slice(o,o+(Ob-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>Ht(a.bytes))}function kb(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??q2({data:e,to:r}),i=t.commitments??wp({blobs:s,kzg:n,to:r}),o=t.proofs??bp({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Ub(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new e2({transaction:t})}async function Bb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Bs(e)}const Lb=["blobVersionedHashes","chainId","fees","gas","nonce","type"],qg=new Map;async function Ep(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=Lb,type:u}=e,d=n&&xr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let g;async function f(){return g||(g=await et(t,ec,"getBlock")({blockTag:"latest"}),g)}let p;async function m(){return p||(s?s.id:typeof e.chainId<"u"?e.chainId:(p=await et(t,Bb,"getChainId")({}),p))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const b=await m();h.nonce=await c.consume({address:d.address,chainId:b,client:t})}else h.nonce=await et(t,T2,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const b=wp({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const C=Pb({commitments:b,to:"hex"});h.blobVersionedHashes=C}if(l.includes("sidecars")){const C=bp({blobs:r,commitments:b,kzg:o}),y=kb({blobs:r,commitments:b,proofs:C,to:"hex"});h.sidecars=y}}if(l.includes("chainId")&&(h.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Ub(h)}catch{let b=qg.get(t.uid);if(typeof b>"u"){const C=await f();b=typeof(C==null?void 0:C.baseFeePerGas)=="bigint",qg.set(t.uid,b)}h.type=b?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const b=await f(),{maxFeePerGas:C,maxPriorityFeePerGas:y}=await Fg(t,{block:b,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<y)throw new A2({maxPriorityFeePerGas:y});h.maxPriorityFeePerGas=y,h.maxFeePerGas=C}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new yp;if(typeof e.gasPrice>"u"){const b=await f(),{gasPrice:C}=await Fg(t,{block:b,chain:s,request:h,type:"legacy"});h.gasPrice=C}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await et(t,Fb,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Ou(h),delete h.parameters,h}async function Mb(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?ee(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Fb(t,e){var s,i,o;const{account:n=t.account}=e,r=n?xr(n):void 0;try{let L=function(S){const{block:R,request:U,rpcStateOverride:D}=S;return t.request({method:"eth_estimateGas",params:D?[U,R??"latest",D]:R?[U,R]:[U]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:g,gas:f,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:C,nonce:y,value:E,stateOverride:w,...v}=await Ep(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?ee(d):void 0)||h,x=Ib(w),O=await(async()=>{if(v.to)return v.to;if(c&&c.length>0)return await Ab({authorization:c[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`")})})();Ou(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,B=(P||mp)({...pp(v,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:g,gas:f,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:C,nonce:y,to:O,value:E});let I=BigInt(await L({block:N,request:B,rpcStateOverride:x}));if(c){const S=await Mb(t,{address:B.from}),R=await Promise.all(c.map(async U=>{const{address:D}=U,$=await L({block:N,request:{authorizationList:void 0,data:g,from:r==null?void 0:r.address,to:D,value:ee(S)},rpcStateOverride:x}).catch(()=>100000n);return 2n*BigInt($)}));I+=R.reduce((U,D)=>U+D,0n)}return I}catch(a){throw b2(a,{...e,account:r,chain:t.chain})}}function H2(t,e){if(!Tt(t,{strict:!1}))throw new un({address:t});if(!Tt(e,{strict:!1}))throw new un({address:e});return t.toLowerCase()===e.toLowerCase()}const Hg="/docs/contract/decodeEventLog";function W2(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new TA({docsPath:Hg});const c=e.find(p=>p.type==="event"&&o===np(ks(p)));if(!(c&&"name"in c)||c.type!=="event")throw new K0(o,{docsPath:Hg});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(p=>!("name"in p&&p.name)),h=d?[]:{},g=u.map((p,m)=>[p,m]).filter(([p])=>"indexed"in p&&p.indexed);for(let p=0;p<g.length;p++){const[m,b]=g[p],C=a[p];if(!C)throw new Y0({abiItem:c,param:m});h[d?b:m.name||b]=V2({param:m,value:C})}const f=u.filter(p=>!("indexed"in p&&p.indexed));if(f.length>0){if(n&&n!=="0x")try{const p=Nu(f,n);if(p)if(d)for(let m=0;m<u.length;m++)h[m]=h[m]??p.shift();else for(let m=0;m<f.length;m++)h[f[m].name]=p[m]}catch(p){if(i)throw p instanceof V0||p instanceof yb?new $h({abiItem:c,data:n,params:f,size:ct(n)}):p}else if(i)throw new $h({abiItem:c,data:"0x",params:f,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function V2({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Nu([t],e)||[])[0]}function G2(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===np(u));if(!c)return null;const l=W2({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!K2({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof K0)return null;if(c instanceof $h||c instanceof Y0){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function K2(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?H2(o,a):i.type==="string"||i.type==="bytes"?xc(Au(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function jb(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}const dd="/docs/contract/decodeFunctionResult";function Cp(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=ap({abi:e,args:n,name:r});if(!a)throw new Ll(r,{docsPath:dd});i=a}if(i.type!=="function")throw new Ll(void 0,{docsPath:dd});if(!i.outputs)throw new PA(i.name,{docsPath:dd});const o=Nu(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const Y2="0.1.1";function Z2(){return Y2}let zb=class Wh extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Wh){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Wh&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Z2()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return qb(this,e)}};function qb(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?qb(t.cause,e):e?null:t}function J2(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new eS({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function jr(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Q2({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?X2(c,r):c}function X2(t,e){return J2(t,{dir:"left",size:e})}let Q2=class extends zb{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},eS=class extends zb{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function tS(t){return{address:t.address,amount:jr(t.amount),index:jr(t.index),validatorIndex:jr(t.validatorIndex)}}function nS(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:jr(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:jr(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:jr(t.gasLimit)},...typeof t.number=="bigint"&&{number:jr(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:jr(t.prevRandao)},...typeof t.time=="bigint"&&{time:jr(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(tS)}}}const Vh=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],_z=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],rS="0x82ad56cb",sS="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",iS="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";class Gh extends F{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class oS extends F{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class aS extends F{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Hb extends F{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Du extends F{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const hd="/docs/contract/encodeDeployData";function Wb(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new IA({docsPath:hd});if(!("inputs"in s))throw new Ig({docsPath:hd});if(!s.inputs||s.inputs.length===0)throw new Ig({docsPath:hd});const i=gb(s.inputs,n);return ns([r,i])}function Vb({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new Gh({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new Gh({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function cS(t,{docsPath:e,...n}){const r=(()=>{const s=fp(t,n);return s instanceof Tu?t:s})();return new i2(r,{docsPath:e,...n})}function Gb(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const fd=new Map;function Kb({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let g=0;g<u.length;g++){const{resolve:f}=u[g];f==null||f([h[g],h])}}).catch(h=>{for(let g=0;g<u.length;g++){const{reject:f}=u[g];f==null||f(h)}})},o=()=>fd.delete(e),a=()=>c().map(({args:u})=>u),c=()=>fd.get(e)||[],l=u=>fd.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:g}=Gb();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:g}),d):(l({args:u,resolve:h,reject:g}),setTimeout(i,r),d)}}}async function Yb(t,e){var B,L,I,S;const{account:n=t.account,authorizationList:r,batch:s=!!((B=t.batch)!=null&&B.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:g,gas:f,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:C,nonce:y,to:E,value:w,stateOverride:v,..._}=e,N=n?xr(n):void 0;if(u&&(h||g))throw new F("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new F("Cannot provide both `code` & `to` as parameters.");const x=u&&d,O=h&&g&&E&&d,P=x||O,k=x?dS({code:u,data:d}):O?hS({data:d,factory:h,factoryData:g,to:E}):d;try{Ou(e);const U=(typeof i=="bigint"?ee(i):void 0)||o,D=l?nS(l):void 0,$=Ib(v),q=(S=(I=(L=t.chain)==null?void 0:L.formatters)==null?void 0:I.transactionRequest)==null?void 0:S.format,oe=(q||mp)({...pp(_,{format:q}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:k,gas:f,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:C,nonce:y,to:P?void 0:E,value:w});if(s&&lS({request:oe})&&!$&&!D)try{return await uS(t,{...oe,blockNumber:i,blockTag:o})}catch(he){if(!(he instanceof Hb)&&!(he instanceof Gh))throw he}const J=(()=>{const he=[oe,U];return $&&D?[...he,$,D]:$?[...he,$]:D?[...he,{},D]:he})(),le=await t.request({method:"eth_call",params:J});return le==="0x"?{data:void 0}:{data:le}}catch(R){const U=fS(R),{offchainLookup:D,offchainLookupSignature:$}=await Lt(async()=>{const{offchainLookup:q,offchainLookupSignature:Z}=await import("./BoHMvcgQ.js");return{offchainLookup:q,offchainLookupSignature:Z}},[],import.meta.url);if(t.ccipRead!==!1&&(U==null?void 0:U.slice(0,10))===$&&E)return{data:await D(t,{data:U,to:E})};throw P&&(U==null?void 0:U.slice(0,10))==="0x101bb98d"?new c2({factory:h}):cS(R,{...e,account:N,chain:t.chain})}}function lS({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(rS)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function uS(t,e){var p;const{batchSize:n=1024,wait:r=0}=typeof((p=t.batch)==null?void 0:p.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new Hb;l=Vb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?ee(s):void 0)||i,{schedule:h}=Kb({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(m){return m.reduce((C,{data:y})=>C+(y.length-2),0)>n*2},fn:async m=>{const b=m.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),C=xu({abi:Vh,args:[b],functionName:"aggregate3"}),y=await t.request({method:"eth_call",params:[{data:C,to:l},d]});return Cp({abi:Vh,args:[b],functionName:"aggregate3",data:y||"0x"})}}),[{returnData:g,success:f}]=await h({data:o,to:c});if(!f)throw new dp({data:g});return g==="0x"?{data:void 0}:{data:g}}function dS(t){const{code:e,data:n}=t;return Wb({abi:q0(["constructor(bytes, bytes)"]),bytecode:sS,args:[e,n]})}function hS(t){const{data:e,factory:n,factoryData:r,to:s}=t;return Wb({abi:q0(["constructor(address, bytes, address, bytes)"]),bytecode:iS,args:[s,e,n,r]})}function fS(t){var n;if(!(t instanceof F))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Zb(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=xu({abi:n,args:s,functionName:i});try{const{data:c}=await et(t,Yb,"call")({...o,data:a,to:r});return Cp({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw jl(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}const pd=new Map,Wg=new Map;let pS=0;function zl(t,e,n){const r=++pS,s=()=>pd.get(t)||[],i=()=>{const u=s();pd.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=Wg.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(pd.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var g,f;const h=s();if(h.length!==0)for(const p of h)(f=(g=p.fns)[u])==null||f.call(g,...d)};const l=n(c);return typeof l=="function"&&Wg.set(t,l),o}async function ql(t){return new Promise(e=>setTimeout(e,t))}function Jb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await ql(c);const l=async()=>{s&&(await t({unpoll:i}),await ql(r),l())};l()})(),i}const gS=new Map,mS=new Map;function yS(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,gS),r=e(t,mS);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function wS(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=yS(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const bS=t=>`blockNumber.${t}`;async function vS(t,{cacheTime:e=t.cacheTime}={}){const n=await wS(()=>t.request({method:"eth_blockNumber"}),{cacheKey:bS(t.uid),cacheTime:e});return BigInt(n)}async function ES(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>jb(i));return!("abi"in e)||!e.abi?s:G2({abi:e.abi,logs:s,strict:n})}async function CS(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class _p extends F{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class gd extends F{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function _S({chain:t,currentChainId:e}){if(!t)throw new aS;if(e!==t.id)throw new oS({chain:t,currentChainId:e})}function AS(t,{docsPath:e,...n}){const r=(()=>{const s=fp(t,n);return s instanceof Tu?t:s})();return new n2(r,{docsPath:e,...n})}async function IS(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const md=new Iu(128);async function Xb(t,e){var C,y,E,w;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:g,type:f,value:p,...m}=e;if(typeof n>"u")throw new _p({docsPath:"/docs/actions/wallet/sendTransaction"});const b=n?xr(n):null;try{Ou(e);const v=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Ab({authorization:i[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`.")})})();if((b==null?void 0:b.type)==="json-rpc"||b===null){let _;r!==null&&(_=await et(t,Bb,"getChainId")({}),_S({currentChainId:_,chain:r}));const N=(E=(y=(C=t.chain)==null?void 0:C.formatters)==null?void 0:y.transactionRequest)==null?void 0:E.format,O=(N||mp)({...pp(m,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:_,data:a,from:b==null?void 0:b.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:g,to:v,type:f,value:p}),P=md.get(t.uid),k=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:k,params:[O]},{retryCount:0})}catch(B){if(P===!1)throw B;const L=B;if(L.name==="InvalidInputRpcError"||L.name==="InvalidParamsRpcError"||L.name==="MethodNotFoundRpcError"||L.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(I=>(md.set(t.uid,!0),I)).catch(I=>{const S=I;throw S.name==="MethodNotFoundRpcError"||S.name==="MethodNotSupportedRpcError"?(md.set(t.uid,!1),L):S});throw L}}if((b==null?void 0:b.type)==="local"){const _=await et(t,Ep,"prepareTransactionRequest")({account:b,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:g,nonceManager:b.nonceManager,parameters:[...Lb,"sidecars"],type:f,value:p,...m,to:v}),N=(w=r==null?void 0:r.serializers)==null?void 0:w.transaction,x=await b.signTransaction(_,{serializer:N});return await et(t,IS,"sendRawTransaction")({serializedTransaction:x})}throw(b==null?void 0:b.type)==="smart"?new gd({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new gd({docsPath:"/docs/actions/wallet/sendTransaction",type:b==null?void 0:b.type})}catch(v){throw v instanceof gd?v:AS(v,{...e,account:b,chain:e.chain||void 0})}}async function SS(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new _p({docsPath:"/docs/contract/writeContract"});const l=r?xr(r):null,u=xu({abi:n,args:i,functionName:a});try{return await et(t,Xb,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw jl(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}const xS={"0x0":"reverted","0x1":"success"};function Qb(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>jb(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Bs(t.transactionIndex):null,status:t.status?xS[t.status]:null,type:t.type?xb[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const NS=gp("transactionReceipt",Qb),Kh=256;let Jc=Kh,Xc;function ev(t=11){if(!Xc||Jc+t>Kh*2){Xc="",Jc=0;for(let e=0;e<Kh;e++)Xc+=(256+Math.random()*256|0).toString(16).substring(1)}return Xc.substring(Jc,Jc+++t)}function tv(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?xr(t.account):void 0,{config:h,request:g,value:f}=t.transport({chain:n,pollingInterval:l}),p={...h,...f},m={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:g,transport:p,type:o,uid:ev()};function b(C){return y=>{const E=y(C);for(const v in m)delete E[v];const w={...C,...E};return Object.assign(w,{extend:b(w)})}}return Object.assign(m,{extend:b(m)})}const Qc=new Iu(8192);function TS(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Qc.get(n))return Qc.get(n);const r=t().finally(()=>Qc.delete(n));return Qc.set(n,r),r}function Hl(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await ql(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function PS(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new ii(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new ii(new Error("method not supported"),{method:l});const u=s?_u(`${c}.${Dn(n)}`):void 0;return TS(()=>Hl(async()=>{try{return await t(n)}catch(h){const g=h;switch(g.code){case ka.code:throw new ka(g);case Ua.code:throw new Ua(g);case Ba.code:throw new Ba(g,{method:n.method});case La.code:throw new La(g);case bi.code:throw new bi(g);case Ma.code:throw new Ma(g);case Fa.code:throw new Fa(g);case Ns.code:throw new Ns(g);case mo.code:throw new mo(g);case ii.code:throw new ii(g,{method:n.method});case yo.code:throw new yo(g);case ja.code:throw new ja(g);case ft.code:throw new ft(g);case za.code:throw new za(g);case qa.code:throw new qa(g);case Ha.code:throw new Ha(g);case Wa.code:throw new Wa(g);case _r.code:throw new _r(g);case Va.code:throw new Va(g);case Ga.code:throw new Ga(g);case Ka.code:throw new Ka(g);case Ya.code:throw new Ya(g);case Za.code:throw new Za(g);case Ja.code:throw new Ja(g);case Xa.code:throw new Xa(g);case 5e3:throw new ft(g);default:throw h instanceof F?h:new u2(g)}}},{delay:({count:h,error:g})=>{var f;if(g&&g instanceof pa){const p=(f=g==null?void 0:g.headers)==null?void 0:f.get("Retry-After");if(p!=null&&p.match(/\d/))return Number.parseInt(p)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>OS(h)}),{enabled:s,id:u})}}function OS(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===yo.code||t.code===bi.code:t instanceof pa&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Ap({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=ev();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:PS(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function RS(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>Ap({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Vg(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=DS,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,g=()=>{};const f=Ap({key:n,name:r,async request({method:p,params:m}){let b;const C=async(y=0)=>{const E=h[y]({...d,chain:c,retryCount:0,timeout:u});try{const w=await E.request({method:p,params:m});return g({method:p,params:m,response:w,transport:E,status:"success"}),w}catch(w){if(g({error:w,method:p,params:m,transport:E,status:"error"}),i(w)||y===h.length-1||(b??(b=h.slice(y+1).some(v=>{const{include:_,exclude:N}=v({chain:c}).config.methods||{};return _?_.includes(p):N?!N.includes(p):!0})),!b))throw w;return C(y+1)}};return C()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:p=>g=p,transports:h.map(p=>p({chain:c,retryCount:0}))});if(s){const p=typeof s=="object"?s:{};$S({chain:c,interval:p.interval??l,onTransports:m=>h=m,ping:p.ping,sampleCount:p.sampleCount,timeout:p.timeout,transports:h,weights:p.weights})}return f}}function DS(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===mo.code||t.code===ft.code||oi.nodeMessage.test(t.message)||t.code===5e3))}function $S({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async p=>{const m=p({chain:t,retryCount:0,timeout:i}),b=Date.now();let C,y;try{await(r?r({transport:m}):m.request({method:"net_listening"})),y=1}catch{y=0}finally{C=Date.now()}return{latency:C-b,success:y}}));u.push(h),u.length>s&&u.shift();const g=Math.max(...u.map(p=>Math.max(...p.map(({latency:m})=>m)))),f=o.map((p,m)=>{const b=u.map(v=>v[m].latency),y=1-b.reduce((v,_)=>v+_,0)/b.length/g,E=u.map(v=>v[m].success),w=E.reduce((v,_)=>v+_,0)/E.length;return w===0?[0,m]:[l*y+c*w,m]}).sort((p,m)=>m[0]-p[0]);n(f.map(([,p])=>o[p])),await ql(e),d()};d()}class kS extends F{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function nv(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function US(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Gg=US();function BS(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await nv(async({signal:f})=>{const p={...a,body:Array.isArray(r)?Dn(r.map(y=>({jsonrpc:"2.0",id:y.id??Gg.take(),...y}))):Dn({jsonrpc:"2.0",id:r.id??Gg.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?f:null)},m=new Request(t,p),b=await(s==null?void 0:s(m,p))??{...p,url:t};return await fetch(b.url??t,b)},{errorInstance:new Bg({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let g;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))g=await h.json();else{g=await h.text();try{g=JSON.parse(g||"{}")}catch(f){if(h.ok)throw f;g={error:g}}}if(!h.ok)throw new pa({body:r,details:Dn(g.error)||h.statusText,headers:h.headers,status:h.status,url:t});return g}catch(h){throw h instanceof pa||h instanceof Bg?h:new pa({body:r,cause:h,url:t})}}}}function el(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:g})=>{const{batchSize:f=1e3,wait:p=0}=typeof n=="object"?n:{},m=e.retryCount??h,b=g??e.timeout??1e4,C=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!C)throw new kS;const y=BS(C,{fetchOptions:r,onRequest:a,onResponse:c,timeout:b});return Ap({key:s,methods:i,name:o,async request({method:E,params:w}){const v={method:E,params:w},{schedule:_}=Kb({id:C,wait:p,shouldSplitBatch(P){return P.length>f},fn:P=>y.request({body:P}),sort:(P,k)=>P.id-k.id}),N=async P=>n?_(P):[await y.request({body:P})],[{error:x,result:O}]=await N(v);if(u)return{error:x,result:O};if(x)throw new hp({body:v,error:x,url:C});return O},retryCount:m,retryDelay:l,timeout:b,type:"http"},{fetchOptions:r,url:C})}}async function LS(t){const e=NI(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}function ir(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function MS(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!Tt(s))throw new un({address:s});if(r<0)throw new Du({chainId:r})}Ip(t)}function FS(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new $b;for(const n of e){const r=ct(n),s=Bs(Da(n,0,1));if(r!==32)throw new j2({hash:n,size:r});if(s!==Db)throw new z2({hash:n,version:s})}}Ip(t)}function Ip(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new Du({chainId:e});if(s&&!Tt(s))throw new un({address:s});if(r&&r>Pu)throw new vi({maxFeePerGas:r});if(n&&r&&n>r)throw new Qa({maxFeePerGas:r,maxPriorityFeePerGas:n})}function jS(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new Du({chainId:e});if(i&&!Tt(i))throw new un({address:i});if(n||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Pu)throw new vi({maxFeePerGas:r})}function zS(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!Tt(i))throw new un({address:i});if(typeof e<"u"&&e<=0)throw new Du({chainId:e});if(n||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Pu)throw new vi({maxFeePerGas:r})}function $u(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new t2({storageKey:s[i]});if(!Tt(r,{strict:!1}))throw new un({address:r});e.push([r,s])}return e}function qS(t,e){const n=Ub(t);return n==="eip1559"?VS(t,e):n==="eip2930"?GS(t,e):n==="eip4844"?WS(t,e):n==="eip7702"?HS(t,e):KS(t,e)}function HS(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;MS(t);const h=$u(u),g=YS(n);return ns(["0x04",Ls([ee(r),i?ee(i):"0x",l?ee(l):"0x",c?ee(c):"0x",s?ee(s):"0x",o??"0x",a?ee(a):"0x",d??"0x",h,g,...Tc(t,e)])])}function WS(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;FS(t);let h=t.blobVersionedHashes,g=t.sidecars;if(t.blobs&&(typeof h>"u"||typeof g>"u")){const y=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(v=>Ht(v)),E=t.kzg,w=wp({blobs:y,kzg:E});if(typeof h>"u"&&(h=Pb({commitments:w})),typeof g>"u"){const v=bp({blobs:y,commitments:w,kzg:E});g=kb({blobs:y,commitments:w,proofs:v})}}const f=$u(u),p=[ee(n),s?ee(s):"0x",l?ee(l):"0x",c?ee(c):"0x",r?ee(r):"0x",i??"0x",o?ee(o):"0x",d??"0x",f,a?ee(a):"0x",h??[],...Tc(t,e)],m=[],b=[],C=[];if(g)for(let y=0;y<g.length;y++){const{blob:E,commitment:w,proof:v}=g[y];m.push(E),b.push(w),C.push(v)}return ns(["0x03",Ls(g?[p,m,b,C]:p)])}function VS(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=t;Ip(t);const d=$u(l),h=[ee(n),s?ee(s):"0x",c?ee(c):"0x",a?ee(a):"0x",r?ee(r):"0x",i??"0x",o?ee(o):"0x",u??"0x",d,...Tc(t,e)];return ns(["0x02",Ls(h)])}function GS(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:l}=t;jS(t);const u=$u(c),d=[ee(n),i?ee(i):"0x",l?ee(l):"0x",r?ee(r):"0x",o??"0x",a?ee(a):"0x",s??"0x",u,...Tc(t,e)];return ns(["0x01",Ls(d)])}function KS(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;zS(t);let l=[i?ee(i):"0x",c?ee(c):"0x",r?ee(r):"0x",o??"0x",a?ee(a):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const g=27n+(e.v===27n?0n:1n);if(e.v!==g)throw new QI({v:e.v});return g})(),d=Zr(e.r),h=Zr(e.s);l=[...l,ee(u),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else n>0&&(l=[...l,ee(n),"0x","0x"]);return Ls(l)}function Tc(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=Zr(n.r),o=Zr(n.s);return[typeof s=="number"?s?ee(1):"0x":r===0n?"0x":r===1n?ee(1):r===27n?"0x":ee(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function YS(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,o=n.address;e.push([r?Xn(r):"0x",o,s?Xn(s):"0x",...Tc({},i)])}return e}class ZS extends F{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function JS(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new ZS({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}async function rv(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?ee(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,ee(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,ee(i)]},{dedupe:!!a}),!c)throw new bb({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Ru)(c)}async function Kg(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new vb({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Qb)(n)}async function XS(t,e){var b;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((b=t.batch)==null?void 0:b.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Vb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let g=0,f=0;for(let C=0;C<l.length;C++){const{abi:y,address:E,args:w,functionName:v}=l[C];try{const _=xu({abi:y,args:w,functionName:v});f+=(_.length-2)/2,u>0&&f>u&&h[g].length>0&&(g++,f=(_.length-2)/2,h[g]=[]),h[g]=[...h[g],{allowFailure:!0,callData:_,target:E}]}catch(_){const N=jl(_,{abi:y,address:E,args:w,docsPath:"/docs/contract/multicall",functionName:v,sender:n});if(!r)throw N;h[g]=[...h[g],{allowFailure:!0,callData:"0x",target:E}]}}const p=await Promise.allSettled(h.map(C=>et(t,Zb,"readContract")({abi:Vh,account:n,address:d,args:[C],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),m=[];for(let C=0;C<p.length;C++){const y=p[C];if(y.status==="rejected"){if(!r)throw y.reason;for(let w=0;w<h[C].length;w++)m.push({status:"failure",error:y.reason,result:void 0});continue}const E=y.value;for(let w=0;w<E.length;w++){const{returnData:v,success:_}=E[w],{callData:N}=h[C][w],{abi:x,address:O,functionName:P,args:k}=l[m.length];try{if(N==="0x")throw new Cu;if(!_)throw new dp({data:v});const B=Cp({abi:x,args:k,data:v,functionName:P});m.push(r?{result:B,status:"success"}:B)}catch(B){const L=jl(B,{abi:x,address:O,args:k,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw L;m.push({error:L,result:void 0,status:"failure"})}}}if(m.length!==l.length)throw new F("multicall results mismatch");return m}function QS(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket");let c;return a?(()=>{const d=Dn(["watchBlockNumber",t.uid,e,n,o]);return zl(d,{onBlockNumber:r,onError:s},h=>Jb(async()=>{var g;try{const f=await et(t,vS,"getBlockNumber")({cacheTime:0});if(c){if(f===c)return;if(f-c>1&&n)for(let p=c+1n;p<f;p++)h.onBlockNumber(p,c),c=p}(!c||f>c)&&(h.onBlockNumber(f,c),c=f)}catch(f){(g=h.onError)==null||g.call(h,f)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Dn(["watchBlockNumber",t.uid,e,n]);return zl(d,{onBlockNumber:r,onError:s},h=>{let g=!0,f=()=>g=!1;return(async()=>{try{const p=(()=>{if(t.transport.type==="fallback"){const b=t.transport.transports.find(C=>C.config.type==="webSocket");return b?b.value:t.transport}return t.transport})(),{unsubscribe:m}=await p.subscribe({params:["newHeads"],onData(b){var y;if(!g)return;const C=Yn((y=b.result)==null?void 0:y.number);h.onBlockNumber(C,c),c=C},onError(b){var C;(C=h.onError)==null||C.call(h,b)}});f=m,g||f()}catch(p){s==null||s(p)}})(),()=>f()})})()}async function ex(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Dn(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,g,f;const{promise:p,resolve:m,reject:b}=Gb(),C=a?setTimeout(()=>{f(),g(),b(new r2({hash:n}))},a):void 0;return g=zl(c,{onReplaced:r,resolve:m,reject:b},y=>{f=et(t,QS,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(E){const w=_=>{clearTimeout(C),f(),_(),g()};let v=E;if(!h)try{if(d){if(e>1&&(!d.blockNumber||v-d.blockNumber+1n<e))return;w(()=>y.resolve(d));return}if(l||(h=!0,await Hl(async()=>{l=await et(t,rv,"getTransaction")({hash:n}),l.blockNumber&&(v=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await et(t,Kg,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||v-d.blockNumber+1n<e))return;w(()=>y.resolve(d))}catch(_){if(_ instanceof bb||_ instanceof vb){if(!l){h=!1;return}try{u=l,h=!0;const N=await Hl(()=>et(t,ec,"getBlock")({blockNumber:v,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof Sb});h=!1;const x=N.transactions.find(({from:P,nonce:k})=>P===u.from&&k===u.nonce);if(!x||(d=await et(t,Kg,"getTransactionReceipt")({hash:x.hash}),e>1&&(!d.blockNumber||v-d.blockNumber+1n<e)))return;let O="replaced";x.to===u.to&&x.value===u.value&&x.input===u.input?O="repriced":x.from===x.to&&x.value===0n&&(O="cancelled"),w(()=>{var P;(P=y.onReplaced)==null||P.call(y,{reason:O,replacedTransaction:u,transaction:x,transactionReceipt:d}),y.resolve(d)})}catch(N){w(()=>y.reject(N))}}else w(()=>y.reject(_))}}})}),p}function tx(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket")?(()=>{const l=Dn(["watchPendingTransactions",t.uid,e,i]);return zl(l,{onTransactions:r,onError:n},u=>{let d;const h=Jb(async()=>{var g;try{if(!d)try{d=await et(t,LS,"createPendingTransactionFilter")({});return}catch(p){throw h(),p}const f=await et(t,ES,"getFilterChanges")({filter:d});if(f.length===0)return;if(e)u.onTransactions(f);else for(const p of f)u.onTransactions([p])}catch(f){(g=u.onError)==null||g.call(u,f)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await et(t,CS,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const g=h.result;r([g])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function nx(t,{account:e=t.account,message:n}){if(!e)throw new _p({docsPath:"/docs/actions/wallet/signMessage"});const r=xr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?_u(n):n.raw instanceof Uint8Array?Xn(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}const yd={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Io(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},Sp={async getMyTokensWithBalance(t){const e=K.state.address,n=T.state.activeCaipNetwork,r=Y.getConnectorId("eip155")===M.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=G.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await pe.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=yd.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await se.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await se.walletGetAssets({account:t,chainFilter:[s]});if(!yd.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>yd.createBalance(l,e.caipNetworkId));return G.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},In=Ze({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),rx={state:In,replaceState(t){t&&Object.assign(In,gi(t))},subscribe(t){return T.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return T.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){T.setAccountProp("status",t,e)},getCaipAddress(t){return T.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ce.getPlainAddress(t):void 0;e===T.state.activeChain&&(T.state.activeCaipAddress=t),T.setAccountProp("caipAddress",t,e),T.setAccountProp("address",n,e)},setBalance(t,e,n){T.setAccountProp("balance",t,n),T.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){T.setAccountProp("profileName",t,e)},setProfileImage(t,e){T.setAccountProp("profileImage",t,e)},setUser(t,e){T.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){T.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){T.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){T.setAccountProp("currentTab",t,T.state.activeChain)},setTokenBalance(t,e){t&&T.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){T.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){T.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=T.getAccountProp("addressLabels",n)||new Map;r.set(t,e),T.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=T.getAccountProp("addressLabels",e)||new Map;n.delete(t),T.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){T.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){T.setAccountProp("preferredAccountTypes",{...In.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){In.preferredAccountTypes=t},setSocialProvider(t,e){t&&T.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){T.setAccountProp("socialWindow",t?gi(t):void 0,e)},setFarcasterUrl(t,e){T.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;In.balanceLoading=!0;const e=(i=T.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=T.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=T.state.activeCaipAddress,s=r?ce.getPlainAddress(r):void 0;if(In.lastRetry&&!ce.isAllowedRetry(In.lastRetry,30*Me.ONE_SEC_MS))return In.balanceLoading=!1,[];try{if(s&&e&&n){const a=await Sp.getMyTokensWithBalance();return K.setTokenBalance(a,n),In.lastRetry=void 0,In.balanceLoading=!1,a}}catch(a){In.lastRetry=Date.now(),t==null||t(a),Gn.showError("Token Balance Unavailable")}finally{In.balanceLoading=!1}return[]},resetAccount(t){T.resetAccount(t)}},K=Cn(rx),sx={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=T.state.activeCaipNetwork,r=ge.state.data;if(t.id===(n==null?void 0:n.id))return;const i=K.getCaipAddress(T.state.activeChain),o=t.chainNamespace!==T.state.activeChain,a=K.getCaipAddress(t.chainNamespace),l=Y.getConnectorId(T.state.activeChain)===M.CONNECTOR_ID.AUTH,u=M.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?ge.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?ge.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ge.push("SwitchNetwork",{...r,network:t})}},Yt=Ze({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ix={state:Yt,subscribe(t){return Nt(Yt,()=>t(Yt))},subscribeKey(t,e){return Pt(Yt,t,e)},async open(t){var o,a;const e=K.state.status==="connected",n=t==null?void 0:t.namespace,r=T.state.activeChain,s=n&&n!==r,i=(o=T.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(se.state.wcBasic?ue.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ue.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Y.setFilterByNamespace(t==null?void 0:t.namespace),Be.setLoading(!0,n),n&&s){const c=((a=T.getNetworkData(n))==null?void 0:a.caipNetwork)||T.getRequestedCaipNetworks(n)[0];c&&sx.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=T.state.noAdapters;z.state.manualWCControl||c&&!i?ce.isMobile()?ge.reset("AllWallets"):ge.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?ge.reset(t.view,t.data):i?ge.reset("Account"):ge.reset("Connect")}Yt.open=!0,vr.set({open:!0}),Fe.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=z.state.enableEmbedded,e=!!T.state.activeCaipAddress;Yt.open&&Fe.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Yt.open=!1,ge.reset("Connect"),Be.clearLoading(),t?e?ge.replace("Account"):ge.push("Connect"):vr.set({open:!1}),se.resetUri()},setLoading(t,e){e&&Yt.loadingNamespaceMap.set(e,t),Yt.loading=t,vr.set({loading:t})},clearLoading(){Yt.loadingNamespaceMap.clear(),Yt.loading=!1},shake(){Yt.shake||(Yt.shake=!0,setTimeout(()=>{Yt.shake=!1},500))}},Be=Cn(ix),ga={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Yh={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},ox={providers:S0,selectedProvider:null,error:null,purchaseCurrency:ga,paymentCurrency:Yh,purchaseCurrencies:[ga],paymentCurrencies:[],quotesLoading:!1},Te=Ze(ox),ax={state:Te,subscribe(t){return Nt(Te,()=>t(Te))},subscribeKey(t,e){return Pt(Te,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=T.state.activeChain===M.CHAIN.SOLANA?"SOL":"USDC",n=K.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",s_),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",z.state.projectId),Te.selectedProvider={...t,url:r.toString()}}else Te.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=S0.filter(r=>e.includes(r.name));Te.providers=n}else Te.providers=[]},setPurchaseCurrency(t){Te.purchaseCurrency=t},setPaymentCurrency(t){Te.paymentCurrency=t},setPurchaseAmount(t){Zh.state.purchaseAmount=t},setPaymentAmount(t){Zh.state.paymentAmount=t},async getAvailableCurrencies(){const t=await pe.getOnrampOptions();Te.purchaseCurrencies=t.purchaseCurrencies,Te.paymentCurrencies=t.paymentCurrencies,Te.paymentCurrency=t.paymentCurrencies[0]||Yh,Te.purchaseCurrency=t.purchaseCurrencies[0]||ga,await ue.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ue.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Te.quotesLoading=!0;try{const n=await pe.getOnrampQuote({purchaseCurrency:Te.purchaseCurrency,paymentCurrency:Te.paymentCurrency,amount:((t=Te.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Te.purchaseCurrency)==null?void 0:e.symbol});return Te.quotesLoading=!1,Te.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Te.error=n.message,Te.quotesLoading=!1,null}finally{Te.quotesLoading=!1}},resetState(){Te.selectedProvider=null,Te.error=null,Te.purchaseCurrency=ga,Te.paymentCurrency=Yh,Te.purchaseCurrencies=[ga],Te.paymentCurrencies=[],Te.paymentAmount=void 0,Te.purchaseAmount=void 0,Te.quotesLoading=!1}},Zh=Cn(ax),Yg=2147483648,cx={convertEVMChainIdToCoinType(t){if(t>=Yg)throw new Error("Invalid chainId");return(Yg|t)>>>0}},Sn=Ze({suggestions:[],loading:!1}),lx={state:Sn,subscribe(t){return Nt(Sn,()=>t(Sn))},subscribeKey(t,e){return Pt(Sn,t,e)},async resolveName(t){var e,n;try{return await pe.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await pe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Sn.loading=!0,Sn.suggestions=[];const e=await pe.getEnsNameSuggestions(t);return Sn.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Sn.suggestions}catch(e){const n=ma.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Sn.loading=!1}},async getNamesForAddress(t){try{if(!T.state.activeCaipNetwork)return[];const n=G.getEnsFromCacheForAddress(t);if(n)return n;const r=await pe.reverseLookupEnsName({address:t});return G.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ma.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=T.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=K.state.address,r=Y.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Sn.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ge.pushTransactionStack({onCancel(){ge.replace("RegisterAccountName")}});const i=await se.signMessage(s);Sn.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=cx.convertEVMChainIdToCoinType(Number(o));await pe.registerEnsName({coinType:a,address:n,signature:i,message:s}),K.setProfileName(t,e.chainNamespace),ge.replace("RegisterAccountNameSuccess")}catch(s){const i=ma.parseEnsApiError(s,`Error registering name ${t}`);throw ge.replace("RegisterAccountName"),new Error(i)}finally{Sn.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ma=Cn(lx);var tl={exports:{}},Zg;function ux(){if(Zg)return tl.exports;Zg=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(w,v,_){return Function.prototype.apply.call(w,v,_)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:n=function(w){return Object.getOwnPropertyNames(w)};function r(E){console&&console.warn&&console.warn(E)}var s=Number.isNaN||function(w){return w!==w};function i(){i.init.call(this)}tl.exports=i,tl.exports.once=b,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(E){if(typeof E!="number"||E<0||s(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");o=E}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||s(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function c(E){return E._maxListeners===void 0?i.defaultMaxListeners:E._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(w){for(var v=[],_=1;_<arguments.length;_++)v.push(arguments[_]);var N=w==="error",x=this._events;if(x!==void 0)N=N&&x.error===void 0;else if(!N)return!1;if(N){var O;if(v.length>0&&(O=v[0]),O instanceof Error)throw O;var P=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw P.context=O,P}var k=x[w];if(k===void 0)return!1;if(typeof k=="function")e(k,this,v);else for(var B=k.length,L=f(k,B),_=0;_<B;++_)e(L[_],this,v);return!0};function l(E,w,v,_){var N,x,O;if(a(v),x=E._events,x===void 0?(x=E._events=Object.create(null),E._eventsCount=0):(x.newListener!==void 0&&(E.emit("newListener",w,v.listener?v.listener:v),x=E._events),O=x[w]),O===void 0)O=x[w]=v,++E._eventsCount;else if(typeof O=="function"?O=x[w]=_?[v,O]:[O,v]:_?O.unshift(v):O.push(v),N=c(E),N>0&&O.length>N&&!O.warned){O.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=E,P.type=w,P.count=O.length,r(P)}return E}i.prototype.addListener=function(w,v){return l(this,w,v,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(w,v){return l(this,w,v,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,w,v){var _={fired:!1,wrapFn:void 0,target:E,type:w,listener:v},N=u.bind(_);return N.listener=v,_.wrapFn=N,N}i.prototype.once=function(w,v){return a(v),this.on(w,d(this,w,v)),this},i.prototype.prependOnceListener=function(w,v){return a(v),this.prependListener(w,d(this,w,v)),this},i.prototype.removeListener=function(w,v){var _,N,x,O,P;if(a(v),N=this._events,N===void 0)return this;if(_=N[w],_===void 0)return this;if(_===v||_.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete N[w],N.removeListener&&this.emit("removeListener",w,_.listener||v));else if(typeof _!="function"){for(x=-1,O=_.length-1;O>=0;O--)if(_[O]===v||_[O].listener===v){P=_[O].listener,x=O;break}if(x<0)return this;x===0?_.shift():p(_,x),_.length===1&&(N[w]=_[0]),N.removeListener!==void 0&&this.emit("removeListener",w,P||v)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(w){var v,_,N;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[w]),this;if(arguments.length===0){var x=Object.keys(_),O;for(N=0;N<x.length;++N)O=x[N],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=_[w],typeof v=="function")this.removeListener(w,v);else if(v!==void 0)for(N=v.length-1;N>=0;N--)this.removeListener(w,v[N]);return this};function h(E,w,v){var _=E._events;if(_===void 0)return[];var N=_[w];return N===void 0?[]:typeof N=="function"?v?[N.listener||N]:[N]:v?m(N):f(N,N.length)}i.prototype.listeners=function(w){return h(this,w,!0)},i.prototype.rawListeners=function(w){return h(this,w,!1)},i.listenerCount=function(E,w){return typeof E.listenerCount=="function"?E.listenerCount(w):g.call(E,w)},i.prototype.listenerCount=g;function g(E){var w=this._events;if(w!==void 0){var v=w[E];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function f(E,w){for(var v=new Array(w),_=0;_<w;++_)v[_]=E[_];return v}function p(E,w){for(;w+1<E.length;w++)E[w]=E[w+1];E.pop()}function m(E){for(var w=new Array(E.length),v=0;v<w.length;++v)w[v]=E[v].listener||E[v];return w}function b(E,w){return new Promise(function(v,_){function N(O){E.removeListener(w,x),_(O)}function x(){typeof E.removeListener=="function"&&E.removeListener("error",N),v([].slice.call(arguments))}y(E,w,x,{once:!0}),w!=="error"&&C(E,N,{once:!0})})}function C(E,w,v){typeof E.on=="function"&&y(E,"error",w,v)}function y(E,w,v,_){if(typeof E.on=="function")_.once?E.once(w,v):E.on(w,v);else if(typeof E.addEventListener=="function")E.addEventListener(w,function N(x){_.once&&E.removeEventListener(w,N),v(x)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return tl.exports}var Bn=ux();const xp=bu(Bn);var wd={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jh=function(t,e){return Jh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Jh(t,e)};function dx(t,e){Jh(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Xh=function(){return Xh=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xh.apply(this,arguments)};function hx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fx(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function px(t,e){return function(n,r){e(n,r,t)}}function gx(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function mx(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function yx(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function wx(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function bx(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Qh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sv(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function vx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sv(arguments[e]));return t}function Ex(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function tc(t){return this instanceof tc?(this.v=t,this):new tc(t)}function Cx(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(g){return new Promise(function(f,p){i.push([h,g,f,p])>1||a(h,g)})})}function a(h,g){try{c(r[h](g))}catch(f){d(i[0][3],f)}}function c(h){h.value instanceof tc?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,g){h(g),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _x(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:tc(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Ax(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qh=="function"?Qh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Ix(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Sx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function xx(t){return t&&t.__esModule?t:{default:t}}function Nx(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Tx(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Px=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xh},__asyncDelegator:_x,__asyncGenerator:Cx,__asyncValues:Ax,__await:tc,__awaiter:mx,__classPrivateFieldGet:Nx,__classPrivateFieldSet:Tx,__createBinding:wx,__decorate:fx,__exportStar:bx,__extends:dx,__generator:yx,__importDefault:xx,__importStar:Sx,__makeTemplateObject:Ix,__metadata:gx,__param:px,__read:sv,__rest:hx,__spread:vx,__spreadArrays:Ex,__values:Qh},Symbol.toStringTag,{value:"Module"})),Pc=HC(Px);var bd={},Mo={},Jg;function Ox(){if(Jg)return Mo;Jg=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Mo.delay=t,Mo}var Gs={},vd={},Ks={},Xg;function Rx(){return Xg||(Xg=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.ONE_THOUSAND=Ks.ONE_HUNDRED=void 0,Ks.ONE_HUNDRED=100,Ks.ONE_THOUSAND=1e3),Ks}var Ed={},Qg;function Dx(){return Qg||(Qg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Ed)),Ed}var em;function iv(){return em||(em=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pc;e.__exportStar(Rx(),t),e.__exportStar(Dx(),t)}(vd)),vd}var tm;function $x(){if(tm)return Gs;tm=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.fromMiliseconds=Gs.toMiliseconds=void 0;const t=iv();function e(r){return r*t.ONE_THOUSAND}Gs.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Gs.fromMiliseconds=n,Gs}var nm;function kx(){return nm||(nm=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pc;e.__exportStar(Ox(),t),e.__exportStar($x(),t)}(bd)),bd}var Li={},rm;function Ux(){if(rm)return Li;rm=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Li.Watch=t,Li.default=t,Li}var Cd={},Fo={},sm;function Bx(){if(sm)return Fo;sm=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.IWatch=void 0;class t{}return Fo.IWatch=t,Fo}var im;function Lx(){return im||(im=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Pc.__exportStar(Bx(),t)}(Cd)),Cd}var om;function Mx(){return om||(om=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pc;e.__exportStar(kx(),t),e.__exportStar(Ux(),t),e.__exportStar(Lx(),t),e.__exportStar(iv(),t)}(wd)),wd}var W=Mx();class Oi{}let Fx=class extends Oi{constructor(e){super()}};const am=W.FIVE_SECONDS,Ri={pulse:"heartbeat_pulse"};let jx=class ov extends Fx{constructor(e){super(e),this.events=new Bn.EventEmitter,this.interval=am,this.interval=(e==null?void 0:e.interval)||am}static async init(e){const n=new ov(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),W.toMiliseconds(this.interval))}pulse(){this.events.emit(Ri.pulse)}};const zx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,qx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Hx=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Wx(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Vx(t);return}return e}function Vx(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function nl(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Hx.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(zx.test(t)||qx.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Wx)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Gx(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function yt(t,...e){try{return Gx(t(...e))}catch(n){return Promise.reject(n)}}function Kx(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Yx(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Al(t){if(Kx(t))return String(t);if(Yx(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Al(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ef="base64:";function Zx(t){return typeof t=="string"?t:ef+Qx(t)}function Jx(t){return typeof t!="string"||!t.startsWith(ef)?t:Xx(t.slice(ef.length))}function Xx(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Qx(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function en(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function eN(...t){return en(t.join(":"))}function rl(t){return t=en(t),t?t+":":""}function tN(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function nN(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const rN="memory",sN=()=>{const t=new Map;return{name:rN,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function iN(t={}){const e={mounts:{"":t.driver||sN()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=en(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await cm(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,g=f=>{let p=h.get(f.base);return p||(p={driver:f.driver,base:f.base,items:[]},h.set(f.base,p)),p};for(const f of l){const p=typeof f=="string",m=en(p?f:f.key),b=p?void 0:f.value,C=p||!f.options?u:{...u,...f.options},y=n(m);g(y).items.push({key:m,value:b,relativeKey:y.relativeKey,options:C})}return Promise.all([...h.values()].map(f=>d(f))).then(f=>f.flat())},c={hasItem(l,u={}){l=en(l);const{relativeKey:d,driver:h}=n(l);return yt(h.hasItem,d,u)},getItem(l,u={}){l=en(l);const{relativeKey:d,driver:h}=n(l);return yt(h.getItem,d,u).then(g=>nl(g))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?yt(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(g=>({key:eN(d.base,g.key),value:nl(g.value)}))):Promise.all(d.items.map(h=>yt(d.driver.getItem,h.relativeKey,h.options).then(g=>({key:h.key,value:nl(g)})))))},getItemRaw(l,u={}){l=en(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?yt(h.getItemRaw,d,u):yt(h.getItem,d,u).then(g=>Jx(g))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=en(l);const{relativeKey:h,driver:g}=n(l);g.setItem&&(await yt(g.setItem,h,Al(u),d),g.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return yt(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Al(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>yt(d.driver.setItem,h.relativeKey,Al(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=en(l);const{relativeKey:h,driver:g}=n(l);if(g.setItemRaw)await yt(g.setItemRaw,h,u,d);else if(g.setItem)await yt(g.setItem,h,Zx(u),d);else return;g.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=en(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await yt(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await yt(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=en(l);const{relativeKey:d,driver:h}=n(l),g=Object.create(null);if(h.getMeta&&Object.assign(g,await yt(h.getMeta,d,u)),!u.nativeOnly){const f=await yt(h.getItem,d+"$",u).then(p=>nl(p));f&&typeof f=="object"&&(typeof f.atime=="string"&&(f.atime=new Date(f.atime)),typeof f.mtime=="string"&&(f.mtime=new Date(f.mtime)),Object.assign(g,f))}return g},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=rl(l);const d=r(l,!0);let h=[];const g=[];let f=!0;for(const b of d){(m=b.driver.flags)!=null&&m.maxDepth||(f=!1);const C=await yt(b.driver.getKeys,b.relativeBase,u);for(const y of C){const E=b.mountpoint+en(y);h.some(w=>E.startsWith(w))||g.push(E)}h=[b.mountpoint,...h.filter(y=>!y.startsWith(b.mountpoint))]}const p=u.maxDepth!==void 0&&!f;return g.filter(b=>(!p||tN(b,u.maxDepth))&&nN(b,l))},async clear(l,u={}){l=rl(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return yt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(g=>d.driver.removeItem(g,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>lm(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=rl(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(cm(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=rl(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await lm(e.mounts[l]),e.mountpoints=e.mountpoints.filter(g=>g!==l),delete e.mounts[l])},getMount(l=""){l=en(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=en(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function cm(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function lm(t){typeof t.dispose=="function"&&await yt(t.dispose)}function Di(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function av(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Di(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let _d;function Oc(){return _d||(_d=av("keyval-store","keyval")),_d}function um(t,e=Oc()){return e("readonly",n=>Di(n.get(t)))}function oN(t,e,n=Oc()){return n("readwrite",r=>(r.put(e,t),Di(r.transaction)))}function aN(t,e=Oc()){return e("readwrite",n=>(n.delete(t),Di(n.transaction)))}function cN(t=Oc()){return t("readwrite",e=>(e.clear(),Di(e.transaction)))}function lN(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Di(t.transaction)}function uN(t=Oc()){return t("readonly",e=>{if(e.getAllKeys)return Di(e.getAllKeys());const n=[];return lN(e,r=>n.push(r.key)).then(()=>n)})}const dN=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),hN=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Ei(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return hN(t)}catch{return t}}function Jr(t){return typeof t=="string"?t:dN(t)||""}const fN="idb-keyval";var pN=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=av(t.dbName,t.storeName)),{name:fN,options:t,async hasItem(s){return!(typeof await um(n(s),r)>"u")},async getItem(s){return await um(n(s),r)??null},setItem(s,i){return oN(n(s),i,r)},removeItem(s){return aN(n(s),r)},getKeys(){return uN(r)},clear(){return cN(r)}}};const gN="WALLET_CONNECT_V2_INDEXED_DB",mN="keyvaluestorage";let yN=class{constructor(){this.indexedDb=iN({driver:pN({dbName:gN,storeName:mN})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Jr(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Il={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ad<"u"&&Ad.localStorage?Il.exports=Ad.localStorage:typeof window<"u"&&window.localStorage?Il.exports=window.localStorage:Il.exports=new e})();function wN(t){var e;return[t[0],Ei((e=t[1])!=null?e:"")]}let bN=class{constructor(){this.localStorage=Il.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(wN)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Ei(n)}async setItem(e,n){this.localStorage.setItem(e,Jr(n))}async removeItem(e){this.localStorage.removeItem(e)}};const vN="wc_storage_version",dm=1,EN=async(t,e,n)=>{const r=vN,s=await e.getItem(r);if(s&&s>=dm){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,dm),n(e),CN(t,o)},CN=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let _N=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new bN;this.storage=e;try{const n=new yN;EN(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var Id,hm;function AN(){if(hm)return Id;hm=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}Id=e;function e(n,r,s){var i=s&&s.stringify||t,o=1;if(typeof n=="object"&&n!==null){var a=r.length+o;if(a===1)return n;var c=new Array(a);c[0]=i(n);for(var l=1;l<a;l++)c[l]=i(r[l]);return c.join(" ")}if(typeof n!="string")return n;var u=r.length;if(u===0)return n;for(var d="",h=1-o,g=-1,f=n&&n.length||0,p=0;p<f;){if(n.charCodeAt(p)===37&&p+1<f){switch(g=g>-1?g:0,n.charCodeAt(p+1)){case 100:case 102:if(h>=u||r[h]==null)break;g<p&&(d+=n.slice(g,p)),d+=Number(r[h]),g=p+2,p++;break;case 105:if(h>=u||r[h]==null)break;g<p&&(d+=n.slice(g,p)),d+=Math.floor(Number(r[h])),g=p+2,p++;break;case 79:case 111:case 106:if(h>=u||r[h]===void 0)break;g<p&&(d+=n.slice(g,p));var m=typeof r[h];if(m==="string"){d+="'"+r[h]+"'",g=p+2,p++;break}if(m==="function"){d+=r[h].name||"<anonymous>",g=p+2,p++;break}d+=i(r[h]),g=p+2,p++;break;case 115:if(h>=u)break;g<p&&(d+=n.slice(g,p)),d+=String(r[h]),g=p+2,p++;break;case 37:g<p&&(d+=n.slice(g,p)),d+="%",g=p+2,p++,h--;break}++h}++p}return g===-1?n:(g<f&&(d+=n.slice(g)),d)}return Id}var Sd,fm;function IN(){if(fm)return Sd;fm=1;const t=AN();Sd=s;const e=w().console||{},n={mapHttpRequest:f,mapHttpResponse:f,wrapRequestSerializer:p,wrapResponseSerializer:p,wrapErrorSerializer:p,req:f,res:f,err:h};function r(v,_){return Array.isArray(v)?v.filter(function(x){return x!=="!stdSerializers.err"}):v===!0?Object.keys(_):!1}function s(v){v=v||{},v.browser=v.browser||{};const _=v.browser.transmit;if(_&&typeof _.send!="function")throw Error("pino: transmit option must have a send function");const N=v.browser.write||e;v.browser.write&&(v.browser.asObject=!0);const x=v.serializers||{},O=r(v.browser.serialize,x);let P=v.browser.serialize;Array.isArray(v.browser.serialize)&&v.browser.serialize.indexOf("!stdSerializers.err")>-1&&(P=!1);const k=["error","fatal","warn","info","debug","trace"];typeof N=="function"&&(N.error=N.fatal=N.warn=N.info=N.debug=N.trace=N),v.enabled===!1&&(v.level="silent");const B=v.level||"info",L=Object.create(N);L.log||(L.log=m),Object.defineProperty(L,"levelVal",{get:S}),Object.defineProperty(L,"level",{get:R,set:U});const I={transmit:_,serialize:O,asObject:v.browser.asObject,levels:k,timestamp:g(v)};L.levels=s.levels,L.level=B,L.setMaxListeners=L.getMaxListeners=L.emit=L.addListener=L.on=L.prependListener=L.once=L.prependOnceListener=L.removeListener=L.removeAllListeners=L.listeners=L.listenerCount=L.eventNames=L.write=L.flush=m,L.serializers=x,L._serialize=O,L._stdErrSerialize=P,L.child=D,_&&(L._logEvent=d());function S(){return this.level==="silent"?1/0:this.levels.values[this.level]}function R(){return this._level}function U($){if($!=="silent"&&!this.levels.values[$])throw Error("unknown level "+$);this._level=$,i(I,L,"error","log"),i(I,L,"fatal","error"),i(I,L,"warn","error"),i(I,L,"info","log"),i(I,L,"debug","log"),i(I,L,"trace","log")}function D($,q){if(!$)throw new Error("missing bindings for child Pino");q=q||{},O&&$.serializers&&(q.serializers=$.serializers);const Z=q.serializers;if(O&&Z){var oe=Object.assign({},x,Z),J=v.browser.serialize===!0?Object.keys(oe):O;delete $.serializers,c([$],J,oe,this._stdErrSerialize)}function le(he){this._childLevel=(he._childLevel|0)+1,this.error=l(he,$,"error"),this.fatal=l(he,$,"fatal"),this.warn=l(he,$,"warn"),this.info=l(he,$,"info"),this.debug=l(he,$,"debug"),this.trace=l(he,$,"trace"),oe&&(this.serializers=oe,this._serialize=J),_&&(this._logEvent=d([].concat(he._logEvent.bindings,$)))}return le.prototype=this,new le(this)}return L}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=n,s.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:C,unixTime:y,isoTime:E});function i(v,_,N,x){const O=Object.getPrototypeOf(_);_[N]=_.levelVal>_.levels.values[N]?m:O[N]?O[N]:e[N]||e[x]||m,o(v,_,N)}function o(v,_,N){!v.transmit&&_[N]===m||(_[N]=function(x){return function(){const P=v.timestamp(),k=new Array(arguments.length),B=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var L=0;L<k.length;L++)k[L]=arguments[L];if(v.serialize&&!v.asObject&&c(k,this._serialize,this.serializers,this._stdErrSerialize),v.asObject?x.call(B,a(this,N,k,P)):x.apply(B,k),v.transmit){const I=v.transmit.level||_.level,S=s.levels.values[I],R=s.levels.values[N];if(R<S)return;u(this,{ts:P,methodLevel:N,methodValue:R,transmitValue:s.levels.values[v.transmit.level||_.level],send:v.transmit.send,val:_.levelVal},k)}}}(_[N]))}function a(v,_,N,x){v._serialize&&c(N,v._serialize,v.serializers,v._stdErrSerialize);const O=N.slice();let P=O[0];const k={};x&&(k.time=x),k.level=s.levels.values[_];let B=(v._childLevel|0)+1;if(B<1&&(B=1),P!==null&&typeof P=="object"){for(;B--&&typeof O[0]=="object";)Object.assign(k,O.shift());P=O.length?t(O.shift(),O):void 0}else typeof P=="string"&&(P=t(O.shift(),O));return P!==void 0&&(k.msg=P),k}function c(v,_,N,x){for(const O in v)if(x&&v[O]instanceof Error)v[O]=s.stdSerializers.err(v[O]);else if(typeof v[O]=="object"&&!Array.isArray(v[O]))for(const P in v[O])_&&_.indexOf(P)>-1&&P in N&&(v[O][P]=N[P](v[O][P]))}function l(v,_,N){return function(){const x=new Array(1+arguments.length);x[0]=_;for(var O=1;O<x.length;O++)x[O]=arguments[O-1];return v[N].apply(this,x)}}function u(v,_,N){const x=_.send,O=_.ts,P=_.methodLevel,k=_.methodValue,B=_.val,L=v._logEvent.bindings;c(N,v._serialize||Object.keys(v.serializers),v.serializers,v._stdErrSerialize===void 0?!0:v._stdErrSerialize),v._logEvent.ts=O,v._logEvent.messages=N.filter(function(I){return L.indexOf(I)===-1}),v._logEvent.level.label=P,v._logEvent.level.value=k,x(P,v._logEvent,B),v._logEvent=d(L)}function d(v){return{ts:0,messages:[],bindings:v||[],level:{label:"",value:0}}}function h(v){const _={type:v.constructor.name,msg:v.message,stack:v.stack};for(const N in v)_[N]===void 0&&(_[N]=v[N]);return _}function g(v){return typeof v.timestamp=="function"?v.timestamp:v.timestamp===!1?b:C}function f(){return{}}function p(v){return v}function m(){}function b(){return!1}function C(){return Date.now()}function y(){return Math.round(Date.now()/1e3)}function E(){return new Date(Date.now()).toISOString()}function w(){function v(_){return typeof _<"u"&&_}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return v(self)||v(window)||v(this)||{}}}return Sd}var to=IN();const Rc=bu(to),SN={level:"info"},Dc="custom_context",Np=1e3*1024;let xN=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},pm=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new xN(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},cv=class{constructor(e,n=Np){this.level=e??"error",this.levelValue=to.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new pm(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===to.levels.values.error?console.error(e):n===to.levels.values.warn?console.warn(e):n===to.levels.values.debug?console.debug(e):n===to.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Jr({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new pm(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Jr({extraMetadata:e})),new Blob(n,{type:"application/json"})}},NN=class{constructor(e,n=Np){this.baseChunkLogger=new cv(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},TN=class{constructor(e,n=Np){this.baseChunkLogger=new cv(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var PN=Object.defineProperty,ON=Object.defineProperties,RN=Object.getOwnPropertyDescriptors,gm=Object.getOwnPropertySymbols,DN=Object.prototype.hasOwnProperty,$N=Object.prototype.propertyIsEnumerable,mm=(t,e,n)=>e in t?PN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wl=(t,e)=>{for(var n in e||(e={}))DN.call(e,n)&&mm(t,n,e[n]);if(gm)for(var n of gm(e))$N.call(e,n)&&mm(t,n,e[n]);return t},Vl=(t,e)=>ON(t,RN(e));function So(t){return Vl(Wl({},t),{level:(t==null?void 0:t.level)||SN.level})}function kN(t,e=Dc){return t[e]||""}function UN(t,e,n=Dc){return t[n]=e,t}function hn(t,e=Dc){let n="";return typeof t.bindings>"u"?n=kN(t,e):n=t.bindings().context||"",n}function BN(t,e,n=Dc){const r=hn(t,n);return r.trim()?`${r}/${e}`:e}function Ft(t,e,n=Dc){const r=BN(t,e,n),s=t.child({context:r});return UN(s,r,n)}function LN(t){var e,n;const r=new NN((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Rc(Vl(Wl({},t.opts),{level:"trace",browser:Vl(Wl({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function MN(t){var e;const n=new TN((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Rc(Vl(Wl({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Tp(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?LN(t):MN(t)}var FN=Object.defineProperty,jN=(t,e,n)=>e in t?FN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ym=(t,e,n)=>jN(t,typeof e!="symbol"?e+"":e,n);let zN=class extends Oi{constructor(e){super(),this.opts=e,ym(this,"protocol","wc"),ym(this,"version",2)}};var qN=Object.defineProperty,HN=(t,e,n)=>e in t?qN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WN=(t,e,n)=>HN(t,e+"",n);let VN=class extends Oi{constructor(e,n){super(),this.core=e,this.logger=n,WN(this,"records",new Map)}},GN=class{constructor(e,n){this.logger=e,this.core=n}},KN=class extends Oi{constructor(e,n){super(),this.relayer=e,this.logger=n}},YN=class extends Oi{constructor(e){super()}},ZN=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},JN=class extends Oi{constructor(e,n){super(),this.relayer=e,this.logger=n}},XN=class extends Oi{constructor(e,n){super(),this.core=e,this.logger=n}},QN=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},eT=class{constructor(e,n){this.projectId=e,this.logger=n}},tT=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var nT=Object.defineProperty,rT=(t,e,n)=>e in t?nT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wm=(t,e,n)=>rT(t,typeof e!="symbol"?e+"":e,n);let sT=class{constructor(e){this.opts=e,wm(this,"protocol","wc"),wm(this,"version",2)}},iT=class{constructor(e){this.client=e}};function oT(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lv(t,...e){if(!oT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function bm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aT(t,e){lv(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Mi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xd=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function cT(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function uv(t){return typeof t=="string"&&(t=cT(t)),lv(t),t}let lT=class{clone(){return this._cloneInto()}};function uT(t){const e=r=>t().update(uv(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function dv(t=32){if(Mi&&typeof Mi.getRandomValues=="function")return Mi.getRandomValues(new Uint8Array(t));if(Mi&&typeof Mi.randomBytes=="function")return Mi.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function dT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let hT=class extends lT{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xd(this.buffer)}update(e){bm(this);const{view:n,buffer:r,blockLen:s}=this;e=uv(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=xd(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){bm(this),aT(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;dT(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=xd(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const sl=BigInt(2**32-1),tf=BigInt(32);function hv(t,e=!1){return e?{h:Number(t&sl),l:Number(t>>tf&sl)}:{h:Number(t>>tf&sl)|0,l:Number(t&sl)|0}}function fT(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=hv(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const pT=(t,e)=>BigInt(t>>>0)<<tf|BigInt(e>>>0),gT=(t,e,n)=>t>>>n,mT=(t,e,n)=>t<<32-n|e>>>n,yT=(t,e,n)=>t>>>n|e<<32-n,wT=(t,e,n)=>t<<32-n|e>>>n,bT=(t,e,n)=>t<<64-n|e>>>n-32,vT=(t,e,n)=>t>>>n-32|e<<64-n,ET=(t,e)=>e,CT=(t,e)=>t,_T=(t,e,n)=>t<<n|e>>>32-n,AT=(t,e,n)=>e<<n|t>>>32-n,IT=(t,e,n)=>e<<n-32|t>>>64-n,ST=(t,e,n)=>t<<n-32|e>>>64-n;function xT(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const NT=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),TT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,PT=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),OT=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,RT=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),DT=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ce={fromBig:hv,split:fT,toBig:pT,shrSH:gT,shrSL:mT,rotrSH:yT,rotrSL:wT,rotrBH:bT,rotrBL:vT,rotr32H:ET,rotr32L:CT,rotlSH:_T,rotlSL:AT,rotlBH:IT,rotlBL:ST,add:xT,add3L:NT,add3H:TT,add4L:PT,add4H:OT,add5H:DT,add5L:RT},[$T,kT]=Ce.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),as=new Uint32Array(80),cs=new Uint32Array(80);let UT=class extends hT{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:g,Gl:f,Hh:p,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,g,f,p,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,g,f,p,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=g|0,this.Gl=f|0,this.Hh=p|0,this.Hl=m|0}process(e,n){for(let y=0;y<16;y++,n+=4)as[y]=e.getUint32(n),cs[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const E=as[y-15]|0,w=cs[y-15]|0,v=Ce.rotrSH(E,w,1)^Ce.rotrSH(E,w,8)^Ce.shrSH(E,w,7),_=Ce.rotrSL(E,w,1)^Ce.rotrSL(E,w,8)^Ce.shrSL(E,w,7),N=as[y-2]|0,x=cs[y-2]|0,O=Ce.rotrSH(N,x,19)^Ce.rotrBH(N,x,61)^Ce.shrSH(N,x,6),P=Ce.rotrSL(N,x,19)^Ce.rotrBL(N,x,61)^Ce.shrSL(N,x,6),k=Ce.add4L(_,P,cs[y-7],cs[y-16]),B=Ce.add4H(k,v,O,as[y-7],as[y-16]);as[y]=B|0,cs[y]=k|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:g,Fl:f,Gh:p,Gl:m,Hh:b,Hl:C}=this;for(let y=0;y<80;y++){const E=Ce.rotrSH(d,h,14)^Ce.rotrSH(d,h,18)^Ce.rotrBH(d,h,41),w=Ce.rotrSL(d,h,14)^Ce.rotrSL(d,h,18)^Ce.rotrBL(d,h,41),v=d&g^~d&p,_=h&f^~h&m,N=Ce.add5L(C,w,_,kT[y],cs[y]),x=Ce.add5H(N,b,E,v,$T[y],as[y]),O=N|0,P=Ce.rotrSH(r,s,28)^Ce.rotrBH(r,s,34)^Ce.rotrBH(r,s,39),k=Ce.rotrSL(r,s,28)^Ce.rotrBL(r,s,34)^Ce.rotrBL(r,s,39),B=r&i^r&a^i&a,L=s&o^s&c^o&c;b=p|0,C=m|0,p=g|0,m=f|0,g=d|0,f=h|0,{h:d,l:h}=Ce.add(l|0,u|0,x|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Ce.add3L(O,k,L);r=Ce.add3H(I,x,P,B),s=I|0}({h:r,l:s}=Ce.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ce.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ce.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ce.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ce.add(this.Eh|0,this.El|0,d|0,h|0),{h:g,l:f}=Ce.add(this.Fh|0,this.Fl|0,g|0,f|0),{h:p,l:m}=Ce.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:b,l:C}=Ce.add(this.Hh|0,this.Hl|0,b|0,C|0),this.set(r,s,i,o,a,c,l,u,d,h,g,f,p,m,b,C)}roundClean(){as.fill(0),cs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const BT=uT(()=>new UT);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pp=BigInt(0),fv=BigInt(1),LT=BigInt(2);function Op(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Rp(t){if(!Op(t))throw new Error("Uint8Array expected")}function Nd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const MT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Dp(t){Rp(t);let e="";for(let n=0;n<t.length;n++)e+=MT[t[n]];return e}function pv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Pp:BigInt("0x"+t)}const Dr={_0:48,_9:57,A:65,F:70,a:97,f:102};function vm(t){if(t>=Dr._0&&t<=Dr._9)return t-Dr._0;if(t>=Dr.A&&t<=Dr.F)return t-(Dr.A-10);if(t>=Dr.a&&t<=Dr.f)return t-(Dr.a-10)}function gv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=vm(t.charCodeAt(i)),a=vm(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function FT(t){return pv(Dp(t))}function Sl(t){return Rp(t),pv(Dp(Uint8Array.from(t).reverse()))}function mv(t,e){return gv(t.toString(16).padStart(e*2,"0"))}function nf(t,e){return mv(t,e).reverse()}function $r(t,e,n){let r;if(typeof e=="string")try{r=gv(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Op(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Em(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Rp(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Td=t=>typeof t=="bigint"&&Pp<=t;function jT(t,e,n){return Td(t)&&Td(e)&&Td(n)&&e<=t&&t<n}function jo(t,e,n,r){if(!jT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function zT(t){let e;for(e=0;t>Pp;t>>=fv,e+=1);return e}const qT=t=>(LT<<BigInt(t-1))-fv,HT={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Op(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $p(t,e,n={}){const r=(s,i,o)=>{const a=HT[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Cm(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Et=BigInt(0),st=BigInt(1),ti=BigInt(2),WT=BigInt(3),rf=BigInt(4),_m=BigInt(5),Am=BigInt(8);function pt(t,e){const n=t%e;return n>=Et?n:e+n}function VT(t,e,n){if(e<Et)throw new Error("invalid exponent, negatives unsupported");if(n<=Et)throw new Error("invalid modulus");if(n===st)return Et;let r=st;for(;e>Et;)e&st&&(r=r*t%n),t=t*t%n,e>>=st;return r}function cr(t,e,n){let r=t;for(;e-- >Et;)r*=r,r%=n;return r}function Im(t,e){if(t===Et)throw new Error("invert: expected non-zero number");if(e<=Et)throw new Error("invert: expected positive modulus, got "+e);let n=pt(t,e),r=e,s=Et,i=st;for(;n!==Et;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==st)throw new Error("invert: does not exist");return pt(s,e)}function GT(t){const e=(t-st)/ti;let n,r,s;for(n=t-st,r=0;n%ti===Et;n/=ti,r++);for(s=ti;s<t&&VT(s,e,t)!==t-st;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+st)/rf;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+st)/ti;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let f=o.sqr(d);h<c&&!o.eql(f,o.ONE);h++)f=o.sqr(f);const g=o.pow(l,st<<BigInt(c-h-1));l=o.sqr(g),u=o.mul(u,g),d=o.mul(d,l),c=h}return u}}function KT(t){if(t%rf===WT){const e=(t+st)/rf;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%Am===_m){const e=(t-_m)/Am;return function(n,r){const s=n.mul(r,ti),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ti),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return GT(t)}const YT=(t,e)=>(pt(t,e)&st)===st,ZT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function JT(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ZT.reduce((r,s)=>(r[s]="function",r),e);return $p(t,n)}function XT(t,e,n){if(n<Et)throw new Error("invalid exponent, negatives unsupported");if(n===Et)return t.ONE;if(n===st)return e;let r=t.ONE,s=e;for(;n>Et;)n&st&&(r=t.mul(r,s)),s=t.sqr(s),n>>=st;return r}function QT(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function yv(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function wv(t,e,n=!1,r={}){if(t<=Et)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=yv(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:qT(s),ZERO:Et,ONE:st,create:c=>pt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Et<=c&&c<t},is0:c=>c===Et,isOdd:c=>(c&st)===st,neg:c=>pt(-c,t),eql:(c,l)=>c===l,sqr:c=>pt(c*c,t),add:(c,l)=>pt(c+l,t),sub:(c,l)=>pt(c-l,t),mul:(c,l)=>pt(c*l,t),pow:(c,l)=>XT(a,c,l),div:(c,l)=>pt(c*Im(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Im(c,t),sqrt:r.sqrt||(c=>(o||(o=KT(t)),o(a,c))),invertBatch:c=>QT(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?nf(c,i):mv(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Sl(c):FT(c)}});return Object.freeze(a)}const Sm=BigInt(0),il=BigInt(1);function Pd(t,e){const n=e.negate();return t?n:e}function bv(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Od(t,e){bv(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function eP(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function tP(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Rd=new WeakMap,vv=new WeakMap;function Dd(t){return vv.get(t)||1}function nP(t,e){return{constTimeNegate:Pd,hasPrecomputes(n){return Dd(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Sm;)r&il&&(s=s.add(i)),i=i.double(),r>>=il;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Od(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Od(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const g=h*o;let f=Number(s&l);s>>=d,f>o&&(f-=u,s+=il);const p=g,m=g+Math.abs(f)-1,b=h%2!==0,C=f<0;f===0?c=c.add(Pd(b,r[p])):a=a.add(Pd(C,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Od(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===Sm)break;let g=Number(s&c);if(s>>=u,g>a&&(g-=l,s+=il),g===0)continue;let f=r[h+Math.abs(g)-1];g<0&&(f=f.negate()),i=i.add(f)}return i},getPrecomputes(n,r,s){let i=Rd.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Rd.set(r,s(i))),i},wNAFCached(n,r,s){const i=Dd(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Dd(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){bv(r,e),vv.set(n,r),Rd.delete(n)}}}function rP(t,e,n,r){if(eP(n,t),tP(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=zT(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let g=0;g<r.length;g++){const f=r[g],p=Number(f>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[g])}let h=s;for(let g=c.length-1,f=s;g>0;g--)f=f.add(c[g]),h=h.add(f);if(u=u.add(h),d!==0)for(let g=0;g<o;g++)u=u.double()}return u}function sP(t){return JT(t.Fp),$p(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yv(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Fn=BigInt(0),Zt=BigInt(1),ol=BigInt(2),iP=BigInt(8),oP={zip215:!0};function aP(t){const e=sP(t);return $p(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function cP(t){const e=aP(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=ol<<BigInt(a*8)-Zt,u=n.create,d=wv(e.n,e.nBitLength),h=e.uvRatio||((I,S)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(S))}}catch{return{isValid:!1,value:Fn}}}),g=e.adjustScalarBytes||(I=>I),f=e.domain||((I,S,R)=>{if(Nd("phflag",R),S.length||R)throw new Error("Contexts/pre-hash are not supported");return I});function p(I,S){jo("coordinate "+I,S,Fn,l)}function m(I){if(!(I instanceof y))throw new Error("ExtendedPoint expected")}const b=Cm((I,S)=>{const{ex:R,ey:U,ez:D}=I,$=I.is0();S==null&&(S=$?iP:n.inv(D));const q=u(R*S),Z=u(U*S),oe=u(D*S);if($)return{x:Fn,y:Zt};if(oe!==Zt)throw new Error("invZ was invalid");return{x:q,y:Z}}),C=Cm(I=>{const{a:S,d:R}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:U,ey:D,ez:$,et:q}=I,Z=u(U*U),oe=u(D*D),J=u($*$),le=u(J*J),he=u(Z*S),xe=u(J*u(he+oe)),ze=u(le+u(R*u(Z*oe)));if(xe!==ze)throw new Error("bad point: equation left != right (1)");const Ae=u(U*D),lt=u($*q);if(Ae!==lt)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(S,R,U,D){this.ex=S,this.ey=R,this.ez=U,this.et=D,p("x",S),p("y",R),p("z",U),p("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof y)throw new Error("extended point not allowed");const{x:R,y:U}=S||{};return p("x",R),p("y",U),new y(R,U,Zt,u(R*U))}static normalizeZ(S){const R=n.invertBatch(S.map(U=>U.ez));return S.map((U,D)=>U.toAffine(R[D])).map(y.fromAffine)}static msm(S,R){return rP(y,d,S,R)}_setWindowSize(S){v.setWindowSize(this,S)}assertValidity(){C(this)}equals(S){m(S);const{ex:R,ey:U,ez:D}=this,{ex:$,ey:q,ez:Z}=S,oe=u(R*Z),J=u($*D),le=u(U*Z),he=u(q*D);return oe===J&&le===he}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:S}=e,{ex:R,ey:U,ez:D}=this,$=u(R*R),q=u(U*U),Z=u(ol*u(D*D)),oe=u(S*$),J=R+U,le=u(u(J*J)-$-q),he=oe+q,xe=he-Z,ze=oe-q,Ae=u(le*xe),lt=u(he*ze),jt=u(le*ze),fn=u(xe*he);return new y(Ae,lt,fn,jt)}add(S){m(S);const{a:R,d:U}=e,{ex:D,ey:$,ez:q,et:Z}=this,{ex:oe,ey:J,ez:le,et:he}=S;if(R===BigInt(-1)){const ug=u(($-D)*(J+oe)),dg=u(($+D)*(J-oe)),td=u(dg-ug);if(td===Fn)return this.double();const hg=u(q*ol*he),fg=u(Z*ol*le),pg=fg+hg,gg=dg+ug,mg=fg-hg,EC=u(pg*td),CC=u(gg*mg),_C=u(pg*mg),AC=u(td*gg);return new y(EC,CC,AC,_C)}const xe=u(D*oe),ze=u($*J),Ae=u(Z*U*he),lt=u(q*le),jt=u((D+$)*(oe+J)-xe-ze),fn=lt-Ae,An=lt+Ae,Vt=u(ze-R*xe),Nr=u(jt*fn),Kc=u(An*Vt),bC=u(jt*Vt),vC=u(fn*An);return new y(Nr,Kc,vC,bC)}subtract(S){return this.add(S.negate())}wNAF(S){return v.wNAFCached(this,S,y.normalizeZ)}multiply(S){const R=S;jo("scalar",R,Zt,r);const{p:U,f:D}=this.wNAF(R);return y.normalizeZ([U,D])[0]}multiplyUnsafe(S,R=y.ZERO){const U=S;return jo("scalar",U,Fn,r),U===Fn?w:this.is0()||U===Zt?this:v.wNAFCachedUnsafe(this,U,y.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return v.unsafeLadder(this,r).is0()}toAffine(S){return b(this,S)}clearCofactor(){const{h:S}=e;return S===Zt?this:this.multiplyUnsafe(S)}static fromHex(S,R=!1){const{d:U,a:D}=e,$=n.BYTES;S=$r("pointHex",S,$),Nd("zip215",R);const q=S.slice(),Z=S[$-1];q[$-1]=Z&-129;const oe=Sl(q),J=R?l:n.ORDER;jo("pointHex.y",oe,Fn,J);const le=u(oe*oe),he=u(le-Zt),xe=u(U*le-D);let{isValid:ze,value:Ae}=h(he,xe);if(!ze)throw new Error("Point.fromHex: invalid y coordinate");const lt=(Ae&Zt)===Zt,jt=(Z&128)!==0;if(!R&&Ae===Fn&&jt)throw new Error("Point.fromHex: x=0 and x_0=1");return jt!==lt&&(Ae=u(-Ae)),y.fromAffine({x:Ae,y:oe})}static fromPrivateKey(S){return x(S).point}toRawBytes(){const{x:S,y:R}=this.toAffine(),U=nf(R,n.BYTES);return U[U.length-1]|=S&Zt?128:0,U}toHex(){return Dp(this.toRawBytes())}}y.BASE=new y(e.Gx,e.Gy,Zt,u(e.Gx*e.Gy)),y.ZERO=new y(Fn,Zt,Zt,Fn);const{BASE:E,ZERO:w}=y,v=nP(y,a*8);function _(I){return pt(I,r)}function N(I){return _(Sl(I))}function x(I){const S=n.BYTES;I=$r("private key",I,S);const R=$r("hashed private key",i(I),2*S),U=g(R.slice(0,S)),D=R.slice(S,2*S),$=N(U),q=E.multiply($),Z=q.toRawBytes();return{head:U,prefix:D,scalar:$,point:q,pointBytes:Z}}function O(I){return x(I).pointBytes}function P(I=new Uint8Array,...S){const R=Em(...S);return N(i(f(R,$r("context",I),!!s)))}function k(I,S,R={}){I=$r("message",I),s&&(I=s(I));const{prefix:U,scalar:D,pointBytes:$}=x(S),q=P(R.context,U,I),Z=E.multiply(q).toRawBytes(),oe=P(R.context,Z,$,I),J=_(q+oe*D);jo("signature.s",J,Fn,r);const le=Em(Z,nf(J,n.BYTES));return $r("result",le,n.BYTES*2)}const B=oP;function L(I,S,R,U=B){const{context:D,zip215:$}=U,q=n.BYTES;I=$r("signature",I,2*q),S=$r("message",S),R=$r("publicKey",R,q),$!==void 0&&Nd("zip215",$),s&&(S=s(S));const Z=Sl(I.slice(q,2*q));let oe,J,le;try{oe=y.fromHex(R,$),J=y.fromHex(I.slice(0,q),$),le=E.multiplyUnsafe(Z)}catch{return!1}if(!$&&oe.isSmallOrder())return!1;const he=P(D,J.toRawBytes(),oe.toRawBytes(),S);return J.add(oe.multiplyUnsafe(he)).subtract(le).clearCofactor().equals(y.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:k,verify:L,ExtendedPoint:y,utils:{getExtendedPublicKey:x,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,S=y.BASE){return S._setWindowSize(I),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const kp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xm=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const lP=BigInt(1),Nm=BigInt(2);BigInt(3);const uP=BigInt(5),dP=BigInt(8);function hP(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=kp,o=t*t%i*t%i,a=cr(o,Nm,i)*o%i,c=cr(a,lP,i)*t%i,l=cr(c,uP,i)*c%i,u=cr(l,e,i)*l%i,d=cr(u,n,i)*u%i,h=cr(d,r,i)*d%i,g=cr(h,s,i)*h%i,f=cr(g,s,i)*h%i,p=cr(f,e,i)*l%i;return{pow_p_5_8:cr(p,Nm,i)*t%i,b2:o}}function fP(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function pP(t,e){const n=kp,r=pt(e*e*e,n),s=pt(r*r*e,n),i=hP(t*s).pow_p_5_8;let o=pt(t*r*i,n);const a=pt(e*o*o,n),c=o,l=pt(o*xm,n),u=a===t,d=a===pt(-t,n),h=a===pt(-t*xm,n);return u&&(o=c),(d||h)&&(o=l),YT(o,n)&&(o=pt(-o,n)),{isValid:u||d,value:o}}const gP=wv(kp,void 0,!0),mP={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:gP,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:dP,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:BT,randomBytes:dv,adjustScalarBytes:fP,uvRatio:pP},Ev=cP(mP),yP="EdDSA",wP="JWT",Gl=".",ku="base64url",Cv="utf8",_v="utf8",bP=":",vP="did",EP="key",Tm="base58btc",CP="z",_P="K36",AP=32;function Up(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Av(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Up(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Iv(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Av(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Up(n)}function IP(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,m=0,b=0,C=f.length;b!==C&&f[b]===0;)b++,p++;for(var y=(C-b)*u+1>>>0,E=new Uint8Array(y);b!==C;){for(var w=f[b],v=0,_=y-1;(w!==0||v<m)&&_!==-1;_--,v++)w+=256*E[_]>>>0,E[_]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");m=v,b++}for(var N=y-m;N!==y&&E[N]===0;)N++;for(var x=c.repeat(p);N<y;++N)x+=t.charAt(E[N]);return x}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var m=0,b=0;f[p]===c;)m++,p++;for(var C=(f.length-p)*l+1>>>0,y=new Uint8Array(C);f[p];){var E=n[f.charCodeAt(p)];if(E===255)return;for(var w=0,v=C-1;(E!==0||w<b)&&v!==-1;v--,w++)E+=a*y[v]>>>0,y[v]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=w,p++}if(f[p]!==" "){for(var _=C-b;_!==C&&y[_]===0;)_++;for(var N=new Uint8Array(m+(C-_)),x=m;_!==C;)N[x++]=y[_++];return N}}}function g(f){var p=h(f);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:g}}var SP=IP,xP=SP;const Sv=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},NP=t=>new TextEncoder().encode(t),TP=t=>new TextDecoder().decode(t);let PP=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},OP=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xv(this,e)}},RP=class{constructor(e){this.decoders=e}or(e){return xv(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const xv=(t,e)=>new RP({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let DP=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new PP(e,n,r),this.decoder=new OP(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Uu=({name:t,prefix:e,encode:n,decode:r})=>new DP(t,e,n,r),$c=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=xP(n,e);return Uu({prefix:t,name:e,encode:r,decode:i=>Sv(s(i))})},$P=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},kP=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ot=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Uu({prefix:e,name:t,encode(s){return kP(s,r,n)},decode(s){return $P(s,r,n,t)}}),UP=Uu({prefix:"\0",name:"identity",encode:t=>TP(t),decode:t=>NP(t)});var BP=Object.freeze({__proto__:null,identity:UP});const LP=Ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var MP=Object.freeze({__proto__:null,base2:LP});const FP=Ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var jP=Object.freeze({__proto__:null,base8:FP});const zP=$c({prefix:"9",name:"base10",alphabet:"0123456789"});var qP=Object.freeze({__proto__:null,base10:zP});const HP=Ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),WP=Ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var VP=Object.freeze({__proto__:null,base16:HP,base16upper:WP});const GP=Ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),KP=Ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),YP=Ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZP=Ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JP=Ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XP=Ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),QP=Ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eO=Ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tO=Ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var nO=Object.freeze({__proto__:null,base32:GP,base32upper:KP,base32pad:YP,base32padupper:ZP,base32hex:JP,base32hexupper:XP,base32hexpad:QP,base32hexpadupper:eO,base32z:tO});const rO=$c({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),sO=$c({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var iO=Object.freeze({__proto__:null,base36:rO,base36upper:sO});const oO=$c({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),aO=$c({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var cO=Object.freeze({__proto__:null,base58btc:oO,base58flickr:aO});const lO=Ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),uO=Ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dO=Ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hO=Ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var fO=Object.freeze({__proto__:null,base64:lO,base64pad:uO,base64url:dO,base64urlpad:hO});const Nv=Array.from(""),pO=Nv.reduce((t,e,n)=>(t[n]=e,t),[]),gO=Nv.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function mO(t){return t.reduce((e,n)=>(e+=pO[n],e),"")}function yO(t){const e=[];for(const n of t){const r=gO[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const wO=Uu({prefix:"",name:"base256emoji",encode:mO,decode:yO});var bO=Object.freeze({__proto__:null,base256emoji:wO}),vO=Tv,Pm=128,EO=-128,CO=Math.pow(2,31);function Tv(t,e,n){e=e||[],n=n||0;for(var r=n;t>=CO;)e[n++]=t&255|Pm,t/=128;for(;t&EO;)e[n++]=t&255|Pm,t>>>=7;return e[n]=t|0,Tv.bytes=n-r+1,e}var _O=sf,AO=128,Om=127;function sf(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw sf.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Om)<<s:(o&Om)*Math.pow(2,s),s+=7}while(o>=AO);return sf.bytes=i-r,n}var IO=Math.pow(2,7),SO=Math.pow(2,14),xO=Math.pow(2,21),NO=Math.pow(2,28),TO=Math.pow(2,35),PO=Math.pow(2,42),OO=Math.pow(2,49),RO=Math.pow(2,56),DO=Math.pow(2,63),$O=function(t){return t<IO?1:t<SO?2:t<xO?3:t<NO?4:t<TO?5:t<PO?6:t<OO?7:t<RO?8:t<DO?9:10},kO={encode:vO,decode:_O,encodingLength:$O},Pv=kO;const Rm=(t,e,n=0)=>(Pv.encode(t,e,n),e),Dm=t=>Pv.encodingLength(t),of=(t,e)=>{const n=e.byteLength,r=Dm(t),s=r+Dm(n),i=new Uint8Array(s+n);return Rm(t,i,0),Rm(n,i,r),i.set(e,s),new UO(t,n,e,i)};let UO=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Ov=({name:t,code:e,encode:n})=>new BO(t,e,n);let BO=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?of(this.code,n):n.then(r=>of(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Rv=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),LO=Ov({name:"sha2-256",code:18,encode:Rv("SHA-256")}),MO=Ov({name:"sha2-512",code:19,encode:Rv("SHA-512")});var FO=Object.freeze({__proto__:null,sha256:LO,sha512:MO});const Dv=0,jO="identity",$v=Sv,zO=t=>of(Dv,$v(t)),qO={code:Dv,name:jO,encode:$v,digest:zO};var HO=Object.freeze({__proto__:null,identity:qO});new TextEncoder,new TextDecoder;const $m={...BP,...MP,...jP,...qP,...VP,...nO,...iO,...cO,...fO,...bO};({...FO,...HO});function kv(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const km=kv("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$d=kv("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Av(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Uv={utf8:km,"utf-8":km,hex:$m.base16,latin1:$d,ascii:$d,binary:$d,...$m};function Bu(t,e="utf8"){const n=Uv[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function xo(t,e="utf8"){const n=Uv[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Up(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Um(t){return Ei(Bu(xo(t,ku),Cv))}function Kl(t){return Bu(xo(Jr(t),Cv),ku)}function Bv(t){const e=xo(_P,Tm),n=CP+Bu(Iv([e,t]),Tm);return[vP,EP,n].join(bP)}function WO(t){return Bu(t,ku)}function VO(t){return xo(t,ku)}function GO(t){return xo([Kl(t.header),Kl(t.payload)].join(Gl),_v)}function KO(t){return[Kl(t.header),Kl(t.payload),WO(t.signature)].join(Gl)}function af(t){const e=t.split(Gl),n=Um(e[0]),r=Um(e[1]),s=VO(e[2]),i=xo(e.slice(0,2).join(Gl),_v);return{header:n,payload:r,signature:s,data:i}}function Bm(t=dv(AP)){const e=Ev.getPublicKey(t);return{secretKey:Iv([t,e]),publicKey:e}}async function YO(t,e,n,r,s=W.fromMiliseconds(Date.now())){const i={alg:yP,typ:wP},o=Bv(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=GO({header:i,payload:c}),u=Ev.sign(l,r.secretKey.slice(0,32));return KO({header:i,payload:c,signature:u})}var Lm=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},ZO=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),JO=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),XO=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),QO=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),eR=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),tR=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,nR=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Mm=3,rR=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",tR]],Fm=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function sR(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new eR:typeof navigator<"u"?oR(navigator.userAgent):cR()}function iR(t){return t!==""&&rR.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function oR(t){var e=iR(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new QO;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<Mm&&(s=Lm(Lm([],s,!0),lR(Mm-s.length),!0)):s=[];var i=s.join("."),o=aR(t),a=nR.exec(t);return a&&a[1]?new XO(n,i,o,a[1]):new ZO(n,i,o)}function aR(t){for(var e=0,n=Fm.length;e<n;e++){var r=Fm[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function cR(){var t=typeof process<"u"&&process.version;return t?new JO(process.version.slice(1)):null}function lR(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Ve={},jm;function Lv(){if(jm)return Ve;jm=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.getLocalStorage=Ve.getLocalStorageOrThrow=Ve.getCrypto=Ve.getCryptoOrThrow=Ve.getLocation=Ve.getLocationOrThrow=Ve.getNavigator=Ve.getNavigatorOrThrow=Ve.getDocument=Ve.getDocumentOrThrow=Ve.getFromWindowOrThrow=Ve.getFromWindow=void 0;function t(h){let g;return typeof window<"u"&&typeof window[h]<"u"&&(g=window[h]),g}Ve.getFromWindow=t;function e(h){const g=t(h);if(!g)throw new Error(`${h} is not defined in Window`);return g}Ve.getFromWindowOrThrow=e;function n(){return e("document")}Ve.getDocumentOrThrow=n;function r(){return t("document")}Ve.getDocument=r;function s(){return e("navigator")}Ve.getNavigatorOrThrow=s;function i(){return t("navigator")}Ve.getNavigator=i;function o(){return e("location")}Ve.getLocationOrThrow=o;function a(){return t("location")}Ve.getLocation=a;function c(){return e("crypto")}Ve.getCryptoOrThrow=c;function l(){return t("crypto")}Ve.getCrypto=l;function u(){return e("localStorage")}Ve.getLocalStorageOrThrow=u;function d(){return t("localStorage")}return Ve.getLocalStorage=d,Ve}var Xr=Lv(),zo={},zm;function uR(){if(zm)return zo;zm=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.getWindowMetadata=void 0;const t=Lv();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function s(){const g=n.getElementsByTagName("link"),f=[];for(let p=0;p<g.length;p++){const m=g[p],b=m.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const C=m.getAttribute("href");if(C)if(C.toLowerCase().indexOf("https:")===-1&&C.toLowerCase().indexOf("http:")===-1&&C.indexOf("//")!==0){let y=r.protocol+"//"+r.host;if(C.indexOf("/")===0)y+=C;else{const E=r.pathname.split("/");E.pop();const w=E.join("/");y+=w+"/"+C}f.push(y)}else if(C.indexOf("//")===0){const y=r.protocol+C;f.push(y)}else f.push(C)}}return f}function i(...g){const f=n.getElementsByTagName("meta");for(let p=0;p<f.length;p++){const m=f[p],b=["itemprop","property","name"].map(C=>m.getAttribute(C)).filter(C=>C?g.includes(C):!1);if(b.length&&b){const C=m.getAttribute("content");if(C)return C}}return""}function o(){let g=i("name","og:site_name","og:title","twitter:title");return g||(g=n.title),g}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),l=a(),u=r.origin,d=s();return{description:l,url:u,icons:d,name:c}}return zo.getWindowMetadata=e,zo}var dR=uR();function nc(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function cf(t){return nc(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Mv="2.30.6";let qo={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Mv}`},Lu=class lf extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof lf?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof lf&&n.cause.docsPath||n.docsPath,i=(a=qo.getDocsUrl)==null?void 0:a.call(qo,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...qo.version?[`Version: ${qo.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Mv}walk(e){return Fv(this,e)}};function Fv(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Fv(t.cause,e):e?null:t}class jv extends Lu{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function No(t,{dir:e,size:n=32}={}){return typeof t=="string"?hR(t,{dir:e,size:n}):fR(t,{dir:e,size:n})}function hR(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new jv({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function fR(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new jv({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class pR extends Lu{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class gR extends Lu{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function To(t,{size:e}){if(cf(t)>e)throw new gR({givenSize:cf(t),maxSize:e})}function uf(t,e={}){const{signed:n}=e;e.size&&To(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function mR(t,e={}){return Number(uf(t,e))}const yR=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function df(t,e={}){return typeof t=="number"||typeof t=="bigint"?qv(t,e):typeof t=="string"?vR(t,e):typeof t=="boolean"?wR(t,e):zv(t,e)}function wR(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(To(n,{size:e.size}),No(n,{size:e.size})):n}function zv(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=yR[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(To(r,{size:e.size}),No(r,{dir:"right",size:e.size})):r}function qv(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new pR({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?No(a,{size:r}):a}const bR=new TextEncoder;function vR(t,e={}){const n=bR.encode(t);return zv(n,e)}const ER=new TextEncoder;function CR(t,e={}){return typeof t=="number"||typeof t=="bigint"?AR(t,e):typeof t=="boolean"?_R(t,e):nc(t)?Hv(t,e):Wv(t,e)}function _R(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(To(n,{size:e.size}),No(n,{size:e.size})):n}const kr={zero:48,nine:57,A:65,F:70,a:97,f:102};function qm(t){if(t>=kr.zero&&t<=kr.nine)return t-kr.zero;if(t>=kr.A&&t<=kr.F)return t-(kr.A-10);if(t>=kr.a&&t<=kr.f)return t-(kr.a-10)}function Hv(t,e={}){let n=t;e.size&&(To(n,{size:e.size}),n=No(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=qm(r.charCodeAt(a++)),l=qm(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Lu(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function AR(t,e){const n=qv(t,e);return Hv(n)}function Wv(t,e={}){const n=ER.encode(t);return typeof e.size=="number"?(To(n,{size:e.size}),No(n,{dir:"right",size:e.size})):n}function Vv(t,e){const n=e||"hex",r=ub(nc(t,{strict:!1})?CR(t):t);return n==="bytes"?r:df(r)}class IR extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const kd=new IR(8192);function SR(t,e){if(kd.has(`${t}.${e}`))return kd.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Vv(Wv(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return kd.set(`${t}.${e}`,i),i}function xR(t){const e=Vv(`0x${t.substring(4)}`).substring(26);return SR(`0x${e}`)}async function NR({hash:t,signature:e}){const n=nc(t)?t:df(t),{secp256k1:r}=await Lt(async()=>{const{secp256k1:o}=await import("./CeVBPrFO.js");return{secp256k1:o}},__vite__mapDeps([2,1]),import.meta.url);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,g=Number(h??d),f=Hm(g);return new r.Signature(uf(l),uf(u)).addRecoveryBit(f)}const o=nc(e)?e:df(e);if(cf(o)!==65)throw new Error("invalid signature length");const a=mR(`0x${o.slice(130)}`),c=Hm(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Hm(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function TR({hash:t,signature:e}){return xR(await NR({hash:t,signature:e}))}function PR(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const g=l.length;for(;h!==g&&l[h]===0;)h++,u++;const f=(g-h)*i+1>>>0,p=new Uint8Array(f);for(;h!==g;){let C=l[h],y=0;for(let E=f-1;(C!==0||y<d)&&E!==-1;E--,y++)C+=256*p[E]>>>0,p[E]=C%n>>>0,C=C/n>>>0;if(C!==0)throw new Error("Non-zero carry");d=y,h++}let m=f-d;for(;m!==f&&p[m]===0;)m++;let b=r.repeat(u);for(;m<f;++m)b+=t.charAt(p[m]);return b}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const g=(l.length-u)*s+1>>>0,f=new Uint8Array(g);for(;u<l.length;){const C=l.charCodeAt(u);if(C>255)return;let y=e[C];if(y===255)return;let E=0;for(let w=g-1;(y!==0||E<h)&&w!==-1;w--,E++)y+=n*f[w]>>>0,f[w]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");h=E,u++}let p=g-h;for(;p!==g&&f[p]===0;)p++;const m=new Uint8Array(d+(g-p));let b=d;for(;p!==g;)m[b++]=f[p++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var OR="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Po=PR(OR);function RR(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function DR(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const $R=new TextEncoder,kR=50;function UR(t,e,n){$R.encodeInto(t,e.subarray(n))}function BR(t,e,n){t.length>kR?UR(t,e,n):DR(t,e,n)}const LR=4096;function Gv(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=LR&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const MR=new TextDecoder,FR=200;function jR(t,e,n){const r=t.subarray(e,e+n);return MR.decode(r)}function zR(t,e,n){return n>FR?jR(t,e,n):Gv(t,e,n)}class al{constructor(e,n){this.type=e,this.data=n}}class wn extends Error{constructor(e){super(e);const n=Object.create(wn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:wn.name})}}const Ho=4294967295;function qR(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Kv(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Yv(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function HR(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const WR=-1,VR=4294967296-1,GR=17179869184-1;function KR({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=GR)if(e===0&&t<=VR){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Kv(r,4,t),n}}function YR(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function ZR(t){if(t instanceof Date){const e=YR(t);return KR(e)}else return null}function JR(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Yv(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new wn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function XR(t){const e=JR(t);return new Date(e.sec*1e3+e.nsec/1e6)}const QR={type:WR,encode:ZR,decode:XR};class Yl{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(QR)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new al(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new al(o,i)}}}return e instanceof al?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new al(n,e)}}Yl.defaultCodec=new Yl;function e3(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function hf(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):e3(t)?new Uint8Array(t):Uint8Array.from(t)}const t3=100,n3=2048;let r3=class Zv{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Yl.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??t3,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??n3,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Zv({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=RR(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),BR(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=hf(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),qR(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Kv(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function s3(t,e){return new r3(e).encodeSharedRef(t)}function Ud(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const i3=16,o3=16;class a3{constructor(e=i3,n=o3){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=Gv(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const ff="array",ya="map_key",Jv="map_value",c3=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new wn("The type of key must be string or number but "+typeof t)};class l3{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=ff,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=ya,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===ff){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===ya||e.type===Jv){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Wo=-1,Bp=new DataView(new ArrayBuffer(0)),u3=new Uint8Array(Bp.buffer);try{Bp.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Wm=new RangeError("Insufficient data"),d3=new a3;let h3=class Xv{constructor(e){this.totalPos=0,this.pos=0,this.view=Bp,this.bytes=u3,this.headByte=Wo,this.stack=new l3,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Yl.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Ho,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Ho,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Ho,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Ho,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Ho,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:d3,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??c3}clone(){return new Xv({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Wo,this.stack.reset()}setBuffer(e){const n=hf(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Wo&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=hf(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Ud(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new wn(`Unrecognized type byte: ${Ud(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===ff)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===ya){if(n==="__proto__")throw new wn("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=Jv;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=ya;continue e}}return n}}readHeadByte(){return this.headByte===Wo&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Wo}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new wn(`Unrecognized array type byte: ${Ud(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new wn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new wn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new wn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw Wm;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=zR(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===ya:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new wn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw Wm;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new wn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=HR(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Yv(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function f3(t,e){return new h3(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p3(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Qv(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Zl(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Lp(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function pf(t){if(!Array.isArray(t))throw new Error("array expected")}function Jl(t,e){if(!Qv(!0,e))throw new Error(`${t}: array of strings expected`)}function g3(t,e){if(!Qv(!1,e))throw new Error(`${t}: array of numbers expected`)}function m3(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function y3(t){const e=typeof t=="string"?t.split(""):t,n=e.length;Jl("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(pf(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(pf(s),s.map(i=>{Zl("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function w3(t=""){return Zl("join",t),{encode:e=>(Jl("join.decode",e),e.join(t)),decode:e=>(Zl("join.decode",e),e.split(t))}}function b3(t,e="="){return Lp(t),Zl("padding",e),{encode(n){for(Jl("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){Jl("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const eE=(t,e)=>e===0?t:eE(e,t%e),Xl=(t,e)=>t+(e-eE(t,e)),Bd=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function Vm(t,e,n,r){if(pf(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Xl(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Xl(e,n)}`);let s=0,i=0;const o=Bd[e],a=Bd[n]-1,c=[];for(const l of t){if(Lp(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=Bd[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function v3(t,e=!1){if(Lp(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Xl(8,t)>32||Xl(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!p3(n))throw new Error("radix2.encode input should be Uint8Array");return Vm(Array.from(n),8,t,!e)},decode:n=>(g3("radix2.decode",n),Uint8Array.from(Vm(n,t,8,e)))}}const E3=m3(v3(5),y3("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),b3(5),w3(""));function Mp(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function tE(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Mp(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function wa(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=tE(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Mp(n)}function C3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,m=0,b=0,C=f.length;b!==C&&f[b]===0;)b++,p++;for(var y=(C-b)*u+1>>>0,E=new Uint8Array(y);b!==C;){for(var w=f[b],v=0,_=y-1;(w!==0||v<m)&&_!==-1;_--,v++)w+=256*E[_]>>>0,E[_]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");m=v,b++}for(var N=y-m;N!==y&&E[N]===0;)N++;for(var x=c.repeat(p);N<y;++N)x+=t.charAt(E[N]);return x}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var m=0,b=0;f[p]===c;)m++,p++;for(var C=(f.length-p)*l+1>>>0,y=new Uint8Array(C);f[p];){var E=n[f.charCodeAt(p)];if(E===255)return;for(var w=0,v=C-1;(E!==0||w<b)&&v!==-1;v--,w++)E+=a*y[v]>>>0,y[v]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=w,p++}if(f[p]!==" "){for(var _=C-b;_!==C&&y[_]===0;)_++;for(var N=new Uint8Array(m+(C-_)),x=m;_!==C;)N[x++]=y[_++];return N}}}function g(f){var p=h(f);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:g}}var _3=C3,A3=_3;const I3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},S3=t=>new TextEncoder().encode(t),x3=t=>new TextDecoder().decode(t);class N3{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class T3{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nE(this,e)}}class P3{constructor(e){this.decoders=e}or(e){return nE(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nE=(t,e)=>new P3({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class O3{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new N3(e,n,r),this.decoder=new T3(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Mu=({name:t,prefix:e,encode:n,decode:r})=>new O3(t,e,n,r),kc=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=A3(n,e);return Mu({prefix:t,name:e,encode:r,decode:i=>I3(s(i))})},R3=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},D3=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Rt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Mu({prefix:e,name:t,encode(s){return D3(s,r,n)},decode(s){return R3(s,r,n,t)}}),$3=Mu({prefix:"\0",name:"identity",encode:t=>x3(t),decode:t=>S3(t)}),k3=Object.freeze(Object.defineProperty({__proto__:null,identity:$3},Symbol.toStringTag,{value:"Module"})),U3=Rt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),B3=Object.freeze(Object.defineProperty({__proto__:null,base2:U3},Symbol.toStringTag,{value:"Module"})),L3=Rt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),M3=Object.freeze(Object.defineProperty({__proto__:null,base8:L3},Symbol.toStringTag,{value:"Module"})),F3=kc({prefix:"9",name:"base10",alphabet:"0123456789"}),j3=Object.freeze(Object.defineProperty({__proto__:null,base10:F3},Symbol.toStringTag,{value:"Module"})),z3=Rt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),q3=Rt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),H3=Object.freeze(Object.defineProperty({__proto__:null,base16:z3,base16upper:q3},Symbol.toStringTag,{value:"Module"})),W3=Rt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),V3=Rt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),G3=Rt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),K3=Rt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Y3=Rt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Z3=Rt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),J3=Rt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),X3=Rt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Q3=Rt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),e5=Object.freeze(Object.defineProperty({__proto__:null,base32:W3,base32hex:Y3,base32hexpad:J3,base32hexpadupper:X3,base32hexupper:Z3,base32pad:G3,base32padupper:K3,base32upper:V3,base32z:Q3},Symbol.toStringTag,{value:"Module"})),t5=kc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),n5=kc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),r5=Object.freeze(Object.defineProperty({__proto__:null,base36:t5,base36upper:n5},Symbol.toStringTag,{value:"Module"})),s5=kc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i5=kc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),o5=Object.freeze(Object.defineProperty({__proto__:null,base58btc:s5,base58flickr:i5},Symbol.toStringTag,{value:"Module"})),a5=Rt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),c5=Rt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),l5=Rt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),u5=Rt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),d5=Object.freeze(Object.defineProperty({__proto__:null,base64:a5,base64pad:c5,base64url:l5,base64urlpad:u5},Symbol.toStringTag,{value:"Module"})),rE=Array.from(""),h5=rE.reduce((t,e,n)=>(t[n]=e,t),[]),f5=rE.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function p5(t){return t.reduce((e,n)=>(e+=h5[n],e),"")}function g5(t){const e=[];for(const n of t){const r=f5[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const m5=Mu({prefix:"",name:"base256emoji",encode:p5,decode:g5}),y5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:m5},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Gm={...k3,...B3,...M3,...j3,...H3,...e5,...r5,...o5,...d5,...y5};function sE(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Km=sE("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ld=sE("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=tE(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),iE={utf8:Km,"utf-8":Km,hex:Gm.base16,latin1:Ld,ascii:Ld,binary:Ld,...Gm};function Rn(t,e="utf8"){const n=iE[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Mp(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ln(t,e="utf8"){const n=iE[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const w5={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Md,Ym;function oE(){if(Ym)return Md;Ym=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function n(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let l=`
`+o+" = ";for(let u=0;u<a.length;u+=2){if(c===32)l+=r(a[u]).toUpperCase(),l+=" ",l+=r(a[u+1]).toUpperCase();else if(c===64)l+=r(a[u+1]).toUpperCase(),l+=r(a[u]).toUpperCase();else throw new Error("Invalid size "+c);u%6===4?l+=`
`+new Array(o.length+4).join(" "):u<a.length-2&&(l+=" ")}console.log(l)}function i(o,a,c){let l=new Date().getTime();const u=new Uint8Array(a);for(let h=0;h<a;h++)u[h]=h%256;const d=new Date().getTime();console.log("Generated random input in "+(d-l)+"ms"),l=d;for(let h=0;h<c;h++){const g=o(u),f=new Date().getTime(),p=f-l;l=f,console.log("Hashed in "+p+"ms: "+g.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(p/1e3)*100)/100+" MB PER SECOND")}}return Md={normalizeInput:e,toHex:n,debugPrint:s,testSpeed:i},Md}var Fd,Zm;function b5(){if(Zm)return Fd;Zm=1;const t=oE();function e(b,C,y){const E=b[C]+b[y];let w=b[C+1]+b[y+1];E>=4294967296&&w++,b[C]=E,b[C+1]=w}function n(b,C,y,E){let w=b[C]+y;y<0&&(w+=4294967296);let v=b[C+1]+E;w>=4294967296&&v++,b[C]=w,b[C+1]=v}function r(b,C){return b[C]^b[C+1]<<8^b[C+2]<<16^b[C+3]<<24}function s(b,C,y,E,w,v){const _=l[w],N=l[w+1],x=l[v],O=l[v+1];e(c,b,C),n(c,b,_,N);let P=c[E]^c[b],k=c[E+1]^c[b+1];c[E]=k,c[E+1]=P,e(c,y,E),P=c[C]^c[y],k=c[C+1]^c[y+1],c[C]=P>>>24^k<<8,c[C+1]=k>>>24^P<<8,e(c,b,C),n(c,b,x,O),P=c[E]^c[b],k=c[E+1]^c[b+1],c[E]=P>>>16^k<<16,c[E+1]=k>>>16^P<<16,e(c,y,E),P=c[C]^c[y],k=c[C+1]^c[y+1],c[C]=k>>>31^P<<1,c[C+1]=P>>>31^k<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(b){return b*2})),c=new Uint32Array(32),l=new Uint32Array(32);function u(b,C){let y=0;for(y=0;y<16;y++)c[y]=b.h[y],c[y+16]=i[y];for(c[24]=c[24]^b.t,c[25]=c[25]^b.t/4294967296,C&&(c[28]=~c[28],c[29]=~c[29]),y=0;y<32;y++)l[y]=r(b.b,4*y);for(y=0;y<12;y++)s(0,8,16,24,a[y*16+0],a[y*16+1]),s(2,10,18,26,a[y*16+2],a[y*16+3]),s(4,12,20,28,a[y*16+4],a[y*16+5]),s(6,14,22,30,a[y*16+6],a[y*16+7]),s(0,10,20,30,a[y*16+8],a[y*16+9]),s(2,12,22,24,a[y*16+10],a[y*16+11]),s(4,14,16,26,a[y*16+12],a[y*16+13]),s(6,8,18,28,a[y*16+14],a[y*16+15]);for(y=0;y<16;y++)b.h[y]=b.h[y]^c[y]^c[y+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function h(b,C,y,E){if(b===0||b>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(C&&C.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(y&&y.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(E&&E.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const w={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:b};d.fill(0),d[0]=b,C&&(d[1]=C.length),d[2]=1,d[3]=1,y&&d.set(y,32),E&&d.set(E,48);for(let v=0;v<16;v++)w.h[v]=i[v]^r(d,v*4);return C&&(g(w,C),w.c=128),w}function g(b,C){for(let y=0;y<C.length;y++)b.c===128&&(b.t+=b.c,u(b,!1),b.c=0),b.b[b.c++]=C[y]}function f(b){for(b.t+=b.c;b.c<128;)b.b[b.c++]=0;u(b,!0);const C=new Uint8Array(b.outlen);for(let y=0;y<b.outlen;y++)C[y]=b.h[y>>2]>>8*(y&3);return C}function p(b,C,y,E,w){y=y||64,b=t.normalizeInput(b),E&&(E=t.normalizeInput(E)),w&&(w=t.normalizeInput(w));const v=h(y,C,E,w);return g(v,b),f(v)}function m(b,C,y,E,w){const v=p(b,C,y,E,w);return t.toHex(v)}return Fd={blake2b:p,blake2bHex:m,blake2bInit:h,blake2bUpdate:g,blake2bFinal:f},Fd}var jd,Jm;function v5(){if(Jm)return jd;Jm=1;const t=oE();function e(f,p){return f[p]^f[p+1]<<8^f[p+2]<<16^f[p+3]<<24}function n(f,p,m,b,C,y){o[f]=o[f]+o[p]+C,o[b]=r(o[b]^o[f],16),o[m]=o[m]+o[b],o[p]=r(o[p]^o[m],12),o[f]=o[f]+o[p]+y,o[b]=r(o[b]^o[f],8),o[m]=o[m]+o[b],o[p]=r(o[p]^o[m],7)}function r(f,p){return f>>>p^f<<32-p}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(f,p){let m=0;for(m=0;m<8;m++)o[m]=f.h[m],o[m+8]=s[m];for(o[12]^=f.t,o[13]^=f.t/4294967296,p&&(o[14]=~o[14]),m=0;m<16;m++)a[m]=e(f.b,4*m);for(m=0;m<10;m++)n(0,4,8,12,a[i[m*16+0]],a[i[m*16+1]]),n(1,5,9,13,a[i[m*16+2]],a[i[m*16+3]]),n(2,6,10,14,a[i[m*16+4]],a[i[m*16+5]]),n(3,7,11,15,a[i[m*16+6]],a[i[m*16+7]]),n(0,5,10,15,a[i[m*16+8]],a[i[m*16+9]]),n(1,6,11,12,a[i[m*16+10]],a[i[m*16+11]]),n(2,7,8,13,a[i[m*16+12]],a[i[m*16+13]]),n(3,4,9,14,a[i[m*16+14]],a[i[m*16+15]]);for(m=0;m<8;m++)f.h[m]^=o[m]^o[m+8]}function l(f,p){if(!(f>0&&f<=32))throw new Error("Incorrect output length, should be in [1, 32]");const m=p?p.length:0;if(p&&!(m>0&&m<=32))throw new Error("Incorrect key length, should be in [1, 32]");const b={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:f};return b.h[0]^=16842752^m<<8^f,m>0&&(u(b,p),b.c=64),b}function u(f,p){for(let m=0;m<p.length;m++)f.c===64&&(f.t+=f.c,c(f,!1),f.c=0),f.b[f.c++]=p[m]}function d(f){for(f.t+=f.c;f.c<64;)f.b[f.c++]=0;c(f,!0);const p=new Uint8Array(f.outlen);for(let m=0;m<f.outlen;m++)p[m]=f.h[m>>2]>>8*(m&3)&255;return p}function h(f,p,m){m=m||32,f=t.normalizeInput(f);const b=l(m,p);return u(b,f),d(b)}function g(f,p,m){const b=h(f,p,m);return t.toHex(b)}return jd={blake2s:h,blake2sHex:g,blake2sInit:l,blake2sUpdate:u,blake2sFinal:d},jd}var zd,Xm;function E5(){if(Xm)return zd;Xm=1;const t=b5(),e=v5();return zd={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},zd}var C5=E5(),_5={};const A5=":";function co(t){const[e,n]=t.split(A5);return{namespace:e,reference:n}}function aE(t,e){return t.includes(":")?[t]:e.chains||[]}var I5=Object.defineProperty,S5=Object.defineProperties,x5=Object.getOwnPropertyDescriptors,Qm=Object.getOwnPropertySymbols,N5=Object.prototype.hasOwnProperty,T5=Object.prototype.propertyIsEnumerable,ey=(t,e,n)=>e in t?I5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e)=>{for(var n in e||(e={}))N5.call(e,n)&&ey(t,n,e[n]);if(Qm)for(var n of Qm(e))T5.call(e,n)&&ey(t,n,e[n]);return t},P5=(t,e)=>S5(t,x5(e));const O5="ReactNative",vn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},R5="js";function Ql(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ws(){return!Xr.getDocument()&&!!Xr.getNavigator()&&navigator.product===O5}function D5(){return Ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function $5(){return Ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Oo(){return!Ql()&&!!Xr.getNavigator()&&!!Xr.getDocument()}function Uc(){return Ws()?vn.reactNative:Ql()?vn.node:Oo()?vn.browser:vn.unknown}function ny(){var t;try{return Ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function k5(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function U5(t){var e,n;const r=cE();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),P5(ty(ty({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function cE(){return dR.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function B5(){if(Uc()===vn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=sR();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function L5(){var t;const e=Uc();return e===vn.browser?[e,((t=Xr.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function lE(t,e,n){const r=B5(),s=L5();return[[t,e].join("-"),[R5,n].join("-"),r,s].join("/")}function M5({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=lE(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=k5(l[1]||"",d);return l[0]+"?"+h}function ai(t,e){return t.filter(n=>e.includes(n)).length===t.length}function gf(t){return Object.fromEntries(t.entries())}function mf(t){return new Map(Object.entries(t))}function ei(t=W.FIVE_MINUTES,e){const n=W.toMiliseconds(t||W.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function As(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function uE(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function F5(t){return uE("topic",t)}function j5(t){return uE("id",t)}function dE(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function ht(t,e){return W.fromMiliseconds(Date.now()+W.toMiliseconds(t))}function ms(t){return Date.now()>=W.toMiliseconds(t)}function Ue(t,e){return`${t}${e?`:${e}`:""}`}function Er(t=[],e=[]){return[...new Set([...t,...e])]}async function z5({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=q5(i,t,e),a=Uc();if(a===vn.browser){if(!((r=Xr.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}H5(o)}else a===vn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function q5(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${K5(r,!0)}`}else s=`${s}/wc?${r}`;return s}function H5(t){let e="_self";G5()?e="_top":(V5()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function W5(t,e){let n="";try{if(Oo()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function ry(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function sy(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Fp(){return typeof process<"u"&&_5.IS_VITEST==="true"}function V5(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function G5(){try{return window.self!==window.top}catch{return!1}}function K5(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function hE(t){return Buffer.from(t,"base64").toString("utf-8")}function Y5(t){return new Promise(e=>setTimeout(e,t))}const cl=BigInt(2**32-1),iy=BigInt(32);function fE(t,e=!1){return e?{h:Number(t&cl),l:Number(t>>iy&cl)}:{h:Number(t>>iy&cl)|0,l:Number(t&cl)|0}}function pE(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=fE(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const oy=(t,e,n)=>t>>>n,ay=(t,e,n)=>t<<32-n|e>>>n,ys=(t,e,n)=>t>>>n|e<<32-n,ws=(t,e,n)=>t<<32-n|e>>>n,la=(t,e,n)=>t<<64-n|e>>>n-32,ua=(t,e,n)=>t>>>n-32|e<<64-n,Z5=(t,e)=>e,J5=(t,e)=>t,X5=(t,e,n)=>t<<n|e>>>32-n,Q5=(t,e,n)=>e<<n|t>>>32-n,eD=(t,e,n)=>e<<n-32|t>>>64-n,tD=(t,e,n)=>t<<n-32|e>>>64-n;function Wn(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const jp=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),zp=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,nD=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),rD=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,sD=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),iD=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Fi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function oD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Qr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ms(t,...e){if(!oD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qp(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Qr(t.outputLen),Qr(t.blockLen)}function Fs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Hp(t,e){Ms(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function rc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function kn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function qd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function lr(t,e){return t<<32-e|t>>>e}const gE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function mE(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Mr=gE?t=>t:t=>mE(t);function aD(t){for(let e=0;e<t.length;e++)t[e]=mE(t[e]);return t}const bs=gE?t=>t:aD;function cD(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Qn(t){return typeof t=="string"&&(t=cD(t)),Ms(t),t}function lD(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ms(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Fu=class{};function Bc(t){const e=r=>t().update(Qn(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function uD(t){const e=(r,s)=>t(s).update(Qn(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Ro(t=32){if(Fi&&typeof Fi.getRandomValues=="function")return Fi.getRandomValues(new Uint8Array(t));if(Fi&&typeof Fi.randomBytes=="function")return Uint8Array.from(Fi.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const dD=BigInt(0),Vo=BigInt(1),hD=BigInt(2),fD=BigInt(7),pD=BigInt(256),gD=BigInt(113),yE=[],wE=[],bE=[];for(let t=0,e=Vo,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],yE.push(2*(5*r+n)),wE.push((t+1)*(t+2)/2%64);let s=dD;for(let i=0;i<7;i++)e=(e<<Vo^(e>>fD)*gD)%pD,e&hD&&(s^=Vo<<(Vo<<BigInt(i))-Vo);bE.push(s)}const vE=pE(bE,!0),mD=vE[0],yD=vE[1],cy=(t,e,n)=>n>32?eD(t,e,n):X5(t,e,n),ly=(t,e,n)=>n>32?tD(t,e,n):Q5(t,e,n);function wD(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=cy(l,u,1)^n[a],h=ly(l,u,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=wE[o],c=cy(s,i,a),l=ly(s,i,a),u=yE[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=mD[r],t[1]^=yD[r]}kn(n)}let bD=class EE extends Fu{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Qr(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=rc(this.state)}clone(){return this._cloneInto()}keccak(){bs(this.state32),wD(this.state32,this.rounds),bs(this.state32),this.posOut=0,this.pos=0}update(e){Fs(this),e=Qn(e),Ms(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Fs(this,!1),Ms(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Qr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Hp(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,kn(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new EE(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const vD=(t,e,n)=>Bc(()=>new bD(e,t,n)),ED=vD(1,136,256/8);function CD(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function _D(t,e,n){return t&e^~t&n}function AD(t,e,n){return t&e^t&n^e&n}let CE=class extends Fu{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=qd(this.buffer)}update(e){Fs(this),e=Qn(e),Ms(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=qd(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fs(this),Hp(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,kn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;CD(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=qd(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const ls=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$t=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),kt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ID=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),us=new Uint32Array(64);class SD extends CE{constructor(e=32){super(64,e,8,!1),this.A=ls[0]|0,this.B=ls[1]|0,this.C=ls[2]|0,this.D=ls[3]|0,this.E=ls[4]|0,this.F=ls[5]|0,this.G=ls[6]|0,this.H=ls[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)us[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=us[d-15],g=us[d-2],f=lr(h,7)^lr(h,18)^h>>>3,p=lr(g,17)^lr(g,19)^g>>>10;us[d]=p+us[d-7]+f+us[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=lr(a,6)^lr(a,11)^lr(a,25),g=u+h+_D(a,c,l)+ID[d]+us[d]|0,f=(lr(r,2)^lr(r,13)^lr(r,22))+AD(r,s,i)|0;u=l,l=c,c=a,a=o+g|0,o=i,i=s,s=r,r=g+f|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){kn(us)}destroy(){this.set(0,0,0,0,0,0,0,0),kn(this.buffer)}}const _E=pE(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),xD=_E[0],ND=_E[1],ds=new Uint32Array(80),hs=new Uint32Array(80);let Wp=class extends CE{constructor(e=64){super(128,e,16,!1),this.Ah=kt[0]|0,this.Al=kt[1]|0,this.Bh=kt[2]|0,this.Bl=kt[3]|0,this.Ch=kt[4]|0,this.Cl=kt[5]|0,this.Dh=kt[6]|0,this.Dl=kt[7]|0,this.Eh=kt[8]|0,this.El=kt[9]|0,this.Fh=kt[10]|0,this.Fl=kt[11]|0,this.Gh=kt[12]|0,this.Gl=kt[13]|0,this.Hh=kt[14]|0,this.Hl=kt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:g,Gl:f,Hh:p,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,g,f,p,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,g,f,p,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=g|0,this.Gl=f|0,this.Hh=p|0,this.Hl=m|0}process(e,n){for(let y=0;y<16;y++,n+=4)ds[y]=e.getUint32(n),hs[y]=e.getUint32(n+=4);for(let y=16;y<80;y++){const E=ds[y-15]|0,w=hs[y-15]|0,v=ys(E,w,1)^ys(E,w,8)^oy(E,w,7),_=ws(E,w,1)^ws(E,w,8)^ay(E,w,7),N=ds[y-2]|0,x=hs[y-2]|0,O=ys(N,x,19)^la(N,x,61)^oy(N,x,6),P=ws(N,x,19)^ua(N,x,61)^ay(N,x,6),k=nD(_,P,hs[y-7],hs[y-16]),B=rD(k,v,O,ds[y-7],ds[y-16]);ds[y]=B|0,hs[y]=k|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:g,Fl:f,Gh:p,Gl:m,Hh:b,Hl:C}=this;for(let y=0;y<80;y++){const E=ys(d,h,14)^ys(d,h,18)^la(d,h,41),w=ws(d,h,14)^ws(d,h,18)^ua(d,h,41),v=d&g^~d&p,_=h&f^~h&m,N=sD(C,w,_,ND[y],hs[y]),x=iD(N,b,E,v,xD[y],ds[y]),O=N|0,P=ys(r,s,28)^la(r,s,34)^la(r,s,39),k=ws(r,s,28)^ua(r,s,34)^ua(r,s,39),B=r&i^r&a^i&a,L=s&o^s&c^o&c;b=p|0,C=m|0,p=g|0,m=f|0,g=d|0,f=h|0,{h:d,l:h}=Wn(l|0,u|0,x|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=jp(O,k,L);r=zp(I,x,P,B),s=I|0}({h:r,l:s}=Wn(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Wn(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Wn(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Wn(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Wn(this.Eh|0,this.El|0,d|0,h|0),{h:g,l:f}=Wn(this.Fh|0,this.Fl|0,g|0,f|0),{h:p,l:m}=Wn(this.Gh|0,this.Gl|0,p|0,m|0),{h:b,l:C}=Wn(this.Hh|0,this.Hl|0,b|0,C|0),this.set(r,s,i,o,a,c,l,u,d,h,g,f,p,m,b,C)}roundClean(){kn(ds,hs)}destroy(){kn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class TD extends Wp{constructor(){super(48),this.Ah=$t[0]|0,this.Al=$t[1]|0,this.Bh=$t[2]|0,this.Bl=$t[3]|0,this.Ch=$t[4]|0,this.Cl=$t[5]|0,this.Dh=$t[6]|0,this.Dl=$t[7]|0,this.Eh=$t[8]|0,this.El=$t[9]|0,this.Fh=$t[10]|0,this.Fl=$t[11]|0,this.Gh=$t[12]|0,this.Gl=$t[13]|0,this.Hh=$t[14]|0,this.Hl=$t[15]|0}}const Ut=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class PD extends Wp{constructor(){super(32),this.Ah=Ut[0]|0,this.Al=Ut[1]|0,this.Bh=Ut[2]|0,this.Bl=Ut[3]|0,this.Ch=Ut[4]|0,this.Cl=Ut[5]|0,this.Dh=Ut[6]|0,this.Dl=Ut[7]|0,this.Eh=Ut[8]|0,this.El=Ut[9]|0,this.Fh=Ut[10]|0,this.Fl=Ut[11]|0,this.Gh=Ut[12]|0,this.Gl=Ut[13]|0,this.Hh=Ut[14]|0,this.Hl=Ut[15]|0}}const ju=Bc(()=>new SD),OD=Bc(()=>new Wp),RD=Bc(()=>new TD),DD=Bc(()=>new PD),$D=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),dt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),X=new Uint32Array(32);function fs(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=X[2*t],l=X[2*t+1],u=X[2*e],d=X[2*e+1],h=X[2*n],g=X[2*n+1],f=X[2*r],p=X[2*r+1],m=jp(c,u,o);l=zp(m,l,d,a),c=m|0,{Dh:p,Dl:f}={Dh:p^l,Dl:f^c},{Dh:p,Dl:f}={Dh:Z5(p,f),Dl:J5(p)},{h:g,l:h}=Wn(g,h,p,f),{Bh:d,Bl:u}={Bh:d^g,Bl:u^h},{Bh:d,Bl:u}={Bh:ys(d,u,24),Bl:ws(d,u,24)},X[2*t]=c,X[2*t+1]=l,X[2*e]=u,X[2*e+1]=d,X[2*n]=h,X[2*n+1]=g,X[2*r]=f,X[2*r+1]=p}function ps(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=X[2*t],l=X[2*t+1],u=X[2*e],d=X[2*e+1],h=X[2*n],g=X[2*n+1],f=X[2*r],p=X[2*r+1],m=jp(c,u,o);l=zp(m,l,d,a),c=m|0,{Dh:p,Dl:f}={Dh:p^l,Dl:f^c},{Dh:p,Dl:f}={Dh:ys(p,f,16),Dl:ws(p,f,16)},{h:g,l:h}=Wn(g,h,p,f),{Bh:d,Bl:u}={Bh:d^g,Bl:u^h},{Bh:d,Bl:u}={Bh:la(d,u,63),Bl:ua(d,u,63)},X[2*t]=c,X[2*t+1]=l,X[2*e]=u,X[2*e+1]=d,X[2*n]=h,X[2*n+1]=g,X[2*r]=f,X[2*r+1]=p}function kD(t,e={},n,r,s){if(Qr(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class UD extends Fu{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Qr(e),Qr(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=rc(this.buffer)}update(e){Fs(this),e=Qn(e),Ms(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(bs(s),this.compress(s,0,!1),bs(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));bs(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);bs(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Fs(this),Hp(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,kn(this.buffer.subarray(n)),bs(r),this.compress(r,0,!0),bs(r);const s=rc(e);this.get().forEach((i,o)=>s[o]=Mr(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class BD extends UD{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=dt[0]|0,this.v0h=dt[1]|0,this.v1l=dt[2]|0,this.v1h=dt[3]|0,this.v2l=dt[4]|0,this.v2h=dt[5]|0,this.v3l=dt[6]|0,this.v3h=dt[7]|0,this.v4l=dt[8]|0,this.v4h=dt[9]|0,this.v5l=dt[10]|0,this.v5h=dt[11]|0,this.v6l=dt[12]|0,this.v6h=dt[13]|0,this.v7l=dt[14]|0,this.v7h=dt[15]|0,kD(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Qn(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Qn(i);const a=rc(i);this.v4l^=Mr(a[0]),this.v4h^=Mr(a[1]),this.v5l^=Mr(a[2]),this.v5h^=Mr(a[3])}if(s!==void 0){s=Qn(s);const a=rc(s);this.v6l^=Mr(a[0]),this.v6h^=Mr(a[1]),this.v7l^=Mr(a[2]),this.v7h^=Mr(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:g,v6h:f,v7l:p,v7h:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,g,f,p,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,g,f,p,m){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=g|0,this.v6h=f|0,this.v7l=p|0,this.v7h=m|0}compress(e,n,r){this.get().forEach((c,l)=>X[l]=c),X.set(dt,16);let{h:s,l:i}=fE(BigInt(this.length));X[24]=dt[8]^i,X[25]=dt[9]^s,r&&(X[28]=~X[28],X[29]=~X[29]);let o=0;const a=$D;for(let c=0;c<12;c++)fs(0,4,8,12,e,n+2*a[o++]),ps(0,4,8,12,e,n+2*a[o++]),fs(1,5,9,13,e,n+2*a[o++]),ps(1,5,9,13,e,n+2*a[o++]),fs(2,6,10,14,e,n+2*a[o++]),ps(2,6,10,14,e,n+2*a[o++]),fs(3,7,11,15,e,n+2*a[o++]),ps(3,7,11,15,e,n+2*a[o++]),fs(0,5,10,15,e,n+2*a[o++]),ps(0,5,10,15,e,n+2*a[o++]),fs(1,6,11,12,e,n+2*a[o++]),ps(1,6,11,12,e,n+2*a[o++]),fs(2,7,8,13,e,n+2*a[o++]),ps(2,7,8,13,e,n+2*a[o++]),fs(3,4,9,14,e,n+2*a[o++]),ps(3,4,9,14,e,n+2*a[o++]);this.v0l^=X[0]^X[16],this.v0h^=X[1]^X[17],this.v1l^=X[2]^X[18],this.v1h^=X[3]^X[19],this.v2l^=X[4]^X[20],this.v2h^=X[5]^X[21],this.v3l^=X[6]^X[22],this.v3h^=X[7]^X[23],this.v4l^=X[8]^X[24],this.v4h^=X[9]^X[25],this.v5l^=X[10]^X[26],this.v5h^=X[11]^X[27],this.v6l^=X[12]^X[28],this.v6h^=X[13]^X[29],this.v7l^=X[14]^X[30],this.v7h^=X[15]^X[31],kn(X)}destroy(){this.destroyed=!0,kn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const LD=uD(t=>new BD(t)),MD="https://rpc.walletconnect.org/v1";function AE(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(ED(n)).toString("hex")}async function FD(t,e,n,r,s,i){switch(n.t){case"eip191":return await jD(t,e,n.s);case"eip1271":return await zD(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function jD(t,e,n){return(await TR({hash:AE(e),signature:n})).toLowerCase()===t.toLowerCase()}async function zD(t,e,n,r,s,i){const o=co(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=AE(e).substring(2),h=a+d+c+l+u,g=await fetch(`${i||MD}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:qD(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:f}=await g.json();return f?f.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function qD(){return Date.now()+Math.floor(Math.random()*1e3)}function HD(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Po.encode(i)}function WD(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=LD(r,{dkLen:32});return Po.encode(s)}function uy(t){const e=new Uint8Array(ju(VD(t)));return Po.encode(e)}function VD(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function dy(t){const e=Buffer.from(t,"base64"),n=f3(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=s3(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=DD(i);return E3.encode(o).replace(/=+$/,"")}function Hd(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function GD(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(Hd(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(Hd(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(Hd(r.length)),s.push(r);const i=Buffer.concat(s),o=ju(i);return Buffer.from(o).toString("hex").toUpperCase()}var KD=Object.defineProperty,YD=Object.defineProperties,ZD=Object.getOwnPropertyDescriptors,hy=Object.getOwnPropertySymbols,JD=Object.prototype.hasOwnProperty,XD=Object.prototype.propertyIsEnumerable,fy=(t,e,n)=>e in t?KD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QD=(t,e)=>{for(var n in e||(e={}))JD.call(e,n)&&fy(t,n,e[n]);if(hy)for(var n of hy(e))XD.call(e,n)&&fy(t,n,e[n]);return t},e$=(t,e)=>YD(t,ZD(e));const t$="did:pkh:",Vp=t=>t==null?void 0:t.split(":"),n$=t=>{const e=t&&Vp(t);if(e)return t.includes(t$)?e[3]:e[1]},yf=t=>{const e=t&&Vp(t);if(e)return e[2]+":"+e[3]},eu=t=>{const e=t&&Vp(t);if(e)return e.pop()};async function py(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=IE(s,s.iss),o=eu(s.iss);return await FD(o,i,r,yf(s.iss),n)}const IE=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=eu(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${n$(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(p=>`
- ${p}`).join("")}`:void 0,f=xl(t.resources);if(f){const p=sc(f);s=d$(s,p)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,g].filter(p=>p!=null).join(`
`)};function r$(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function s$(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ci(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function i$(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:o$(e,n,r)}}}function o$(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function SE(t){return Ci(t),`urn:recap:${r$(t).replace(/=/g,"")}`}function sc(t){const e=s$(t.replace("urn:recap:",""));return Ci(e),e}function a$(t,e,n){const r=i$(t,e,n);return SE(r)}function c$(t){return t&&t.includes("urn:recap:")}function l$(t,e){const n=sc(t),r=sc(e),s=u$(n,r);return SE(s)}function u$(t,e){Ci(t),Ci(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=e$(QD({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function d$(t="",e){Ci(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function gy(t){var e;const n=sc(t);Ci(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function my(t){const e=sc(t);Ci(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function xl(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return c$(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function xE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function wf(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Wd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function sn(t,...e){if(!xE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function yy(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function h$(t,e){sn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ts(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function wo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function f$(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const p$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function g$(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function bf(t){if(typeof t=="string")t=g$(t);else if(xE(t))t=vf(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function m$(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function y$(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const w$=(t,e)=>{function n(r,...s){if(sn(r),!p$)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?sn(l):sn(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&sn(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");sn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,sn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(sn(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function wy(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!v$(e))throw new Error("invalid output, must be aligned");return e}function by(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function b$(t,e,n){wf(n);const r=new Uint8Array(16),s=f$(r);return by(s,0,BigInt(e),n),by(s,8,BigInt(t),n),r}function v$(t){return t.byteOffset%4===0}function vf(t){return Uint8Array.from(t)}const NE=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),E$=NE("expand 16-byte k"),C$=NE("expand 32-byte k"),_$=Ts(E$),A$=Ts(C$);function Oe(t,e){return t<<e|t>>>32-e}function Ef(t){return t.byteOffset%4===0}const ll=64,I$=16,TE=2**32-1,vy=new Uint32Array;function S$(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(ll),u=Ts(l),d=Ef(s)&&Ef(i),h=d?Ts(s):vy,g=d?Ts(i):vy;for(let f=0;f<c;o++){if(t(e,n,r,u,o,a),o>=TE)throw new Error("arx: counter overflow");const p=Math.min(ll,c-f);if(d&&p===ll){const m=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let b=0,C;b<I$;b++)C=m+b,g[C]=h[C]^u[b];f+=ll;continue}for(let m=0,b;m<p;m++)b=f+m,i[b]=s[b]^l[m];f+=p}}function x$(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=m$({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Wd(s),Wd(o),wf(i),wf(n),(a,c,l,u,d=0)=>{sn(a),sn(c),sn(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),sn(u),Wd(d),d<0||d>=TE)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const g=[];let f=a.length,p,m;if(f===32)g.push(p=vf(a)),m=A$;else if(f===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),m=_$,g.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${f}`);Ef(c)||g.push(c=vf(c));const b=Ts(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,b,Ts(c.subarray(0,16)),b),c=c.subarray(16)}const C=16-s;if(C!==c.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(C!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,g.push(c)}const y=Ts(c);return S$(t,m,b,y,l,u,d,o),wo(...g),u}}const _t=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class N${constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=bf(e),sn(e,32);const n=_t(e,0),r=_t(e,2),s=_t(e,4),i=_t(e,6),o=_t(e,8),a=_t(e,10),c=_t(e,12),l=_t(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=_t(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],g=o[6],f=o[7],p=o[8],m=o[9],b=_t(e,n+0),C=_t(e,n+2),y=_t(e,n+4),E=_t(e,n+6),w=_t(e,n+8),v=_t(e,n+10),_=_t(e,n+12),N=_t(e,n+14);let x=i[0]+(b&8191),O=i[1]+((b>>>13|C<<3)&8191),P=i[2]+((C>>>10|y<<6)&8191),k=i[3]+((y>>>7|E<<9)&8191),B=i[4]+((E>>>4|w<<12)&8191),L=i[5]+(w>>>1&8191),I=i[6]+((w>>>14|v<<2)&8191),S=i[7]+((v>>>11|_<<5)&8191),R=i[8]+((_>>>8|N<<8)&8191),U=i[9]+(N>>>5|s),D=0,$=D+x*a+O*(5*m)+P*(5*p)+k*(5*f)+B*(5*g);D=$>>>13,$&=8191,$+=L*(5*h)+I*(5*d)+S*(5*u)+R*(5*l)+U*(5*c),D+=$>>>13,$&=8191;let q=D+x*c+O*a+P*(5*m)+k*(5*p)+B*(5*f);D=q>>>13,q&=8191,q+=L*(5*g)+I*(5*h)+S*(5*d)+R*(5*u)+U*(5*l),D+=q>>>13,q&=8191;let Z=D+x*l+O*c+P*a+k*(5*m)+B*(5*p);D=Z>>>13,Z&=8191,Z+=L*(5*f)+I*(5*g)+S*(5*h)+R*(5*d)+U*(5*u),D+=Z>>>13,Z&=8191;let oe=D+x*u+O*l+P*c+k*a+B*(5*m);D=oe>>>13,oe&=8191,oe+=L*(5*p)+I*(5*f)+S*(5*g)+R*(5*h)+U*(5*d),D+=oe>>>13,oe&=8191;let J=D+x*d+O*u+P*l+k*c+B*a;D=J>>>13,J&=8191,J+=L*(5*m)+I*(5*p)+S*(5*f)+R*(5*g)+U*(5*h),D+=J>>>13,J&=8191;let le=D+x*h+O*d+P*u+k*l+B*c;D=le>>>13,le&=8191,le+=L*a+I*(5*m)+S*(5*p)+R*(5*f)+U*(5*g),D+=le>>>13,le&=8191;let he=D+x*g+O*h+P*d+k*u+B*l;D=he>>>13,he&=8191,he+=L*c+I*a+S*(5*m)+R*(5*p)+U*(5*f),D+=he>>>13,he&=8191;let xe=D+x*f+O*g+P*h+k*d+B*u;D=xe>>>13,xe&=8191,xe+=L*l+I*c+S*a+R*(5*m)+U*(5*p),D+=xe>>>13,xe&=8191;let ze=D+x*p+O*f+P*g+k*h+B*d;D=ze>>>13,ze&=8191,ze+=L*u+I*l+S*c+R*a+U*(5*m),D+=ze>>>13,ze&=8191;let Ae=D+x*m+O*p+P*f+k*g+B*h;D=Ae>>>13,Ae&=8191,Ae+=L*d+I*u+S*l+R*c+U*a,D+=Ae>>>13,Ae&=8191,D=(D<<2)+D|0,D=D+$|0,$=D&8191,D=D>>>13,q+=D,i[0]=$,i[1]=q,i[2]=Z,i[3]=oe,i[4]=J,i[5]=le,i[6]=he,i[7]=xe,i[8]=ze,i[9]=Ae}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;wo(r)}update(e){yy(this),e=bf(e),sn(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){wo(this.h,this.r,this.buffer,this.pad)}digestInto(e){yy(this),h$(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function T$(t){const e=(r,s)=>t(s).update(bf(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const P$=T$(t=>new N$(t));function O$(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],g=e[3],f=e[4],p=e[5],m=e[6],b=e[7],C=s,y=n[0],E=n[1],w=n[2],v=o,_=a,N=c,x=l,O=u,P=d,k=h,B=g,L=f,I=p,S=m,R=b,U=C,D=y,$=E,q=w;for(let oe=0;oe<i;oe+=2)v=v+O|0,U=Oe(U^v,16),L=L+U|0,O=Oe(O^L,12),v=v+O|0,U=Oe(U^v,8),L=L+U|0,O=Oe(O^L,7),_=_+P|0,D=Oe(D^_,16),I=I+D|0,P=Oe(P^I,12),_=_+P|0,D=Oe(D^_,8),I=I+D|0,P=Oe(P^I,7),N=N+k|0,$=Oe($^N,16),S=S+$|0,k=Oe(k^S,12),N=N+k|0,$=Oe($^N,8),S=S+$|0,k=Oe(k^S,7),x=x+B|0,q=Oe(q^x,16),R=R+q|0,B=Oe(B^R,12),x=x+B|0,q=Oe(q^x,8),R=R+q|0,B=Oe(B^R,7),v=v+P|0,q=Oe(q^v,16),S=S+q|0,P=Oe(P^S,12),v=v+P|0,q=Oe(q^v,8),S=S+q|0,P=Oe(P^S,7),_=_+k|0,U=Oe(U^_,16),R=R+U|0,k=Oe(k^R,12),_=_+k|0,U=Oe(U^_,8),R=R+U|0,k=Oe(k^R,7),N=N+B|0,D=Oe(D^N,16),L=L+D|0,B=Oe(B^L,12),N=N+B|0,D=Oe(D^N,8),L=L+D|0,B=Oe(B^L,7),x=x+O|0,$=Oe($^x,16),I=I+$|0,O=Oe(O^I,12),x=x+O|0,$=Oe($^x,8),I=I+$|0,O=Oe(O^I,7);let Z=0;r[Z++]=o+v|0,r[Z++]=a+_|0,r[Z++]=c+N|0,r[Z++]=l+x|0,r[Z++]=u+O|0,r[Z++]=d+P|0,r[Z++]=h+k|0,r[Z++]=g+B|0,r[Z++]=f+L|0,r[Z++]=p+I|0,r[Z++]=m+S|0,r[Z++]=b+R|0,r[Z++]=C+U|0,r[Z++]=y+D|0,r[Z++]=E+$|0,r[Z++]=w+q|0}const R$=x$(O$,{counterRight:!1,counterLength:4,allowShortKeys:!1}),D$=new Uint8Array(16),Ey=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(D$.subarray(n))},$$=new Uint8Array(32);function Cy(t,e,n,r,s){const i=t(e,n,$$),o=P$.create(i);s&&Ey(o,s),Ey(o,r);const a=b$(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return wo(i,a),c}const k$=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=wy(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Cy(t,e,n,a,r);return i.set(c,o),wo(c),i},decrypt(s,i){i=wy(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Cy(t,e,n,o,r);if(!y$(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),wo(c),i}}),PE=w$({blockSize:64,nonceLength:12,tagLength:16},k$(R$));let OE=class extends Fu{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,qp(e);const r=Qn(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),kn(i)}update(e){return Fs(this),this.iHash.update(e),this}digestInto(e){Fs(this),Ms(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const zu=(t,e,n)=>new OE(t,e).update(n).digest();zu.create=(t,e)=>new OE(t,e);function U$(t,e,n){return qp(t),n===void 0&&(n=new Uint8Array(t.outputLen)),zu(t,Qn(n),Qn(e))}const Vd=Uint8Array.from([0]),_y=Uint8Array.of();function B$(t,e,n,r=32){qp(t),Qr(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=_y);const o=new Uint8Array(i*s),a=zu.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)Vd[0]=u+1,c.update(u===0?_y:l).update(n).update(Vd).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),kn(l,Vd),o.slice(0,r)}const L$=(t,e,n,r,s)=>B$(t,U$(t,e,n),r,s),qu=ju;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gp=BigInt(0),Cf=BigInt(1);function Lc(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Kp(t){if(!Lc(t))throw new Error("Uint8Array expected")}function ic(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function ul(t){const e=t.toString(16);return e.length&1?"0"+e:e}function RE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Gp:BigInt("0x"+t)}const DE=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",M$=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function oc(t){if(Kp(t),DE)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=M$[t[n]];return e}const Ur={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ay(t){if(t>=Ur._0&&t<=Ur._9)return t-Ur._0;if(t>=Ur.A&&t<=Ur.F)return t-(Ur.A-10);if(t>=Ur.a&&t<=Ur.f)return t-(Ur.a-10)}function tu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(DE)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Ay(t.charCodeAt(i)),a=Ay(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function di(t){return RE(oc(t))}function nu(t){return Kp(t),RE(oc(Uint8Array.from(t).reverse()))}function Mc(t,e){return tu(t.toString(16).padStart(e*2,"0"))}function Yp(t,e){return Mc(t,e).reverse()}function rn(t,e,n){let r;if(typeof e=="string")try{r=tu(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Lc(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function ru(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Kp(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Gd=t=>typeof t=="bigint"&&Gp<=t;function Zp(t,e,n){return Gd(t)&&Gd(e)&&Gd(n)&&e<=t&&t<n}function Ps(t,e,n,r){if(!Zp(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function F$(t){let e;for(e=0;t>Gp;t>>=Cf,e+=1);return e}const Hu=t=>(Cf<<BigInt(t))-Cf,Kd=t=>new Uint8Array(t),Iy=t=>Uint8Array.from(t);function j$(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Kd(t),s=Kd(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=Kd(0))=>{s=a(Iy([0]),u),r=a(),u.length!==0&&(s=a(Iy([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return ru(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const z$={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Lc(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Fc(t,e,n={}){const r=(s,i,o)=>{const a=z$[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Sy(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const an=BigInt(0),zt=BigInt(1),ci=BigInt(2),q$=BigInt(3),$E=BigInt(4),kE=BigInt(5),UE=BigInt(8);function on(t,e){const n=t%e;return n>=an?n:e+n}function Hn(t,e,n){let r=t;for(;e-- >an;)r*=r,r%=n;return r}function _f(t,e){if(t===an)throw new Error("invert: expected non-zero number");if(e<=an)throw new Error("invert: expected positive modulus, got "+e);let n=on(t,e),r=e,s=an,i=zt;for(;n!==an;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==zt)throw new Error("invert: does not exist");return on(s,e)}function BE(t,e){const n=(t.ORDER+zt)/$E,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function H$(t,e){const n=(t.ORDER-kE)/UE,r=t.mul(e,ci),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,ci),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function W$(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-zt,n=0;for(;e%ci===an;)e/=ci,n++;let r=ci;const s=jc(t);for(;xy(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return BE;let i=s.pow(r,e);const o=(e+zt)/ci;return function(a,c){if(a.is0(c))return c;if(xy(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let g=1,f=a.sqr(d);for(;!a.eql(f,a.ONE);)if(g++,f=a.sqr(f),g===l)throw new Error("Cannot find square root");const p=zt<<BigInt(l-g-1),m=a.pow(u,p);l=g,u=a.sqr(m),d=a.mul(d,u),h=a.mul(h,m)}return h}}function V$(t){return t%$E===q$?BE:t%UE===kE?H$:W$(t)}const G$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function K$(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=G$.reduce((r,s)=>(r[s]="function",r),e);return Fc(t,n)}function Y$(t,e,n){if(n<an)throw new Error("invalid exponent, negatives unsupported");if(n===an)return t.ONE;if(n===zt)return e;let r=t.ONE,s=e;for(;n>an;)n&zt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=zt;return r}function LE(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function xy(t,e){const n=(t.ORDER-zt)/ci,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ME(t,e){e!==void 0&&Qr(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function jc(t,e,n=!1,r={}){if(t<=an)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=ME(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Hu(s),ZERO:an,ONE:zt,create:c=>on(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return an<=c&&c<t},is0:c=>c===an,isOdd:c=>(c&zt)===zt,neg:c=>on(-c,t),eql:(c,l)=>c===l,sqr:c=>on(c*c,t),add:(c,l)=>on(c+l,t),sub:(c,l)=>on(c-l,t),mul:(c,l)=>on(c*l,t),pow:(c,l)=>Y$(a,c,l),div:(c,l)=>on(c*_f(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>_f(c,t),sqrt:r.sqrt||(c=>(o||(o=V$(t)),o(a,c))),toBytes:c=>n?Yp(c,i):Mc(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?nu(c):di(c)},invertBatch:c=>LE(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function FE(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function jE(t){const e=FE(t);return e+Math.ceil(e/2)}function Z$(t,e,n=!1){const r=t.length,s=FE(e),i=jE(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?nu(t):di(t),a=on(o,e-zt)+zt;return n?Yp(a,s):Mc(a,s)}const Ny=BigInt(0),Af=BigInt(1);function Yd(t,e){const n=e.negate();return t?n:e}function zE(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Zd(t,e){zE(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Hu(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Ty(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Af);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,g=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:g,offsetF:l}}function J$(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function X$(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Jd=new WeakMap,qE=new WeakMap;function Xd(t){return qE.get(t)||1}function Q$(t,e){return{constTimeNegate:Yd,hasPrecomputes(n){return Xd(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Ny;)r&Af&&(s=s.add(i)),i=i.double(),r>>=Af;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Zd(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Zd(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:g,offsetF:f}=Ty(s,c,a);s=l,d?o=o.add(Yd(g,r[f])):i=i.add(Yd(h,r[u]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Zd(n,e);for(let a=0;a<o.windows&&s!==Ny;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=Ty(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return i},getPrecomputes(n,r,s){let i=Jd.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Jd.set(r,s(i))),i},wNAFCached(n,r,s){const i=Xd(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Xd(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){zE(r,e),qE.set(n,r),Jd.delete(n)}}}function ek(t,e,n,r){J$(n,t),X$(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=F$(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Hu(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let g=d;g>=0;g-=c){u.fill(o);for(let p=0;p<i;p++){const m=r[p],b=Number(m>>BigInt(g)&l);u[b]=u[b].add(n[p])}let f=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),f=f.add(m);if(h=h.add(f),g!==0)for(let p=0;p<c;p++)h=h.double()}return h}function HE(t){return K$(t.Fp),Fc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ME(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Go=BigInt(0),ji=BigInt(1),dl=BigInt(2);function tk(t){return Fc(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function nk(t){const e=tk(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i}=e,o=r==="x25519";if(!o&&r!=="x448")throw new Error("invalid type");const a=o?255:448,c=o?32:56,l=BigInt(o?9:5),u=BigInt(o?121665:39081),d=o?dl**BigInt(254):dl**BigInt(447),h=o?BigInt(8)*dl**BigInt(251)-ji:BigInt(4)*dl**BigInt(445)-ji,g=d+h+ji,f=_=>on(_,n),p=m(l);function m(_){return Yp(f(_),c)}function b(_){const N=rn("u coordinate",_,c);return o&&(N[31]&=127),f(nu(N))}function C(_){return nu(s(rn("scalar",_,c)))}function y(_,N){const x=v(b(N),C(_));if(x===Go)throw new Error("invalid private or public key received");return m(x)}function E(_){return y(_,p)}function w(_,N,x){const O=f(_*(N-x));return N=f(N-O),x=f(x+O),{x_2:N,x_3:x}}function v(_,N){Ps("u",_,Go,n),Ps("scalar",N,d,g);const x=N,O=_;let P=ji,k=Go,B=_,L=ji,I=Go;for(let R=BigInt(a-1);R>=Go;R--){const U=x>>R&ji;I^=U,{x_2:P,x_3:B}=w(I,P,B),{x_2:k,x_3:L}=w(I,k,L),I=U;const D=P+k,$=f(D*D),q=P-k,Z=f(q*q),oe=$-Z,J=B+L,le=B-L,he=f(le*D),xe=f(J*q),ze=he+xe,Ae=he-xe;B=f(ze*ze),L=f(O*f(Ae*Ae)),P=f($*Z),k=f(oe*($+f(u*oe)))}({x_2:P,x_3:B}=w(I,P,B)),{x_2:k,x_3:L}=w(I,k,L);const S=i(k);return f(P*S)}return{scalarMult:y,scalarMultBase:E,getSharedSecret:(_,N)=>y(_,N),getPublicKey:_=>E(_),utils:{randomPrivateKey:()=>e.randomBytes(c)},GuBytes:p.slice()}}const If=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const rk=BigInt(1),Py=BigInt(2),sk=BigInt(3),ik=BigInt(5);BigInt(8);function ok(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=If,o=t*t%i*t%i,a=Hn(o,Py,i)*o%i,c=Hn(a,rk,i)*t%i,l=Hn(c,ik,i)*c%i,u=Hn(l,e,i)*l%i,d=Hn(u,n,i)*u%i,h=Hn(d,r,i)*d%i,g=Hn(h,s,i)*h%i,f=Hn(g,s,i)*h%i,p=Hn(f,e,i)*l%i;return{pow_p_5_8:Hn(p,Py,i)*t%i,b2:o}}function ak(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Sf=nk({P:If,type:"x25519",powPminus2:t=>{const e=If,{pow_p_5_8:n,b2:r}=ok(t);return on(Hn(n,sk,e)*r,e)},adjustScalarBytes:ak,randomBytes:Ro});function Oy(t){t.lowS!==void 0&&ic("lowS",t.lowS),t.prehash!==void 0&&ic("prehash",t.prehash)}function ck(t){const e=HE(t);Fc(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class lk extends Error{constructor(e=""){super(e)}}const zr={Err:lk,_tlv:{encode:(t,e)=>{const{Err:n}=zr;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=ul(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?ul(s.length/2|128):"";return ul(t)+i+s+e},decode(t,e){const{Err:n}=zr;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=zr;if(t<Hr)throw new e("integer: negative integers are not allowed");let n=ul(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=zr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return di(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=zr,s=rn("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=zr,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function Qd(t,e){return oc(Mc(t,e))}const Hr=BigInt(0),wt=BigInt(1);BigInt(2);const eh=BigInt(3),uk=BigInt(4);function dk(t){const e=ck(t),{Fp:n}=e,r=jc(e.n,e.nBitLength),s=e.toBytes||((y,E,w)=>{const v=E.toAffine();return ru(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),i=e.fromBytes||(y=>{const E=y.subarray(1),w=n.fromBytes(E.subarray(0,n.BYTES)),v=n.fromBytes(E.subarray(n.BYTES,2*n.BYTES));return{x:w,y:v}});function o(y){const{a:E,b:w}=e,v=n.sqr(y),_=n.mul(v,y);return n.add(n.add(_,n.mul(y,E)),w)}function a(y,E){const w=n.sqr(E),v=o(y);return n.eql(w,v)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,eh),uk),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(y){return Zp(y,wt,e.n)}function d(y){const{allowedPrivateKeyLengths:E,nByteLength:w,wrapPrivateKey:v,n:_}=e;if(E&&typeof y!="bigint"){if(Lc(y)&&(y=oc(y)),typeof y!="string"||!E.includes(y.length))throw new Error("invalid private key");y=y.padStart(w*2,"0")}let N;try{N=typeof y=="bigint"?y:di(rn("private key",y,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof y)}return v&&(N=on(N,_)),Ps("private key",N,wt,_),N}function h(y){if(!(y instanceof p))throw new Error("ProjectivePoint expected")}const g=Sy((y,E)=>{const{px:w,py:v,pz:_}=y;if(n.eql(_,n.ONE))return{x:w,y:v};const N=y.is0();E==null&&(E=N?n.ONE:n.inv(_));const x=n.mul(w,E),O=n.mul(v,E),P=n.mul(_,E);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x,y:O}}),f=Sy(y=>{if(y.is0()){if(e.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}const{x:E,y:w}=y.toAffine();if(!n.isValid(E)||!n.isValid(w))throw new Error("bad point: x or y not FE");if(!a(E,w))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(E,w,v){if(E==null||!n.isValid(E))throw new Error("x required");if(w==null||!n.isValid(w)||n.is0(w))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required");this.px=E,this.py=w,this.pz=v,Object.freeze(this)}static fromAffine(E){const{x:w,y:v}=E||{};if(!E||!n.isValid(w)||!n.isValid(v))throw new Error("invalid affine point");if(E instanceof p)throw new Error("projective point not allowed");const _=N=>n.eql(N,n.ZERO);return _(w)&&_(v)?p.ZERO:new p(w,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const w=LE(n,E.map(v=>v.pz));return E.map((v,_)=>v.toAffine(w[_])).map(p.fromAffine)}static fromHex(E){const w=p.fromAffine(i(rn("pointHex",E)));return w.assertValidity(),w}static fromPrivateKey(E){return p.BASE.multiply(d(E))}static msm(E,w){return ek(p,r,E,w)}_setWindowSize(E){C.setWindowSize(this,E)}assertValidity(){f(this)}hasEvenY(){const{y:E}=this.toAffine();if(n.isOdd)return!n.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);const{px:w,py:v,pz:_}=this,{px:N,py:x,pz:O}=E,P=n.eql(n.mul(w,O),n.mul(N,_)),k=n.eql(n.mul(v,O),n.mul(x,_));return P&&k}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:E,b:w}=e,v=n.mul(w,eh),{px:_,py:N,pz:x}=this;let O=n.ZERO,P=n.ZERO,k=n.ZERO,B=n.mul(_,_),L=n.mul(N,N),I=n.mul(x,x),S=n.mul(_,N);return S=n.add(S,S),k=n.mul(_,x),k=n.add(k,k),O=n.mul(E,k),P=n.mul(v,I),P=n.add(O,P),O=n.sub(L,P),P=n.add(L,P),P=n.mul(O,P),O=n.mul(S,O),k=n.mul(v,k),I=n.mul(E,I),S=n.sub(B,I),S=n.mul(E,S),S=n.add(S,k),k=n.add(B,B),B=n.add(k,B),B=n.add(B,I),B=n.mul(B,S),P=n.add(P,B),I=n.mul(N,x),I=n.add(I,I),B=n.mul(I,S),O=n.sub(O,B),k=n.mul(I,L),k=n.add(k,k),k=n.add(k,k),new p(O,P,k)}add(E){h(E);const{px:w,py:v,pz:_}=this,{px:N,py:x,pz:O}=E;let P=n.ZERO,k=n.ZERO,B=n.ZERO;const L=e.a,I=n.mul(e.b,eh);let S=n.mul(w,N),R=n.mul(v,x),U=n.mul(_,O),D=n.add(w,v),$=n.add(N,x);D=n.mul(D,$),$=n.add(S,R),D=n.sub(D,$),$=n.add(w,_);let q=n.add(N,O);return $=n.mul($,q),q=n.add(S,U),$=n.sub($,q),q=n.add(v,_),P=n.add(x,O),q=n.mul(q,P),P=n.add(R,U),q=n.sub(q,P),B=n.mul(L,$),P=n.mul(I,U),B=n.add(P,B),P=n.sub(R,B),B=n.add(R,B),k=n.mul(P,B),R=n.add(S,S),R=n.add(R,S),U=n.mul(L,U),$=n.mul(I,$),R=n.add(R,U),U=n.sub(S,U),U=n.mul(L,U),$=n.add($,U),S=n.mul(R,$),k=n.add(k,S),S=n.mul(q,$),P=n.mul(D,P),P=n.sub(P,S),S=n.mul(D,R),B=n.mul(q,B),B=n.add(B,S),new p(P,k,B)}subtract(E){return this.add(E.negate())}is0(){return this.equals(p.ZERO)}wNAF(E){return C.wNAFCached(this,E,p.normalizeZ)}multiplyUnsafe(E){const{endo:w,n:v}=e;Ps("scalar",E,Hr,v);const _=p.ZERO;if(E===Hr)return _;if(this.is0()||E===wt)return this;if(!w||C.hasPrecomputes(this))return C.wNAFCachedUnsafe(this,E,p.normalizeZ);let{k1neg:N,k1:x,k2neg:O,k2:P}=w.splitScalar(E),k=_,B=_,L=this;for(;x>Hr||P>Hr;)x&wt&&(k=k.add(L)),P&wt&&(B=B.add(L)),L=L.double(),x>>=wt,P>>=wt;return N&&(k=k.negate()),O&&(B=B.negate()),B=new p(n.mul(B.px,w.beta),B.py,B.pz),k.add(B)}multiply(E){const{endo:w,n:v}=e;Ps("scalar",E,wt,v);let _,N;if(w){const{k1neg:x,k1:O,k2neg:P,k2:k}=w.splitScalar(E);let{p:B,f:L}=this.wNAF(O),{p:I,f:S}=this.wNAF(k);B=C.constTimeNegate(x,B),I=C.constTimeNegate(P,I),I=new p(n.mul(I.px,w.beta),I.py,I.pz),_=B.add(I),N=L.add(S)}else{const{p:x,f:O}=this.wNAF(E);_=x,N=O}return p.normalizeZ([_,N])[0]}multiplyAndAddUnsafe(E,w,v){const _=p.BASE,N=(O,P)=>P===Hr||P===wt||!O.equals(_)?O.multiplyUnsafe(P):O.multiply(P),x=N(this,w).add(N(E,v));return x.is0()?void 0:x}toAffine(E){return g(this,E)}isTorsionFree(){const{h:E,isTorsionFree:w}=e;if(E===wt)return!0;if(w)return w(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:w}=e;return E===wt?this:w?w(p,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return ic("isCompressed",E),this.assertValidity(),s(p,this,E)}toHex(E=!0){return ic("isCompressed",E),oc(this.toRawBytes(E))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const{endo:m,nBitLength:b}=e,C=Q$(p,m?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:u}}function hk(t){const e=HE(t);return Fc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function fk(t){const e=hk(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(I){return on(I,r)}function l(I){return _f(I,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:g}=dk({...e,toBytes(I,S,R){const U=S.toAffine(),D=n.toBytes(U.x),$=ru;return ic("isCompressed",R),R?$(Uint8Array.from([S.hasEvenY()?2:3]),D):$(Uint8Array.from([4]),D,n.toBytes(U.y))},fromBytes(I){const S=I.length,R=I[0],U=I.subarray(1);if(S===o&&(R===2||R===3)){const D=di(U);if(!Zp(D,wt,n.ORDER))throw new Error("Point is not on curve");const $=h(D);let q;try{q=n.sqrt($)}catch(oe){const J=oe instanceof Error?": "+oe.message:"";throw new Error("Point is not on curve"+J)}const Z=(q&wt)===wt;return(R&1)===1!==Z&&(q=n.neg(q)),{x:D,y:q}}else if(S===a&&R===4){const D=n.fromBytes(U.subarray(0,n.BYTES)),$=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:D,y:$}}else{const D=o,$=a;throw new Error("invalid Point, expected length of "+D+", or uncompressed "+$+", got "+S)}}});function f(I){const S=r>>wt;return I>S}function p(I){return f(I)?c(-I):I}const m=(I,S,R)=>di(I.slice(S,R));class b{constructor(S,R,U){Ps("r",S,wt,r),Ps("s",R,wt,r),this.r=S,this.s=R,U!=null&&(this.recovery=U),Object.freeze(this)}static fromCompact(S){const R=s;return S=rn("compactSignature",S,R*2),new b(m(S,0,R),m(S,R,2*R))}static fromDER(S){const{r:R,s:U}=zr.toSig(rn("DER",S));return new b(R,U)}assertValidity(){}addRecoveryBit(S){return new b(this.r,this.s,S)}recoverPublicKey(S){const{r:R,s:U,recovery:D}=this,$=_(rn("msgHash",S));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const q=D===2||D===3?R+e.n:R;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Z=(D&1)===0?"02":"03",oe=u.fromHex(Z+Qd(q,n.BYTES)),J=l(q),le=c(-$*J),he=c(U*J),xe=u.BASE.multiplyAndAddUnsafe(oe,le,he);if(!xe)throw new Error("point at infinify");return xe.assertValidity(),xe}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return tu(this.toDERHex())}toDERHex(){return zr.hexFromSig(this)}toCompactRawBytes(){return tu(this.toCompactHex())}toCompactHex(){const S=s;return Qd(this.r,S)+Qd(this.s,S)}}const C={isValidPrivateKey(I){try{return d(I),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const I=jE(e.n);return Z$(e.randomBytes(I),e.n)},precompute(I=8,S=u.BASE){return S._setWindowSize(I),S.multiply(BigInt(3)),S}};function y(I,S=!0){return u.fromPrivateKey(I).toRawBytes(S)}function E(I){if(typeof I=="bigint")return!1;if(I instanceof u)return!0;const S=rn("key",I).length,R=n.BYTES,U=R+1,D=2*R+1;if(!(e.allowedPrivateKeyLengths||s===U))return S===U||S===D}function w(I,S,R=!0){if(E(I)===!0)throw new Error("first arg must be private key");if(E(S)===!1)throw new Error("second arg must be public key");return u.fromHex(S).multiply(d(I)).toRawBytes(R)}const v=e.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const S=di(I),R=I.length*8-i;return R>0?S>>BigInt(R):S},_=e.bits2int_modN||function(I){return c(v(I))},N=Hu(i);function x(I){return Ps("num < 2^"+i,I,Hr,N),Mc(I,s)}function O(I,S,R=P){if(["recovered","canonical"].some(Ae=>Ae in R))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:D}=e;let{lowS:$,prehash:q,extraEntropy:Z}=R;$==null&&($=!0),I=rn("msgHash",I),Oy(R),q&&(I=rn("prehashed msgHash",U(I)));const oe=_(I),J=d(S),le=[x(J),x(oe)];if(Z!=null&&Z!==!1){const Ae=Z===!0?D(n.BYTES):Z;le.push(rn("extraEntropy",Ae))}const he=ru(...le),xe=oe;function ze(Ae){const lt=v(Ae);if(!g(lt))return;const jt=l(lt),fn=u.BASE.multiply(lt).toAffine(),An=c(fn.x);if(An===Hr)return;const Vt=c(jt*c(xe+An*J));if(Vt===Hr)return;let Nr=(fn.x===An?0:2)|Number(fn.y&wt),Kc=Vt;return $&&f(Vt)&&(Kc=p(Vt),Nr^=1),new b(An,Kc,Nr)}return{seed:he,k2sig:ze}}const P={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function B(I,S,R=P){const{seed:U,k2sig:D}=O(I,S,R),$=e;return j$($.hash.outputLen,$.nByteLength,$.hmac)(U,D)}u.BASE._setWindowSize(8);function L(I,S,R,U=k){var Vt;const D=I;S=rn("msgHash",S),R=rn("publicKey",R);const{lowS:$,prehash:q,format:Z}=U;if(Oy(U),"strict"in U)throw new Error("options.strict was renamed to lowS");if(Z!==void 0&&Z!=="compact"&&Z!=="der")throw new Error("format must be compact or der");const oe=typeof D=="string"||Lc(D),J=!oe&&!Z&&typeof D=="object"&&D!==null&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!oe&&!J)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let le,he;try{if(J&&(le=new b(D.r,D.s)),oe){try{Z!=="compact"&&(le=b.fromDER(D))}catch(Nr){if(!(Nr instanceof zr.Err))throw Nr}!le&&Z!=="der"&&(le=b.fromCompact(D))}he=u.fromHex(R)}catch{return!1}if(!le||$&&le.hasHighS())return!1;q&&(S=e.hash(S));const{r:xe,s:ze}=le,Ae=_(S),lt=l(ze),jt=c(Ae*lt),fn=c(xe*lt),An=(Vt=u.BASE.multiplyAndAddUnsafe(he,jt,fn))==null?void 0:Vt.toAffine();return An?c(An.x)===xe:!1}return{CURVE:e,getPublicKey:y,getSharedSecret:w,sign:B,verify:L,ProjectivePoint:u,Signature:b,utils:C}}function pk(t){return{hash:t,hmac:(e,...n)=>zu(t,e,lD(...n)),randomBytes:Ro}}function Jp(t,e){const n=r=>fk({...t,...pk(r)});return{...n(e),create:n}}const WE=jc(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),gk=WE.create(BigInt("-3")),mk=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),yk=Jp({a:gk,b:mk,Fp:WE,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},ju),VE=jc(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),wk=VE.create(BigInt("-3")),bk=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");Jp({a:wk,b:bk,Fp:VE,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},RD);const GE=jc(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),vk=GE.create(BigInt("-3")),Ek=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");Jp({a:vk,b:Ek,Fp:GE,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},OD);const Ck=yk,KE="base10",qt="base16",Zn="base64pad",Es="base64url",zc="utf8",YE=0,Gr=1,qc=2,_k=0,Ry=1,ba=12,Xp=32;function Ak(){const t=Sf.utils.randomPrivateKey(),e=Sf.getPublicKey(t);return{privateKey:ln(t,qt),publicKey:ln(e,qt)}}function xf(){const t=Ro(Xp);return ln(t,qt)}function Ik(t,e){const n=Sf.getSharedSecret(Rn(t,qt),Rn(e,qt)),r=L$(qu,n,void 0,void 0,Xp);return ln(r,qt)}function Nl(t){const e=qu(Rn(t,qt));return ln(e,qt)}function yr(t){const e=qu(Rn(t,zc));return ln(e,qt)}function ZE(t){return Rn(`${t}`,KE)}function _i(t){return Number(ln(t,KE))}function JE(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function XE(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Sk(t){const e=ZE(typeof t.type<"u"?t.type:YE);if(_i(e)===Gr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Rn(t.senderPublicKey,qt):void 0,r=typeof t.iv<"u"?Rn(t.iv,qt):Ro(ba),s=Rn(t.symKey,qt),i=PE(s,r).encrypt(Rn(t.message,zc)),o=QE({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Es?JE(o):o}function xk(t){const e=Rn(t.symKey,qt),{sealed:n,iv:r}=ac({encoded:t.encoded,encoding:t.encoding}),s=PE(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ln(s,zc)}function Nk(t,e){const n=ZE(qc),r=Ro(ba),s=Rn(t,zc),i=QE({type:n,sealed:s,iv:r});return e===Es?JE(i):i}function Tk(t,e){const{sealed:n}=ac({encoded:t,encoding:e});return ln(n,zc)}function QE(t){if(_i(t.type)===qc)return ln(wa([t.type,t.sealed]),Zn);if(_i(t.type)===Gr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ln(wa([t.type,t.senderPublicKey,t.iv,t.sealed]),Zn)}return ln(wa([t.type,t.iv,t.sealed]),Zn)}function ac(t){const e=(t.encoding||Zn)===Es?XE(t.encoded):t.encoded,n=Rn(e,Zn),r=n.slice(_k,Ry),s=Ry;if(_i(r)===Gr){const c=s+Xp,l=c+ba,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(_i(r)===qc){const c=n.slice(s),l=Ro(ba);return{type:r,sealed:c,iv:l}}const i=s+ba,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Pk(t,e){const n=ac({encoded:t,encoding:e==null?void 0:e.encoding});return e1({type:_i(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ln(n.senderPublicKey,qt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function e1(t){const e=(t==null?void 0:t.type)||YE;if(e===Gr){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Dy(t){return t.type===Gr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function $y(t){return t.type===qc}function Ok(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return wa([new Uint8Array([4]),e,n])}function Rk(t,e){const[n,r,s]=t.split("."),i=Buffer.from(XE(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=qu(c),u=Ok(e);if(!Ck.verify(wa([o,a]),l,u))throw new Error("Invalid signature");return af(t).payload}const Dk="irn";function su(t){return(t==null?void 0:t.relay)||{protocol:Dk}}function da(t){const e=w5[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function $k(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function ky(t){if(!t.includes("wc:")){const l=hE(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:kk(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:$k(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function kk(t){return t.startsWith("//")?t.substring(2):t}function Uk(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Uy(t){const e=new URLSearchParams,n=Uk(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function hl(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var Bk=Object.defineProperty,Lk=Object.defineProperties,Mk=Object.getOwnPropertyDescriptors,By=Object.getOwnPropertySymbols,Fk=Object.prototype.hasOwnProperty,jk=Object.prototype.propertyIsEnumerable,Ly=(t,e,n)=>e in t?Bk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zk=(t,e)=>{for(var n in e||(e={}))Fk.call(e,n)&&Ly(t,n,e[n]);if(By)for(var n of By(e))jk.call(e,n)&&Ly(t,n,e[n]);return t},qk=(t,e)=>Lk(t,Mk(e));function Do(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function Hk(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Do(n.accounts))}),e}function Wk(t,e){const n=[];return Object.values(t).forEach(r=>{Do(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Vk(t,e){const n=[];return Object.values(t).forEach(r=>{Do(r.accounts).includes(e)&&n.push(...r.events)}),n}function Wu(t){return t.includes(":")}function io(t){return Wu(t)?t.split(":")[0]:t}function My(t){var e,n,r;const s={};if(!Os(t))return s;for(const[i,o]of Object.entries(t)){const a=Wu(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=io(i);s[u]=qk(zk({},s[u]),{chains:Er(a,(e=s[u])==null?void 0:e.chains),methods:Er(c,(n=s[u])==null?void 0:n.methods),events:Er(l,(r=s[u])==null?void 0:r.events)})}return s}function Gk(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function Fy(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Gk(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Er(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Kk(t,e){var n,r,s,i,o,a;const c=My(t),l=My(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Er((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Er((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Er((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const Yk={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Zk={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function V(t,e){const{message:n,code:r}=Zk[t];return{message:e?`${n} ${e}`:n,code:r}}function We(t,e){const{message:n,code:r}=Yk[t];return{message:e?`${n} ${e}`:n,code:r}}function Kr(t,e){return!!Array.isArray(t)}function Os(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function xt(t){return typeof t>"u"}function at(t,e){return e&&xt(t)?!0:typeof t=="string"&&!!t.trim().length}function Qp(t,e){return e&&xt(t)?!0:typeof t=="number"&&!isNaN(t)}function Jk(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return ai(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Do(a),d=n[o];(!ai(aE(o,d),u)||!ai(d.methods,c)||!ai(d.events,l))&&(i=!1)}),i):!1}function iu(t){return at(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Xk(t){if(at(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&iu(n)}}return!1}function Qk(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(at(t,!1)){if(e(t))return!0;const n=hE(t);return e(n)}}catch{}return!1}function e8(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function t8(t){return t==null?void 0:t.topic}function n8(t,e){let n=null;return at(t==null?void 0:t.publicKey,!1)||(n=V("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function jy(t){let e=!0;return Kr(t)?t.length&&(e=t.every(n=>at(n,!1))):e=!1,e}function r8(t,e,n){let r=null;return Kr(e)&&e.length?e.forEach(s=>{r||iu(s)||(r=We("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):iu(t)||(r=We("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function s8(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=r8(s,aE(s,i),`${e} ${n}`);o&&(r=o)}),r}function i8(t,e){let n=null;return Kr(t)?t.forEach(r=>{n||Xk(r)||(n=We("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=We("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function o8(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=i8(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function a8(t,e){let n=null;return jy(t==null?void 0:t.methods)?jy(t==null?void 0:t.events)||(n=We("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=We("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function t1(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=a8(r,`${e}, namespace`);s&&(n=s)}),n}function c8(t,e,n){let r=null;if(t&&Os(t)){const s=t1(t,e);s&&(r=s);const i=s8(t,e,n);i&&(r=i)}else r=V("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function th(t,e){let n=null;if(t&&Os(t)){const r=t1(t,e);r&&(n=r);const s=o8(t,e);s&&(n=s)}else n=V("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function n1(t){return at(t.protocol,!0)}function l8(t,e){let n=!1;return t?t&&Kr(t)&&t.length&&t.forEach(r=>{n=n1(r)}):n=!0,n}function u8(t){return typeof t=="number"}function tn(t){return typeof t<"u"&&typeof t!==null}function d8(t){return!(!t||typeof t!="object"||!t.code||!Qp(t.code,!1)||!t.message||!at(t.message,!1))}function h8(t){return!(xt(t)||!at(t.method,!1))}function f8(t){return!(xt(t)||xt(t.result)&&xt(t.error)||!Qp(t.id,!1)||!at(t.jsonrpc,!1))}function p8(t){return!(xt(t)||!at(t.name,!1))}function zy(t,e){return!(!iu(e)||!Hk(t).includes(e))}function g8(t,e,n){return at(n,!1)?Wk(t,e).includes(n):!1}function m8(t,e,n){return at(n,!1)?Vk(t,e).includes(n):!1}function qy(t,e,n){let r=null;const s=y8(t),i=w8(e),o=Object.keys(s),a=Object.keys(i),c=Hy(Object.keys(t)),l=Hy(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=V("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),ai(o,a)||(r=V("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Do(e[d].accounts);h.includes(d)||(r=V("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(ai(s[d].methods,i[d].methods)?ai(s[d].events,i[d].events)||(r=V("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=V("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function y8(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function Hy(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function w8(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Do(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function b8(t,e){return Qp(t,!1)&&t<=e.max&&t>=e.min}function Wy(){const t=Uc();return new Promise(e=>{switch(t){case vn.browser:e(v8());break;case vn.reactNative:e(E8());break;case vn.node:e(C8());break;default:e(!0)}})}function v8(){return Oo()&&(navigator==null?void 0:navigator.onLine)}async function E8(){if(Ws()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function C8(){return!0}function _8(t){switch(Uc()){case vn.browser:A8(t);break;case vn.reactNative:I8(t);break}}function A8(t){!Ws()&&Oo()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function I8(t){Ws()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function S8(){var t;return Oo()&&Xr.getDocument()?((t=Xr.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const nh={};class Ko{static get(e){return nh[e]}static set(e,n){nh[e]=n}static delete(e){delete nh[e]}}function x8(t){const e=Po.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function N8({publicKey:t,signature:e,payload:n}){var r;const s=Nf(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=O8(n.address),a=n.era==="00"?new Uint8Array([0]):Nf(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${P8(n.tip)}`),d=D8(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),g=R8(h.length+1);return new Uint8Array([...g,i,...h])}function T8(t){const e=Nf(t),n=C5.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Nf(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function P8(t){return t.startsWith("0x")?t.slice(2):t}function O8(t){const e=Po.decode(t)[0];return e===42?0:e===60?2:1}function R8(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function D8(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function $8(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=x8(t.transaction.address),r=N8({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return T8(s)}const k8="PARSE_ERROR",U8="INVALID_REQUEST",B8="METHOD_NOT_FOUND",L8="INVALID_PARAMS",r1="INTERNAL_ERROR",eg="SERVER_ERROR",M8=[-32700,-32600,-32601,-32602,-32603],va={[k8]:{code:-32700,message:"Parse error"},[U8]:{code:-32600,message:"Invalid Request"},[B8]:{code:-32601,message:"Method not found"},[L8]:{code:-32602,message:"Invalid params"},[r1]:{code:-32603,message:"Internal error"},[eg]:{code:-32e3,message:"Server error"}},s1=eg;function F8(t){return M8.includes(t)}function Vy(t){return Object.keys(va).includes(t)?va[t]:va[s1]}function j8(t){const e=Object.values(va).find(n=>n.code===t);return e||va[s1]}function i1(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var rh={},Br={},Gy;function z8(){if(Gy)return Br;Gy=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.isBrowserCryptoAvailable=Br.getSubtleCrypto=Br.getBrowerCrypto=void 0;function t(){return(gr==null?void 0:gr.crypto)||(gr==null?void 0:gr.msCrypto)||{}}Br.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Br.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Br.isBrowserCryptoAvailable=n,Br}var Lr={},Ky;function q8(){if(Ky)return Lr;Ky=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.isBrowser=Lr.isNode=Lr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Lr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Lr.isNode=e;function n(){return!t()&&!e()}return Lr.isBrowser=n,Lr}var Yy;function H8(){return Yy||(Yy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pc;e.__exportStar(z8(),t),e.__exportStar(q8(),t)}(rh)),rh}var W8=H8();function fr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function li(t=6){return BigInt(fr(t))}function Is(t,e,n){return{id:n||fr(),jsonrpc:"2.0",method:t,params:e}}function Vu(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Gu(t,e,n){return{id:t,jsonrpc:"2.0",error:V8(e)}}function V8(t,e){return typeof t>"u"?Vy(r1):(typeof t=="string"&&(t=Object.assign(Object.assign({},Vy(eg)),{message:t})),F8(t.code)&&(t=j8(t.code)),t)}let G8=class{},K8=class extends G8{constructor(){super()}},Y8=class extends K8{constructor(e){super()}};const Z8="^https?:",J8="^wss?:";function X8(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function o1(t,e){const n=X8(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Zy(t){return o1(t,Z8)}function Jy(t){return o1(t,J8)}function Q8(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function a1(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function tg(t){return a1(t)&&"method"in t}function Ku(t){return a1(t)&&(pr(t)||On(t))}function pr(t){return"result"in t}function On(t){return"error"in t}let Ln=class extends Y8{constructor(e){super(e),this.events=new Bn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Is(e.method,e.params||[],e.id||li().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{On(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Ku(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const e6=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),t6=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Xy=t=>t.split("?")[0],Qy=10,n6=e6();let r6=class{constructor(e){if(this.url=e,this.events=new Bn.EventEmitter,this.registering=!1,!Jy(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Jr(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Jy(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=W8.isReactNative()?void 0:{rejectUnauthorized:!Q8(e)},i=new n6(e,[],s);t6()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ei(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Gu(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return i1(e,Xy(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Qy&&this.events.setMaxListeners(Qy)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Xy(this.url)}`));return this.events.emit("register_error",n),n}};var s6={};const c1="wc",l1=2,Tf="core",Ar=`${c1}@2:${Tf}:`,i6={logger:"error"},o6={database:":memory:"},a6="crypto",ew="client_ed25519_seed",c6=W.ONE_DAY,l6="keychain",u6="0.3",d6="messages",h6="0.3",tw=W.SIX_HOURS,f6="publisher",u1="irn",p6="error",d1="wss://relay.walletconnect.org",g6="relayer",bt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},m6="_subscription",xn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},y6=.1,Pf="2.21.2",Xe={link_mode:"link_mode",relay:"relay"},Tl={inbound:"inbound",outbound:"outbound"},w6="0.3",b6="WALLETCONNECT_CLIENT_ID",nw="WALLETCONNECT_LINK_MODE_APPS",mn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},v6="subscription",E6="0.3",C6="pairing",_6="0.3",Yo={wc_pairingDelete:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:W.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:W.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:W.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:W.ONE_DAY,prompt:!1,tag:0},res:{ttl:W.ONE_DAY,prompt:!1,tag:0}}},ni={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},jn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},A6="history",I6="0.3",S6="expirer",Pn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},x6="0.3",N6="verify-api",T6="https://verify.walletconnect.com",h1="https://verify.walletconnect.org",Ea=h1,P6=`${Ea}/v3`,O6=[T6,h1],R6="echo",D6="https://echo.walletconnect.com",hr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Fr={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},zn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ys={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Zs={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Zo={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},$6=.1,k6="event-client",U6=86400,B6="https://pulse.walletconnect.org/batch";function L6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,m=0,b=0,C=f.length;b!==C&&f[b]===0;)b++,p++;for(var y=(C-b)*u+1>>>0,E=new Uint8Array(y);b!==C;){for(var w=f[b],v=0,_=y-1;(w!==0||v<m)&&_!==-1;_--,v++)w+=256*E[_]>>>0,E[_]=w%a>>>0,w=w/a>>>0;if(w!==0)throw new Error("Non-zero carry");m=v,b++}for(var N=y-m;N!==y&&E[N]===0;)N++;for(var x=c.repeat(p);N<y;++N)x+=t.charAt(E[N]);return x}function h(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var m=0,b=0;f[p]===c;)m++,p++;for(var C=(f.length-p)*l+1>>>0,y=new Uint8Array(C);f[p];){var E=n[f.charCodeAt(p)];if(E===255)return;for(var w=0,v=C-1;(E!==0||w<b)&&v!==-1;v--,w++)E+=a*y[v]>>>0,y[v]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=w,p++}if(f[p]!==" "){for(var _=C-b;_!==C&&y[_]===0;)_++;for(var N=new Uint8Array(m+(C-_)),x=m;_!==C;)N[x++]=y[_++];return N}}}function g(f){var p=h(f);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:g}}var M6=L6,F6=M6;const f1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},j6=t=>new TextEncoder().encode(t),z6=t=>new TextDecoder().decode(t);class q6{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class H6{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return p1(this,e)}}class W6{constructor(e){this.decoders=e}or(e){return p1(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const p1=(t,e)=>new W6({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class V6{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new q6(e,n,r),this.decoder=new H6(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Yu=({name:t,prefix:e,encode:n,decode:r})=>new V6(t,e,n,r),Hc=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=F6(n,e);return Yu({prefix:t,name:e,encode:r,decode:i=>f1(s(i))})},G6=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},K6=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Dt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Yu({prefix:e,name:t,encode(s){return K6(s,r,n)},decode(s){return G6(s,r,n,t)}}),Y6=Yu({prefix:"\0",name:"identity",encode:t=>z6(t),decode:t=>j6(t)});var Z6=Object.freeze({__proto__:null,identity:Y6});const J6=Dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var X6=Object.freeze({__proto__:null,base2:J6});const Q6=Dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var eU=Object.freeze({__proto__:null,base8:Q6});const tU=Hc({prefix:"9",name:"base10",alphabet:"0123456789"});var nU=Object.freeze({__proto__:null,base10:tU});const rU=Dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sU=Dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iU=Object.freeze({__proto__:null,base16:rU,base16upper:sU});const oU=Dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aU=Dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cU=Dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lU=Dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uU=Dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dU=Dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hU=Dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fU=Dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pU=Dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gU=Object.freeze({__proto__:null,base32:oU,base32upper:aU,base32pad:cU,base32padupper:lU,base32hex:uU,base32hexupper:dU,base32hexpad:hU,base32hexpadupper:fU,base32z:pU});const mU=Hc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yU=Hc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wU=Object.freeze({__proto__:null,base36:mU,base36upper:yU});const bU=Hc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vU=Hc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var EU=Object.freeze({__proto__:null,base58btc:bU,base58flickr:vU});const CU=Dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_U=Dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),AU=Dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),IU=Dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var SU=Object.freeze({__proto__:null,base64:CU,base64pad:_U,base64url:AU,base64urlpad:IU});const g1=Array.from(""),xU=g1.reduce((t,e,n)=>(t[n]=e,t),[]),NU=g1.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function TU(t){return t.reduce((e,n)=>(e+=xU[n],e),"")}function PU(t){const e=[];for(const n of t){const r=NU[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const OU=Yu({prefix:"",name:"base256emoji",encode:TU,decode:PU});var RU=Object.freeze({__proto__:null,base256emoji:OU}),DU=m1,rw=128,$U=-128,kU=Math.pow(2,31);function m1(t,e,n){e=e||[],n=n||0;for(var r=n;t>=kU;)e[n++]=t&255|rw,t/=128;for(;t&$U;)e[n++]=t&255|rw,t>>>=7;return e[n]=t|0,m1.bytes=n-r+1,e}var UU=Of,BU=128,sw=127;function Of(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Of.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&sw)<<s:(o&sw)*Math.pow(2,s),s+=7}while(o>=BU);return Of.bytes=i-r,n}var LU=Math.pow(2,7),MU=Math.pow(2,14),FU=Math.pow(2,21),jU=Math.pow(2,28),zU=Math.pow(2,35),qU=Math.pow(2,42),HU=Math.pow(2,49),WU=Math.pow(2,56),VU=Math.pow(2,63),GU=function(t){return t<LU?1:t<MU?2:t<FU?3:t<jU?4:t<zU?5:t<qU?6:t<HU?7:t<WU?8:t<VU?9:10},KU={encode:DU,decode:UU,encodingLength:GU},y1=KU;const iw=(t,e,n=0)=>(y1.encode(t,e,n),e),ow=t=>y1.encodingLength(t),Rf=(t,e)=>{const n=e.byteLength,r=ow(t),s=r+ow(n),i=new Uint8Array(s+n);return iw(t,i,0),iw(n,i,r),i.set(e,s),new YU(t,n,e,i)};class YU{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const w1=({name:t,code:e,encode:n})=>new ZU(t,e,n);class ZU{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Rf(this.code,n):n.then(r=>Rf(this.code,r))}else throw Error("Unknown type, must be binary type")}}const b1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),JU=w1({name:"sha2-256",code:18,encode:b1("SHA-256")}),XU=w1({name:"sha2-512",code:19,encode:b1("SHA-512")});var QU=Object.freeze({__proto__:null,sha256:JU,sha512:XU});const v1=0,e4="identity",E1=f1,t4=t=>Rf(v1,E1(t)),n4={code:v1,name:e4,encode:E1,digest:t4};var r4=Object.freeze({__proto__:null,identity:n4});new TextEncoder,new TextDecoder;const aw={...Z6,...X6,...eU,...nU,...iU,...gU,...wU,...EU,...SU,...RU};({...QU,...r4});function C1(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function s4(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?C1(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _1(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const cw=_1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),sh=_1("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=s4(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),i4={utf8:cw,"utf-8":cw,hex:aw.base16,latin1:sh,ascii:sh,binary:sh,...aw};function o4(t,e="utf8"){const n=i4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?C1(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var a4=Object.defineProperty,c4=(t,e,n)=>e in t?a4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ur=(t,e,n)=>c4(t,typeof e!="symbol"?e+"":e,n);class l4{constructor(e,n){this.core=e,this.logger=n,ur(this,"keychain",new Map),ur(this,"name",l6),ur(this,"version",u6),ur(this,"initialized",!1),ur(this,"storagePrefix",Ar),ur(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ur(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ur(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ur(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=V("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ur(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ft(n,this.name)}get context(){return hn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,gf(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?mf(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var u4=Object.defineProperty,d4=(t,e,n)=>e in t?u4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,At=(t,e,n)=>d4(t,typeof e!="symbol"?e+"":e,n);class h4{constructor(e,n,r){this.core=e,this.logger=n,At(this,"name",a6),At(this,"keychain"),At(this,"randomSessionIdentifier",xf()),At(this,"initialized",!1),At(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),At(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),At(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Bm(s);return Bv(i.publicKey)}),At(this,"generateKeyPair",()=>{this.isInitialized();const s=Ak();return this.setPrivateKey(s.publicKey,s.privateKey)}),At(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Bm(i),a=this.randomSessionIdentifier;return await YO(a,s,c6,o)}),At(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Ik(a,i);return this.setSymKey(c,o)}),At(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Nl(s);return await this.keychain.set(o,s),o}),At(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),At(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),At(this,"encode",async(s,i,o)=>{this.isInitialized();const a=e1(o),c=Jr(i);if($y(a))return Nk(c,o==null?void 0:o.encoding);if(Dy(a)){const h=a.senderPublicKey,g=a.receiverPublicKey;s=await this.generateSharedKey(h,g)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return Sk({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),At(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Pk(i,o);if($y(a)){const c=Tk(i,o==null?void 0:o.encoding);return Ei(c)}if(Dy(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=xk({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Ei(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),At(this,"getPayloadType",(s,i=Zn)=>{const o=ac({encoded:s,encoding:i});return _i(o.type)}),At(this,"getPayloadSenderPublicKey",(s,i=Zn)=>{const o=ac({encoded:s,encoding:i});return o.senderPublicKey?ln(o.senderPublicKey,qt):void 0}),this.core=e,this.logger=Ft(n,this.name),this.keychain=r||new l4(this.core,this.logger)}get context(){return hn(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ew)}catch{e=xf(),await this.keychain.set(ew,e)}return o4(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var f4=Object.defineProperty,p4=Object.defineProperties,g4=Object.getOwnPropertyDescriptors,lw=Object.getOwnPropertySymbols,m4=Object.prototype.hasOwnProperty,y4=Object.prototype.propertyIsEnumerable,Df=(t,e,n)=>e in t?f4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w4=(t,e)=>{for(var n in e||(e={}))m4.call(e,n)&&Df(t,n,e[n]);if(lw)for(var n of lw(e))y4.call(e,n)&&Df(t,n,e[n]);return t},b4=(t,e)=>p4(t,g4(e)),gn=(t,e,n)=>Df(t,typeof e!="symbol"?e+"":e,n);class v4 extends GN{constructor(e,n){super(e,n),this.logger=e,this.core=n,gn(this,"messages",new Map),gn(this,"messagesWithoutClientAck",new Map),gn(this,"name",d6),gn(this,"version",h6),gn(this,"initialized",!1),gn(this,"storagePrefix",Ar),gn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),gn(this,"set",async(r,s,i)=>{this.isInitialized();const o=yr(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Tl.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,b4(w4({},c),{[o]:s}))}return await this.persist(),o}),gn(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),gn(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),gn(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=yr(s);return typeof i[o]<"u"}),gn(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=yr(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),gn(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ft(e,this.name),this.core=n}get context(){return hn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,gf(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,gf(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?mf(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?mf(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var E4=Object.defineProperty,C4=Object.defineProperties,_4=Object.getOwnPropertyDescriptors,uw=Object.getOwnPropertySymbols,A4=Object.prototype.hasOwnProperty,I4=Object.prototype.propertyIsEnumerable,$f=(t,e,n)=>e in t?E4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fl=(t,e)=>{for(var n in e||(e={}))A4.call(e,n)&&$f(t,n,e[n]);if(uw)for(var n of uw(e))I4.call(e,n)&&$f(t,n,e[n]);return t},ih=(t,e)=>C4(t,_4(e)),qn=(t,e,n)=>$f(t,typeof e!="symbol"?e+"":e,n);class S4 extends KN{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,qn(this,"events",new Bn.EventEmitter),qn(this,"name",f6),qn(this,"queue",new Map),qn(this,"publishTimeout",W.toMiliseconds(W.ONE_MINUTE)),qn(this,"initialPublishTimeout",W.toMiliseconds(W.ONE_SECOND*15)),qn(this,"needsTransportRestart",!1),qn(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||tw,c=su(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||li().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},g=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const f=new Promise(async p=>{const m=({id:C})=>{h.opts.id===C&&(this.removeRequestFromQueue(C),this.relayer.events.removeListener(bt.publish,m),p(h))};this.relayer.events.on(bt.publish,m);const b=As(new Promise((C,y)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(C).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),y(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await b,this.events.removeListener(bt.publish,m)}catch(C){this.queue.set(d,ih(fl({},h),{attempt:1})),this.logger.warn(C,C==null?void 0:C.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await As(f,this.publishTimeout,g)}catch(f){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(f),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw f}finally{this.queue.delete(d)}}),qn(this,"on",(r,s)=>{this.events.on(r,s)}),qn(this,"once",(r,s)=>{this.events.once(r,s)}),qn(this,"off",(r,s)=>{this.events.off(r,s)}),qn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ft(n,this.name),this.registerEventListeners()}get context(){return hn(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=tw,prompt:l,tag:u,id:d,attestation:h,tvf:g}=e,f={method:da(su().protocol).publish,params:fl({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},g),id:d};xt((n=f.params)==null?void 0:n.prompt)&&((r=f.params)==null||delete r.prompt),xt((s=f.params)==null?void 0:s.tag)&&((i=f.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});const p=await this.relayer.request(f);return this.relayer.events.emit(bt.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,ih(fl({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(ih(fl({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ri.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(bt.connection_stalled);return}this.checkQueue()}),this.relayer.on(bt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var x4=Object.defineProperty,N4=(t,e,n)=>e in t?x4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zi=(t,e,n)=>N4(t,typeof e!="symbol"?e+"":e,n);class T4{constructor(){zi(this,"map",new Map),zi(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),zi(this,"get",e=>this.map.get(e)||[]),zi(this,"exists",(e,n)=>this.get(e).includes(n)),zi(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),zi(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var P4=Object.defineProperty,O4=Object.defineProperties,R4=Object.getOwnPropertyDescriptors,dw=Object.getOwnPropertySymbols,D4=Object.prototype.hasOwnProperty,$4=Object.prototype.propertyIsEnumerable,kf=(t,e,n)=>e in t?P4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jo=(t,e)=>{for(var n in e||(e={}))D4.call(e,n)&&kf(t,n,e[n]);if(dw)for(var n of dw(e))$4.call(e,n)&&kf(t,n,e[n]);return t},oh=(t,e)=>O4(t,R4(e)),Ge=(t,e,n)=>kf(t,typeof e!="symbol"?e+"":e,n);class k4 extends JN{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ge(this,"subscriptions",new Map),Ge(this,"topicMap",new T4),Ge(this,"events",new Bn.EventEmitter),Ge(this,"name",v6),Ge(this,"version",E6),Ge(this,"pending",new Map),Ge(this,"cached",[]),Ge(this,"initialized",!1),Ge(this,"storagePrefix",Ar),Ge(this,"subscribeTimeout",W.toMiliseconds(W.ONE_MINUTE)),Ge(this,"initialSubscribeTimeout",W.toMiliseconds(W.ONE_SECOND*15)),Ge(this,"clientId"),Ge(this,"batchSubscribeTopicsLimit",500),Ge(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Ge(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=su(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Ge(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Ge(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Ge(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Ge(this,"on",(r,s)=>{this.events.on(r,s)}),Ge(this,"once",(r,s)=>{this.events.once(r,s)}),Ge(this,"off",(r,s)=>{this.events.off(r,s)}),Ge(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Ge(this,"start",async()=>{await this.onConnect()}),Ge(this,"stop",async()=>{await this.onDisconnect()}),Ge(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Ge(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Ge(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ri.pulse,async()=>{await this.checkPending()}),this.events.on(mn.created,async r=>{const s=mn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(mn.deleted,async r=>{const s=mn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ft(n,this.name),this.clientId=""}get context(){return hn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=su(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=We("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Xe.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:da(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Xe.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},W.toMiliseconds(W.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(mn.created,d),u(h.id))};this.events.on(mn.created,d);try{const h=await As(new Promise((g,f)=>{this.relayer.request(i).catch(p=>{this.logger.warn(p,p==null?void 0:p.message),f(p)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(mn.created,d),u(h)}catch{}}),l=await As(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(bt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:da(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await As(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(bt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:da(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await As(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(bt.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:da(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,oh(Jo({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Jo({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Jo({},n)),this.topicMap.set(n.topic,e),this.events.emit(mn.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(mn.deleted,oh(Jo({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(mn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(mn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>oh(Jo({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Y5(W.toMiliseconds(W.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return yr(e+await this.getClientId())}}var U4=Object.defineProperty,hw=Object.getOwnPropertySymbols,B4=Object.prototype.hasOwnProperty,L4=Object.prototype.propertyIsEnumerable,Uf=(t,e,n)=>e in t?U4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fw=(t,e)=>{for(var n in e||(e={}))B4.call(e,n)&&Uf(t,n,e[n]);if(hw)for(var n of hw(e))L4.call(e,n)&&Uf(t,n,e[n]);return t},Re=(t,e,n)=>Uf(t,typeof e!="symbol"?e+"":e,n);class M4 extends YN{constructor(e){super(e),Re(this,"protocol","wc"),Re(this,"version",2),Re(this,"core"),Re(this,"logger"),Re(this,"events",new Bn.EventEmitter),Re(this,"provider"),Re(this,"messages"),Re(this,"subscriber"),Re(this,"publisher"),Re(this,"name",g6),Re(this,"transportExplicitlyClosed",!1),Re(this,"initialized",!1),Re(this,"connectionAttemptInProgress",!1),Re(this,"relayUrl"),Re(this,"projectId"),Re(this,"packageName"),Re(this,"bundleId"),Re(this,"hasExperiencedNetworkDisruption",!1),Re(this,"pingTimeout"),Re(this,"heartBeatTimeout",W.toMiliseconds(W.THIRTY_SECONDS+W.FIVE_SECONDS)),Re(this,"reconnectTimeout"),Re(this,"connectPromise"),Re(this,"reconnectInProgress",!1),Re(this,"requestsInFlight",[]),Re(this,"connectTimeout",W.toMiliseconds(W.ONE_SECOND*15)),Re(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||li().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Re(this,"resetPingTimeout",()=>{Ql()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Re(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Re(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(bt.connect)}),Re(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Re(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(bt.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Re(this,"registerProviderListeners",()=>{this.provider.on(xn.payload,this.onPayloadHandler),this.provider.on(xn.connect,this.onConnectHandler),this.provider.on(xn.disconnect,this.onDisconnectHandler),this.provider.on(xn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ft(e.logger,this.name):Rc(So({level:e.logger||p6})),this.messages=new v4(this.logger,e.core),this.subscriber=new k4(this,this.logger),this.publisher=new S4(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||d1,this.projectId=e.projectId,D5()?this.packageName=ny():$5()&&(this.bundleId=ny()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return hn(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Xe.relay},Tl.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(mn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(mn.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,fw({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await As(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Wy())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=ht(W.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(bt.message,e),await this.recordMessageEvent(e,Tl.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(xn.disconnect,i),await As(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(xn.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(xn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(xn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,W.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(Ql())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ln(new r6(M5({sdkVersion:Pf,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),tg(e)){if(!e.method.endsWith(m6))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Xe.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(fw({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Ku(e)&&this.events.emit(bt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Tl.inbound),this.events.emit(bt.message,e))}async acknowledgePayload(e){const n=Vu(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(xn.payload,this.onPayloadHandler),this.provider.off(xn.connect,this.onConnectHandler),this.provider.off(xn.disconnect,this.onDisconnectHandler),this.provider.off(xn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Wy();_8(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ri.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&S8())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(bt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},W.toMiliseconds(y6)))))}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function F4(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function pw(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function gw(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const j4="[object RegExp]",z4="[object String]",q4="[object Number]",H4="[object Boolean]",mw="[object Arguments]",W4="[object Symbol]",V4="[object Date]",G4="[object Map]",K4="[object Set]",Y4="[object Array]",Z4="[object Function]",J4="[object ArrayBuffer]",ah="[object Object]",X4="[object Error]",Q4="[object DataView]",eB="[object Uint8Array]",tB="[object Uint8ClampedArray]",nB="[object Uint16Array]",rB="[object Uint32Array]",sB="[object BigUint64Array]",iB="[object Int8Array]",oB="[object Int16Array]",aB="[object Int32Array]",cB="[object BigInt64Array]",lB="[object Float32Array]",uB="[object Float64Array]";function yw(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function dB(t,e,n){return ha(t,e,void 0,void 0,void 0,void 0,n)}function ha(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ca(t,e,i,o)}return Ca(t,e,i,o)}function Ca(t,e,n,r){if(Object.is(t,e))return!0;let s=gw(t),i=gw(e);if(s===mw&&(s=ah),i===mw&&(i=ah),s!==i)return!1;switch(s){case z4:return t.toString()===e.toString();case q4:{const c=t.valueOf(),l=e.valueOf();return F4(c,l)}case H4:case V4:case W4:return Object.is(t.valueOf(),e.valueOf());case j4:return t.source===e.source&&t.flags===e.flags;case Z4:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case G4:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!ha(l,e.get(c),c,t,e,n,r))return!1;return!0}case K4:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(g=>ha(d,g,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case Y4:case eB:case tB:case nB:case rB:case sB:case iB:case oB:case aB:case cB:case lB:case uB:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ha(t[c],e[c],c,t,e,n,r))return!1;return!0}case J4:return t.byteLength!==e.byteLength?!1:Ca(new Uint8Array(t),new Uint8Array(e),n,r);case Q4:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ca(new Uint8Array(t),new Uint8Array(e),n,r);case X4:return t.name===e.name&&t.message===e.message;case ah:{if(!(Ca(t.constructor,e.constructor,n,r)||yw(t)&&yw(e)))return!1;const c=[...Object.keys(t),...pw(t)],l=[...Object.keys(e),...pw(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const g=e[d];if(!ha(h,g,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function hB(){}function fB(t,e){return dB(t,e,hB)}var pB=Object.defineProperty,ww=Object.getOwnPropertySymbols,gB=Object.prototype.hasOwnProperty,mB=Object.prototype.propertyIsEnumerable,Bf=(t,e,n)=>e in t?pB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bw=(t,e)=>{for(var n in e||(e={}))gB.call(e,n)&&Bf(t,n,e[n]);if(ww)for(var n of ww(e))mB.call(e,n)&&Bf(t,n,e[n]);return t},Jt=(t,e,n)=>Bf(t,typeof e!="symbol"?e+"":e,n);class $i extends ZN{constructor(e,n,r,s=Ar,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Jt(this,"map",new Map),Jt(this,"version",w6),Jt(this,"cached",[]),Jt(this,"initialized",!1),Jt(this,"getKey"),Jt(this,"storagePrefix",Ar),Jt(this,"recentlyDeleted",[]),Jt(this,"recentlyDeletedLimit",200),Jt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!xt(o)?this.map.set(this.getKey(o),o):e8(o)?this.map.set(o.id,o):t8(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Jt(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Jt(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Jt(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>fB(a[c],o[c]))):this.values)),Jt(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=bw(bw({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Jt(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ft(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return hn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=V("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yB=Object.defineProperty,wB=(t,e,n)=>e in t?yB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ie=(t,e,n)=>wB(t,typeof e!="symbol"?e+"":e,n);class bB{constructor(e,n){this.core=e,this.logger=n,Ie(this,"name",C6),Ie(this,"version",_6),Ie(this,"events",new xp),Ie(this,"pairings"),Ie(this,"initialized",!1),Ie(this,"storagePrefix",Ar),Ie(this,"ignoredPayloadTypes",[Gr]),Ie(this,"registeredMethods",[]),Ie(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ie(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ie(this,"create",async r=>{this.isInitialized();const s=xf(),i=await this.core.crypto.setSymKey(s),o=ht(W.FIVE_MINUTES),a={protocol:u1},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=Uy({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ni.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Ie(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[hr.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=ky(r.uri);s.props.properties.topic=i,s.addTrace(hr.pairing_uri_validation_success),s.addTrace(hr.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(hr.existing_pairing),u.active)throw s.setError(Fr.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(hr.pairing_not_expired)}const d=c||ht(W.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(hr.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ni.create,h),s.addTrace(hr.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(hr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Fr.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(g){throw s.setError(Fr.subscribe_pairing_topic_failure),g}return s.addTrace(hr.subscribe_pairing_topic_success),h}),Ie(this,"activate",async({topic:r})=>{this.isInitialized();const s=ht(W.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Ie(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ei();this.events.once(Ue("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Ie(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Ie(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Ie(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ie(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",We("USER_DISCONNECTED")),await this.deletePairing(s))}),Ie(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Uy({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ie(this,"sendRequest",async(r,s,i)=>{const o=Is(s,i),a=await this.core.crypto.encode(r,o),c=Yo[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Ie(this,"sendResult",async(r,s,i)=>{const o=Vu(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Yo[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ie(this,"sendError",async(r,s,i)=>{const o=Gu(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Yo[c]?Yo[c].res:Yo.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ie(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,We("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Ie(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>ms(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Ie(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ie(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ie(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ni.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ie(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{pr(s)?this.events.emit(Ue("pairing_ping",i),{}):On(s)&&this.events.emit(Ue("pairing_ping",i),{error:s.error})},500)}),Ie(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ni.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ie(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=We("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Ie(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(We("WC_METHOD_UNSUPPORTED",r))}),Ie(this,"isValidPair",(r,s)=>{var i;if(!tn(r)){const{message:a}=V("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Fr.malformed_pairing_uri),new Error(a)}if(!Qk(r.uri)){const{message:a}=V("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Fr.malformed_pairing_uri),new Error(a)}const o=ky(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=V("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Fr.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=V("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Fr.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&W.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Fr.pairing_expired);const{message:a}=V("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ie(this,"isValidPing",async r=>{if(!tn(r)){const{message:i}=V("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ie(this,"isValidDisconnect",async r=>{if(!tn(r)){const{message:i}=V("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ie(this,"isValidPairingTopic",async r=>{if(!at(r,!1)){const{message:s}=V("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=V("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(ms(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=V("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ft(n,this.name),this.pairings=new $i(this.core,this.logger,this.name,this.storagePrefix)}get context(){return hn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(bt.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Xe.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);tg(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Ku(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Pn.expired,async e=>{const{topic:n}=dE(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ni.expire,{topic:n}))})}}var vB=Object.defineProperty,EB=(t,e,n)=>e in t?vB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,It=(t,e,n)=>EB(t,typeof e!="symbol"?e+"":e,n);class CB extends VN{constructor(e,n){super(e,n),this.core=e,this.logger=n,It(this,"records",new Map),It(this,"events",new Bn.EventEmitter),It(this,"name",A6),It(this,"version",I6),It(this,"cached",[]),It(this,"initialized",!1),It(this,"storagePrefix",Ar),It(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),It(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:ht(W.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(jn.created,o)}),It(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=On(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(jn.updated,s))}),It(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),It(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(jn.deleted,i)}}),this.persist()}),It(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),It(this,"on",(r,s)=>{this.events.on(r,s)}),It(this,"once",(r,s)=>{this.events.once(r,s)}),It(this,"off",(r,s)=>{this.events.off(r,s)}),It(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ft(n,this.name)}get context(){return hn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Is(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(jn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(jn.created,e=>{const n=jn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(jn.updated,e=>{const n=jn.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(jn.deleted,e=>{const n=jn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Ri.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{W.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(jn.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _B=Object.defineProperty,AB=(t,e,n)=>e in t?_B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bt=(t,e,n)=>AB(t,typeof e!="symbol"?e+"":e,n);class IB extends XN{constructor(e,n){super(e,n),this.core=e,this.logger=n,Bt(this,"expirations",new Map),Bt(this,"events",new Bn.EventEmitter),Bt(this,"name",S6),Bt(this,"version",x6),Bt(this,"cached",[]),Bt(this,"initialized",!1),Bt(this,"storagePrefix",Ar),Bt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Bt(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Bt(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Pn.created,{target:i,expiration:o})}),Bt(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Bt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Pn.deleted,{target:s,expiration:i})}}),Bt(this,"on",(r,s)=>{this.events.on(r,s)}),Bt(this,"once",(r,s)=>{this.events.once(r,s)}),Bt(this,"off",(r,s)=>{this.events.off(r,s)}),Bt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ft(n,this.name)}get context(){return hn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return F5(e);if(typeof e=="number")return j5(e);const{message:n}=V("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Pn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=V("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=V("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;W.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Pn.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Ri.pulse,()=>this.checkExpirations()),this.events.on(Pn.created,e=>{const n=Pn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Pn.expired,e=>{const n=Pn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Pn.deleted,e=>{const n=Pn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}}var SB=Object.defineProperty,xB=(t,e,n)=>e in t?SB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,it=(t,e,n)=>xB(t,typeof e!="symbol"?e+"":e,n);class NB extends QN{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,it(this,"name",N6),it(this,"abortController"),it(this,"isDevEnv"),it(this,"verifyUrlV3",P6),it(this,"storagePrefix",Ar),it(this,"version",l1),it(this,"publicKey"),it(this,"fetchPromise"),it(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&W.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),it(this,"register",async s=>{if(!Oo()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Xr.getDocument(),u=this.startAbortTimer(W.ONE_SECOND*5),d=await new Promise((h,g)=>{const f=()=>{window.removeEventListener("message",m),l.body.removeChild(p),g("attestation aborted")};this.abortController.signal.addEventListener("abort",f);const p=l.createElement("iframe");p.src=c,p.style.display="none",p.addEventListener("error",f,{signal:this.abortController.signal});const m=b=>{if(b.data&&typeof b.data=="string")try{const C=JSON.parse(b.data);if(C.type==="verify_attestation"){if(af(C.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(p),this.abortController.signal.removeEventListener("abort",f),window.removeEventListener("message",m),h(C.attestation===null?"":C.attestation)}}catch(C){this.logger.warn(C)}};l.body.appendChild(p),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),it(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(af(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),it(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(W.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),it(this,"getVerifyUrl",s=>{let i=s||Ea;return O6.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Ea}`),i=Ea),i}),it(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(W.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),it(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),it(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),it(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),it(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),it(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),it(this,"validateAttestation",(s,i)=>{const o=Rk(s,i.publicKey),a={hasExpired:W.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ft(n,this.name),this.abortController=new AbortController,this.isDevEnv=Fp(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return hn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),W.toMiliseconds(e))}}var TB=Object.defineProperty,PB=(t,e,n)=>e in t?TB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vw=(t,e,n)=>PB(t,typeof e!="symbol"?e+"":e,n);class OB extends eT{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,vw(this,"context",R6),vw(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${D6}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Ft(n,this.context)}}var RB=Object.defineProperty,Ew=Object.getOwnPropertySymbols,DB=Object.prototype.hasOwnProperty,$B=Object.prototype.propertyIsEnumerable,Lf=(t,e,n)=>e in t?RB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xo=(t,e)=>{for(var n in e||(e={}))DB.call(e,n)&&Lf(t,n,e[n]);if(Ew)for(var n of Ew(e))$B.call(e,n)&&Lf(t,n,e[n]);return t},gt=(t,e,n)=>Lf(t,typeof e!="symbol"?e+"":e,n);class kB extends tT{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,gt(this,"context",k6),gt(this,"storagePrefix",Ar),gt(this,"storageVersion",$6),gt(this,"events",new Map),gt(this,"shouldPersist",!1),gt(this,"init",async()=>{if(!Fp())try{const s={eventId:sy(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:lE(this.core.relayer.protocol,this.core.relayer.version,Pf)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),gt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=sy(),u=this.core.projectId||"",d=Date.now(),h=Xo({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),gt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Xo(Xo({},a),this.setMethods(a.eventId))}),gt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),gt(this,"setEventListeners",()=>{this.core.heartbeat.on(Ri.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{W.fromMiliseconds(Date.now())-W.fromMiliseconds(s.timestamp)>U6&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),gt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),gt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),gt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),gt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),gt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Xo(Xo({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),gt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),gt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${B6}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Pf}${i}`,{method:"POST",body:JSON.stringify(s)})}),gt(this,"getAppDomain",()=>cE().url),this.logger=Ft(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var UB=Object.defineProperty,Cw=Object.getOwnPropertySymbols,BB=Object.prototype.hasOwnProperty,LB=Object.prototype.propertyIsEnumerable,Mf=(t,e,n)=>e in t?UB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_w=(t,e)=>{for(var n in e||(e={}))BB.call(e,n)&&Mf(t,n,e[n]);if(Cw)for(var n of Cw(e))LB.call(e,n)&&Mf(t,n,e[n]);return t},Ye=(t,e,n)=>Mf(t,typeof e!="symbol"?e+"":e,n);let MB=class A1 extends zN{constructor(e){var n;super(e),Ye(this,"protocol",c1),Ye(this,"version",l1),Ye(this,"name",Tf),Ye(this,"relayUrl"),Ye(this,"projectId"),Ye(this,"customStoragePrefix"),Ye(this,"events",new Bn.EventEmitter),Ye(this,"logger"),Ye(this,"heartbeat"),Ye(this,"relayer"),Ye(this,"crypto"),Ye(this,"storage"),Ye(this,"history"),Ye(this,"expirer"),Ye(this,"pairing"),Ye(this,"verify"),Ye(this,"echoClient"),Ye(this,"linkModeSupportedApps"),Ye(this,"eventClient"),Ye(this,"initialized",!1),Ye(this,"logChunkController"),Ye(this,"on",(a,c)=>this.events.on(a,c)),Ye(this,"once",(a,c)=>this.events.once(a,c)),Ye(this,"off",(a,c)=>this.events.off(a,c)),Ye(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ye(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Xe.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||d1,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=So({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:i6.logger,name:Tf}),{logger:i,chunkLoggerController:o}=Tp({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ft(i,this.name),this.heartbeat=new jx,this.crypto=new h4(this,this.logger,e==null?void 0:e.keychain),this.history=new CB(this,this.logger),this.expirer=new IB(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new _N(_w(_w({},o6),e==null?void 0:e.storageOptions)),this.relayer=new M4({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new bB(this,this.logger),this.verify=new NB(this,this.logger,this.storage),this.echoClient=new OB(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new kB(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new A1(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(b6,r),n}get context(){return hn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(nw,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(nw)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&s6.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const FB=MB,I1="wc",S1=2,x1="client",ng=`${I1}@${S1}:${x1}:`,ch={name:x1,logger:"error"},Aw="WALLETCONNECT_DEEPLINK_CHOICE",jB="proposal",Iw="Proposal expired",zB="session",qi=W.SEVEN_DAYS,qB="engine",mt={wc_sessionPropose:{req:{ttl:W.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1104},res:{ttl:W.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1106},res:{ttl:W.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:W.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:W.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1112},res:{ttl:W.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:W.ONE_DAY,prompt:!1,tag:1114},res:{ttl:W.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:W.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:W.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:W.FIVE_MINUTES,prompt:!1,tag:1119}}},lh={min:W.FIVE_MINUTES,max:W.SEVEN_DAYS},dr={idle:"IDLE",active:"ACTIVE"},HB={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},WB="request",VB=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],GB="wc",KB="auth",YB="authKeys",ZB="pairingTopics",JB="requests",Zu=`${GB}@${1.5}:${KB}:`,Pl=`${Zu}:PUB_KEY`;var XB=Object.defineProperty,QB=Object.defineProperties,eL=Object.getOwnPropertyDescriptors,Sw=Object.getOwnPropertySymbols,tL=Object.prototype.hasOwnProperty,nL=Object.prototype.propertyIsEnumerable,Ff=(t,e,n)=>e in t?XB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Je=(t,e)=>{for(var n in e||(e={}))tL.call(e,n)&&Ff(t,n,e[n]);if(Sw)for(var n of Sw(e))nL.call(e,n)&&Ff(t,n,e[n]);return t},Xt=(t,e)=>QB(t,eL(e)),j=(t,e,n)=>Ff(t,typeof e!="symbol"?e+"":e,n);class rL extends iT{constructor(e){super(e),j(this,"name",qB),j(this,"events",new xp),j(this,"initialized",!1),j(this,"requestQueue",{state:dr.idle,queue:[]}),j(this,"sessionRequestQueue",{state:dr.idle,queue:[]}),j(this,"requestQueueDelay",W.ONE_SECOND),j(this,"expectedPairingMethodMap",new Map),j(this,"recentlyDeletedMap",new Map),j(this,"recentlyDeletedLimit",200),j(this,"relayMessageCache",[]),j(this,"pendingSessions",new Map),j(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(mt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},W.toMiliseconds(this.requestQueueDelay)))}),j(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Xt(Je({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Kk(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const v=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=v.active}}catch(v){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),v}if(!u||!h){const{topic:v,uri:_}=await this.client.core.pairing.create();u=v,d=_}if(!u){const{message:v}=V("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(v)}const g=await this.client.core.crypto.generateKeyPair(),f=mt.wc_sessionPropose.req.ttl||W.FIVE_MINUTES,p=ht(f),m=Xt(Je(Je({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:u1}],proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:fr()}),b=Ue("session_connect",m.id),{reject:C,resolve:y,done:E}=ei(f,Iw),w=({id:v})=>{v===m.id&&(this.client.events.off("proposal_expire",w),this.pendingSessions.delete(m.id),this.events.emit(b,{error:{message:Iw,code:0}}))};return this.client.events.on("proposal_expire",w),this.events.once(b,({error:v,session:_})=>{this.client.events.off("proposal_expire",w),v?C(v):_&&y(_)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:E}}),j(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),j(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[zn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(x){throw o.setError(Ys.no_internet_connection),x}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(x){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Ys.proposal_not_found),x}try{await this.isValidApprove(n)}catch(x){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ys.session_approve_namespace_validation_failure),x}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:f,proposer:p,requiredNamespaces:m,optionalNamespaces:b}=g;let C=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:f});C||(C=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:zn.session_approve_started,properties:{topic:f,trace:[zn.session_approve_started,zn.session_namespaces_validation_success]}}));const y=await this.client.core.crypto.generateKeyPair(),E=p.publicKey,w=await this.client.core.crypto.generateSharedKey(y,E),v=Je(Je(Je({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:y,metadata:this.client.metadata},expiry:ht(qi)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),_=Xe.relay;C.addTrace(zn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:_})}catch(x){throw C.setError(Ys.subscribe_session_topic_failure),x}C.addTrace(zn.subscribe_session_topic_success);const N=Xt(Je({},v),{topic:w,requiredNamespaces:m,optionalNamespaces:b,pairingTopic:f,acknowledged:!1,self:v.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:y,transportType:Xe.relay});await this.client.session.set(w,N),C.addTrace(zn.store_session);try{C.addTrace(zn.publishing_session_settle),await this.sendRequest({topic:w,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch(x=>{throw C==null||C.setError(Ys.session_settle_publish_failure),x}),C.addTrace(zn.session_settle_publish_success),C.addTrace(zn.publishing_session_approve),await this.sendResult({id:a,topic:f,result:{relay:{protocol:c??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(x=>{throw C==null||C.setError(Ys.session_approve_publish_failure),x}),C.addTrace(zn.session_approve_publish_success)}catch(x){throw this.client.logger.error(x),this.client.session.delete(w,We("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(w),x}return this.client.core.eventClient.deleteEvent({eventId:C.eventId}),await this.client.core.pairing.updateMetadata({topic:f,metadata:p.metadata}),await this.client.proposal.delete(a,We("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:f}),await this.setExpiry(w,ht(qi)),{topic:w,acknowledged:()=>Promise.resolve(this.client.session.get(w))}}),j(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:mt.wc_sessionPropose.reject}),await this.client.proposal.delete(r,We("USER_DISCONNECTED")))}),j(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=ei(),c=fr(),l=li().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Ue("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),j(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=fr(),{done:i,resolve:o,reject:a}=ei();return this.events.once(Ue("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,ht(qi)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),j(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=mt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Xe.relay&&await this.confirmOnlineStateOrThrow();const c=fr(),l=li().toString(),{done:u,resolve:d,reject:h}=ei(o,"Request expired. Please try again.");this.events.once(Ue("session_request",c),({error:m,result:b})=>{m?h(m):d(b)});const g="wc_sessionRequest",f=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(f)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:g,params:{request:Xt(Je({},s),{expiryTimestamp:ht(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:f}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const p={request:Xt(Je({},s),{expiryTimestamp:ht(o)}),chainId:r};return await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:g,params:p,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,p)}).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const C=await W5(this.client.core.storage,Aw);await z5({id:c,topic:i,wcDeepLink:C})}m()}),u()]).then(m=>m[2])}),j(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Xe.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);pr(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):On(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),j(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=fr(),i=li().toString(),{done:o,resolve:a,reject:c}=ei();this.events.once(Ue("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),j(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=li().toString(),a=fr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),j(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:We("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=V("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),j(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Jk(r,n)))),j(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),j(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Xe.link_mode:Xe.relay;o===Xe.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:g,nbf:f,methods:p=[],expiry:m}=n,b=[...n.resources||[]],{topic:C,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:C,uri:y}});const E=await this.client.core.crypto.generateKeyPair(),w=Nl(E);if(await Promise.all([this.client.auth.authKeys.set(Pl,{responseTopic:w,publicKey:E}),this.client.auth.pairingTopics.set(w,{topic:w,pairingTopic:C})]),await this.client.core.relayer.subscribe(w,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${C}`),p.length>0){const{namespace:D}=co(a[0]);let $=a$(D,"request",p);xl(b)&&($=l$($,b.pop())),b.push($)}const v=m&&m>mt.wc_sessionAuthenticate.req.ttl?m:mt.wc_sessionAuthenticate.req.ttl,_={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:g,nbf:f,resources:b},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:ht(v)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},x={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:C,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:ht(mt.wc_sessionPropose.req.ttl),id:fr()},{done:O,resolve:P,reject:k}=ei(v,"Request expired"),B=fr(),L=Ue("session_connect",x.id),I=Ue("session_request",B),S=async({error:D,session:$})=>{this.events.off(I,R),D?k(D):$&&P({session:$})},R=async D=>{var $,q,Z;if(await this.deletePendingAuthRequest(B,{message:"fulfilled",code:0}),D.error){const Ae=We("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return D.error.code===Ae.code?void 0:(this.events.off(L,S),k(D.error.message))}await this.deleteProposal(x.id),this.events.off(L,S);const{cacaos:oe,responder:J}=D.result,le=[],he=[];for(const Ae of oe){await py({cacao:Ae,projectId:this.client.core.projectId})||(this.client.logger.error(Ae,"Signature verification failed"),k(We("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:lt}=Ae,jt=xl(lt.resources),fn=[yf(lt.iss)],An=eu(lt.iss);if(jt){const Vt=gy(jt),Nr=my(jt);le.push(...Vt),fn.push(...Nr)}for(const Vt of fn)he.push(`${Vt}:${An}`)}const xe=await this.client.core.crypto.generateSharedKey(E,J.publicKey);let ze;le.length>0&&(ze={topic:xe,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:J,controller:J.publicKey,expiry:ht(qi),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:C,namespaces:Fy([...new Set(le)],[...new Set(he)]),transportType:o},await this.client.core.relayer.subscribe(xe,{transportType:o}),await this.client.session.set(xe,ze),C&&await this.client.core.pairing.updateMetadata({topic:C,metadata:J.metadata}),ze=this.client.session.get(xe)),($=this.client.metadata.redirect)!=null&&$.linkMode&&(q=J.metadata.redirect)!=null&&q.linkMode&&(Z=J.metadata.redirect)!=null&&Z.universal&&r&&(this.client.core.addLinkModeSupportedApp(J.metadata.redirect.universal),this.client.session.update(xe,{transportType:Xe.link_mode})),P({auths:oe,session:ze})};this.events.once(L,S),this.events.once(I,R);let U;try{if(i){const D=Is("wc_sessionAuthenticate",_,B);this.client.core.history.set(C,D);const $=await this.client.core.crypto.encode("",D,{type:qc,encoding:Es});U=hl(r,C,$)}else await Promise.all([this.sendRequest({topic:C,method:"wc_sessionAuthenticate",params:_,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:B}),this.sendRequest({topic:C,method:"wc_sessionPropose",params:x,expiry:mt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:x.id})])}catch(D){throw this.events.off(L,S),this.events.off(I,R),D}return await this.setProposal(x.id,x),await this.setAuthRequest(B,{request:Xt(Je({},_),{verifyContext:{}}),pairingTopic:C,transportType:o}),{uri:U??y,response:O}}),j(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Zs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(Zo.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Zo.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Xe.relay;a===Xe.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Nl(c),d={type:Gr,receiverPublicKey:c,senderPublicKey:l},h=[],g=[];for(const m of s){if(!await py({cacao:m,projectId:this.client.core.projectId})){i.setError(Zo.invalid_cacao);const w=We("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:w,encodeOpts:d}),new Error(w.message)}i.addTrace(Zs.cacaos_verified);const{p:b}=m,C=xl(b.resources),y=[yf(b.iss)],E=eu(b.iss);if(C){const w=gy(C),v=my(C);h.push(...w),y.push(...v)}for(const w of y)g.push(`${w}:${E}`)}const f=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Zs.create_authenticated_session_topic);let p;if((h==null?void 0:h.length)>0){p={topic:f,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:ht(qi),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Fy([...new Set(h)],[...new Set(g)]),transportType:a},i.addTrace(Zs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:a})}catch(m){throw i.setError(Zo.subscribe_authenticated_session_topic_failure),m}i.addTrace(Zs.subscribe_authenticated_session_topic_success),await this.client.session.set(f,p),i.addTrace(Zs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Zs.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(Zo.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:p}}),j(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Xe.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Nl(o),l={type:Gr,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:mt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,We("USER_DISCONNECTED"))}),j(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return IE(r,s)}),j(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),j(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),j(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,We("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Aw).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,We("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=dr.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),j(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Ys.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,We("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),j(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=dr.idle,this.client.events.emit("session_request_expire",{id:n}))}),j(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),j(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),j(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,ht(mt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),j(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Xe.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),j(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||ht(mt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),j(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Is(s,i,c);let g;const f=!!u;try{const b=f?Es:Zn;g=await this.client.core.crypto.encode(r,h,{encoding:b})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),b}let p;if(VB.includes(s)){const b=yr(JSON.stringify(h)),C=yr(g);p=await this.client.core.verify.register({id:C,decryptedId:b})}const m=mt[s].req;if(m.attestation=p,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),f){const b=hl(u,r,g);await global.Linking.openURL(b,this.client.name)}else{const b=mt[s].req;o&&(b.ttl=o),a&&(b.id=a),b.tvf=Xt(Je({},d),{correlationId:h.id}),l?(b.internal=Xt(Je({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,g,b)):this.client.core.relayer.publish(r,g,b).catch(C=>this.client.logger.error(C))}return h.id}),j(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Vu(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Es:Zn;u=await this.client.core.crypto.encode(s,l,Xt(Je({},a||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),f}let h,g;try{h=await this.client.core.history.get(s,r);const f=h.request;try{g=this.getTVFParams(r,f.params,i)}catch(p){this.client.logger.warn("sendResult() -> getTVFParams() failed",p)}}catch(f){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),f}if(d){const f=hl(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=mt[f].res;p.tvf=Xt(Je({},g),{correlationId:r}),o?(p.internal=Xt(Je({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,p)):this.client.core.relayer.publish(s,u,p).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),j(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=Gu(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?Es:Zn;u=await this.client.core.crypto.encode(s,l,Xt(Je({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),g}let h;try{h=await this.client.core.history.get(s,r)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),g}if(d){const g=hl(c,s,u);await global.Linking.openURL(g,this.client.name)}else{const g=h.request.method,f=a||mt[g].res;this.client.core.relayer.publish(s,u,f)}await this.client.core.history.resolve(l)}),j(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;ms(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ms(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),j(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),j(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),j(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===dr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dr.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=dr.idle}),j(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),j(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),j(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=V("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),j(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),j(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Fr.proposal_listener_not_found)),this.isValidConnect(Je({},s.params));const u=a.expiryTimestamp||ht(mt.wc_sessionPropose.req.ttl),d=Je({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:yr(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(hr.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:mt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),j(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(pr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(On(r)){await this.client.proposal.delete(i,We("USER_DISCONNECTED"));const o=Ue("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),j(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,g=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!g)return this.client.logger.error(`Pending session not found for topic ${n}`);const f=this.client.proposal.get(g.proposalId),p=Xt(Je(Je(Je({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Xe.relay});await this.client.session.set(p.topic,p),await this.setExpiry(p.topic,p.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:p.peer.metadata}),this.client.events.emit("session_connect",{session:p}),this.events.emit(Ue("session_connect",g.proposalId),{session:p}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(p),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),j(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;pr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Ue("session_approve",s),{})):On(r)&&(await this.client.session.delete(n,We("USER_DISCONNECTED")),this.events.emit(Ue("session_approve",s),{error:r.error}))}),j(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Ko.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:We("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Je({topic:n},s));try{Ko.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Ko.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),j(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),j(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Ue("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);pr(r)?this.events.emit(Ue("session_update",s),{}):On(r)&&this.events.emit(Ue("session_update",s),{error:r.error})}),j(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,ht(qi)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),j(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Ue("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);pr(r)?this.events.emit(Ue("session_extend",s),{}):On(r)&&this.events.emit(Ue("session_extend",s),{error:r.error})}),j(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),j(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Ue("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);pr(r)?this.events.emit(Ue("session_ping",s),{}):On(r)&&this.events.emit(Ue("session_ping",s),{error:r.error})},500)}),j(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(bt.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:We("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),j(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Je({topic:o},h));const g=this.client.session.get(o),f=await this.getVerifyContext({attestationId:c,hash:yr(JSON.stringify(Is("wc_sessionRequest",h,d))),encryptedId:l,metadata:g.peer.metadata,transportType:u}),p={id:d,topic:o,params:h,verifyContext:f};await this.setPendingSessionRequest(p),u===Xe.link_mode&&(r=g.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=g.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(p):(this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue())}catch(g){await this.sendError({id:d,topic:o,error:g}),this.client.logger.error(g)}}),j(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Ue("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);pr(r)?this.events.emit(Ue("session_request",s),{result:r.result}):On(r)&&this.events.emit(Ue("session_request",s),{error:r.error})}),j(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Ko.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Je({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Ko.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),j(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),pr(r)?this.events.emit(Ue("session_request",s),{result:r.result}):On(r)&&this.events.emit(Ue("session_request",s),{error:r.error})}),j(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:yr(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),g={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:g,pairingTopic:s,transportType:c}),c===Xe.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),g={type:Gr,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:g,rpcOpts:mt.wc_sessionAuthenticate.autoReject,appLink:h})}}),j(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),j(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dr.idle,this.processSessionRequestQueue()},W.toMiliseconds(this.requestQueueDelay))}),j(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Ue("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Ue("session_request",i.request.id),{error:r})})}),j(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===dr.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=dr.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),j(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),j(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Is("wc_sessionPropose",Xt(Je({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),j(this,"isValidConnect",async n=>{if(!tn(n)){const{message:l}=V("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(xt(r)||await this.isValidPairingTopic(r),!l8(c)){const{message:l}=V("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!xt(s)&&Os(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!xt(i)&&Os(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),xt(o)||this.validateSessionProps(o,"sessionProperties"),!xt(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),j(this,"validateNamespaces",(n,r)=>{const s=c8(n,"connect()",r);if(s)throw new Error(s.message)}),j(this,"isValidApprove",async n=>{if(!tn(n))throw new Error(V("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=th(s,"approve()");if(l)throw new Error(l.message);const u=qy(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!at(i,!0)){const{message:d}=V("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(xt(o)||this.validateSessionProps(o,"sessionProperties"),!xt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),j(this,"isValidReject",async n=>{if(!tn(n)){const{message:i}=V("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!d8(s)){const{message:i}=V("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),j(this,"isValidSessionSettleRequest",n=>{if(!tn(n)){const{message:l}=V("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!n1(r)){const{message:l}=V("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=n8(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=th(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(ms(o)){const{message:l}=V("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),j(this,"isValidUpdate",async n=>{if(!tn(n)){const{message:c}=V("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=th(s,"update()");if(o)throw new Error(o.message);const a=qy(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),j(this,"isValidExtend",async n=>{if(!tn(n)){const{message:s}=V("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),j(this,"isValidRequest",async n=>{if(!tn(n)){const{message:c}=V("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!zy(a,i)){const{message:c}=V("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!h8(s)){const{message:c}=V("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!g8(a,i,s.method)){const{message:c}=V("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!b8(o,lh)){const{message:c}=V("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${lh.min} and ${lh.max}`);throw new Error(c)}}),j(this,"isValidRespond",async n=>{var r;if(!tn(n)){const{message:o}=V("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!f8(i)){const{message:o}=V("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),j(this,"isValidPing",async n=>{if(!tn(n)){const{message:s}=V("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),j(this,"isValidEmit",async n=>{if(!tn(n)){const{message:a}=V("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!zy(o,i)){const{message:a}=V("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!p8(s)){const{message:a}=V("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!m8(o,i,s.name)){const{message:a}=V("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),j(this,"isValidDisconnect",async n=>{if(!tn(n)){const{message:s}=V("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),j(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!at(s,!1))throw new Error("uri is required parameter");if(!at(i,!1))throw new Error("domain is required parameter");if(!at(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>co(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=co(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),j(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Ea,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Xe.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),j(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=V("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),j(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),j(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),j(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=V("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),j(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Xe.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),j(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),j(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=ry(n,"topic")||"",s=decodeURIComponent(ry(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Xe.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),j(this,"registerLinkModeListeners",async()=>{var n;if(Fp()||Ws()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),j(this,"getTVFParams",(n,r,s)=>{var i,o;const a={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const c=this.extractTxHashesFromResult(r.request,s);a.txHashes=c,a.contractAddresses=this.isValidContractData(r.request.params)?[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]:[]}catch(c){this.client.logger.warn("Error getting TVF params",c)}return a}),j(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),j(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=HB[i];if(i==="sui_signTransaction")return[WD(r.transactionBytes)];if(i==="near_signTransaction")return[uy(r)];if(i==="near_signTransactions")return r.map(c=>uy(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[$8({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Kr(r)?r.map(c=>dy(c)):[dy(r)];if(i==="cosmos_signDirect")return[GD(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Kr(a))return i==="solana_signAllTransactions"?a.map(c=>HD(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=V("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(bt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Pl)?this.client.auth.authKeys.get(Pl):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Xe.link_mode?Es:Zn});tg(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:yr(r)})):Ku(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Pn.expired,async e=>{const{topic:n,id:r}=dE(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,V("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,V("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ni.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ni.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!at(e,!1)){const{message:n}=V("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=V("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(ms(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=V("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!at(e,!1)){const{message:n}=V("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=V("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(ms(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=V("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=V("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(at(e,!1)){const{message:n}=V("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=V("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!u8(e)){const{message:n}=V("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=V("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(ms(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=V("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class sL extends $i{constructor(e,n){super(e,n,jB,ng),this.core=e,this.logger=n}}let iL=class extends $i{constructor(e,n){super(e,n,zB,ng),this.core=e,this.logger=n}};class oL extends $i{constructor(e,n){super(e,n,WB,ng,r=>r.id),this.core=e,this.logger=n}}class aL extends $i{constructor(e,n){super(e,n,YB,Zu,()=>Pl),this.core=e,this.logger=n}}class cL extends $i{constructor(e,n){super(e,n,ZB,Zu),this.core=e,this.logger=n}}class lL extends $i{constructor(e,n){super(e,n,JB,Zu,r=>r.id),this.core=e,this.logger=n}}var uL=Object.defineProperty,dL=(t,e,n)=>e in t?uL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uh=(t,e,n)=>dL(t,typeof e!="symbol"?e+"":e,n);class hL{constructor(e,n){this.core=e,this.logger=n,uh(this,"authKeys"),uh(this,"pairingTopics"),uh(this,"requests"),this.authKeys=new aL(this.core,this.logger),this.pairingTopics=new cL(this.core,this.logger),this.requests=new lL(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var fL=Object.defineProperty,pL=(t,e,n)=>e in t?fL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Se=(t,e,n)=>pL(t,typeof e!="symbol"?e+"":e,n);let gL=class N1 extends sT{constructor(e){super(e),Se(this,"protocol",I1),Se(this,"version",S1),Se(this,"name",ch.name),Se(this,"metadata"),Se(this,"core"),Se(this,"logger"),Se(this,"events",new Bn.EventEmitter),Se(this,"engine"),Se(this,"session"),Se(this,"proposal"),Se(this,"pendingRequest"),Se(this,"auth"),Se(this,"signConfig"),Se(this,"on",(r,s)=>this.events.on(r,s)),Se(this,"once",(r,s)=>this.events.once(r,s)),Se(this,"off",(r,s)=>this.events.off(r,s)),Se(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Se(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Se(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Se(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Se(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Se(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||ch.name,this.metadata=U5(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Rc(So({level:(e==null?void 0:e.logger)||ch.logger}));this.core=(e==null?void 0:e.core)||new FB(e),this.logger=Ft(n,this.name),this.session=new iL(this.core,this.logger),this.proposal=new sL(this.core,this.logger),this.pendingRequest=new oL(this.core,this.logger),this.engine=new rL(this),this.auth=new hL(this.core,this.logger)}static async init(e){const n=new N1(e);return await n.initialize(),n}get context(){return hn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},W.toMiliseconds(W.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var pl={exports:{}},xw;function mL(){return xw||(xw=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof gr<"u"&&gr,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof gr<"u"&&gr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function g(I){return typeof I!="string"&&(I=String(I)),I}function f(I){var S={next:function(){var R=I.shift();return{done:R===void 0,value:R}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function p(I){this.map={},I instanceof p?I.forEach(function(S,R){this.append(R,S)},this):Array.isArray(I)?I.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(S){this.append(S,I[S])},this)}p.prototype.append=function(I,S){I=h(I),S=g(S);var R=this.map[I];this.map[I]=R?R+", "+S:S},p.prototype.delete=function(I){delete this.map[h(I)]},p.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},p.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},p.prototype.set=function(I,S){this.map[h(I)]=g(S)},p.prototype.forEach=function(I,S){for(var R in this.map)this.map.hasOwnProperty(R)&&I.call(S,this.map[R],R,this)},p.prototype.keys=function(){var I=[];return this.forEach(function(S,R){I.push(R)}),f(I)},p.prototype.values=function(){var I=[];return this.forEach(function(S){I.push(S)}),f(I)},p.prototype.entries=function(){var I=[];return this.forEach(function(S,R){I.push([R,S])}),f(I)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function b(I){return new Promise(function(S,R){I.onload=function(){S(I.result)},I.onerror=function(){R(I.error)}})}function C(I){var S=new FileReader,R=b(S);return S.readAsArrayBuffer(I),R}function y(I){var S=new FileReader,R=b(S),U=/charset=([A-Za-z0-9_-]+)/.exec(I.type),D=U?U[1]:"utf-8";return S.readAsText(I,D),R}function E(I){for(var S=new Uint8Array(I),R=new Array(S.length),U=0;U<S.length;U++)R[U]=String.fromCharCode(S[U]);return R.join("")}function w(I){if(I.slice)return I.slice(0);var S=new Uint8Array(I.byteLength);return S.set(new Uint8Array(I)),S.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=w(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=w(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=m(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=m(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(C);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=m(this);if(I)return I;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var _=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(I){var S=I.toUpperCase();return _.indexOf(S)>-1?S:I}function x(I,S){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var R=S.body;if(I instanceof x){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,S.headers||(this.headers=new p(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!R&&I._bodyInit!=null&&(R=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new p(S.headers)),this.method=N(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&R)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(R),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})};function O(I){var S=new FormData;return I.trim().split("&").forEach(function(R){if(R){var U=R.split("="),D=U.shift().replace(/\+/g," "),$=U.join("=").replace(/\+/g," ");S.append(decodeURIComponent(D),decodeURIComponent($))}}),S}function P(I){var S=new p,R=I.replace(/\r?\n[\t ]+/g," ");return R.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var D=U.split(":"),$=D.shift().trim();if($){var q=D.join(":").trim();try{S.append($,q)}catch(Z){console.warn("Response "+Z.message)}}}),S}v.call(x.prototype);function k(I,S){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new p(S.headers),this.url=S.url||"",this._initBody(I)}v.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var I=new k(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var B=[301,302,303,307,308];k.redirect=function(I,S){if(B.indexOf(S)===-1)throw new RangeError("Invalid status code");return new k(null,{status:S,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,R){this.message=S,this.name=R;var U=Error(S);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function L(I,S){return new Promise(function(R,U){var D=new x(I,S);if(D.signal&&D.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function q(){$.abort()}$.onload=function(){var J={statusText:$.statusText,headers:P($.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&($.status<200||$.status>599)?J.status=200:J.status=$.status,J.url="responseURL"in $?$.responseURL:J.headers.get("X-Request-URL");var le="response"in $?$.response:$.responseText;setTimeout(function(){R(new k(le,J))},0)},$.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){U(new o.DOMException("Aborted","AbortError"))},0)};function Z(J){try{return J===""&&a.location.href?a.location.href:J}catch{return J}}if($.open(D.method,Z(D.url),!0),D.credentials==="include"?$.withCredentials=!0:D.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(c.blob?$.responseType="blob":c.arrayBuffer&&($.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof p||a.Headers&&S.headers instanceof a.Headers)){var oe=[];Object.getOwnPropertyNames(S.headers).forEach(function(J){oe.push(h(J)),$.setRequestHeader(J,g(S.headers[J]))}),D.headers.forEach(function(J,le){oe.indexOf(le)===-1&&$.setRequestHeader(le,J)})}else D.headers.forEach(function(J,le){$.setRequestHeader(le,J)});D.signal&&(D.signal.addEventListener("abort",q),$.onreadystatechange=function(){$.readyState===4&&D.signal.removeEventListener("abort",q)}),$.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return L.polyfill=!0,a.fetch||(a.fetch=L,a.Headers=p,a.Request=x,a.Response=k),o.Headers=p,o.Request=x,o.Response=k,o.fetch=L,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(pl,pl.exports)),pl.exports}var yL=mL();const Nw=bu(yL);var wL=Object.defineProperty,bL=Object.defineProperties,vL=Object.getOwnPropertyDescriptors,Tw=Object.getOwnPropertySymbols,EL=Object.prototype.hasOwnProperty,CL=Object.prototype.propertyIsEnumerable,Pw=(t,e,n)=>e in t?wL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ow=(t,e)=>{for(var n in e||(e={}))EL.call(e,n)&&Pw(t,n,e[n]);if(Tw)for(var n of Tw(e))CL.call(e,n)&&Pw(t,n,e[n]);return t},Rw=(t,e)=>bL(t,vL(e));const _L={Accept:"application/json","Content-Type":"application/json"},AL="POST",Dw={headers:_L,method:AL},$w=10;let or=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Bn.EventEmitter,this.isAvailable=!1,this.registering=!1,!Zy(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Jr(e),r=await(await Nw(this.url,Rw(Ow({},Dw),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Zy(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Jr({id:1,jsonrpc:"2.0",method:"test",params:[]});await Nw(e,Rw(Ow({},Dw),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ei(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Gu(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return i1(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>$w&&this.events.setMaxListeners($w)}};const kw="error",IL="wss://relay.walletconnect.org",SL="wc",xL="universal_provider",gl=`${SL}@2:${xL}:`,T1="https://rpc.walletconnect.org/v1/",no="generic",NL=`${T1}bundler`,Mn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Uw(t){return typeof t=="object"&&t!==null}function rg(t){return t==null||typeof t!="object"&&typeof t!="function"}function P1(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function O1(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const TL="[object RegExp]",R1="[object String]",D1="[object Number]",$1="[object Boolean]",k1="[object Arguments]",PL="[object Symbol]",OL="[object Date]",RL="[object Map]",DL="[object Set]",$L="[object Array]",kL="[object ArrayBuffer]",UL="[object Object]",BL="[object DataView]",LL="[object Uint8Array]",ML="[object Uint8ClampedArray]",FL="[object Uint16Array]",jL="[object Uint32Array]",zL="[object Int8Array]",qL="[object Int16Array]",HL="[object Int32Array]",WL="[object Float32Array]",VL="[object Float64Array]";function sg(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function GL(t,e){return oo(t,void 0,t,new Map,e)}function oo(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(rg(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=oo(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,oo(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(oo(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(sg(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=oo(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ri(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ri(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ri(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ri(o,t,n,r,s),o}if(typeof t=="object"&&KL(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ri(o,t,n,r,s),o}return t}function ri(t,e,n=t,r,s){const i=[...Object.keys(e),...P1(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=oo(e[a],a,n,r,s))}}function KL(t){switch(O1(t)){case k1:case $L:case kL:case BL:case $1:case OL:case WL:case VL:case zL:case qL:case HL:case RL:case D1:case UL:case TL:case DL:case R1:case PL:case LL:case ML:case FL:case jL:return!0;default:return!1}}function YL(t,e){return GL(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case D1:case R1:case $1:{const o=new t.constructor(t==null?void 0:t.valueOf());return ri(o,t),o}case k1:{const o={};return ri(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Bw(t){return YL(t)}function Lw(t){return t!==null&&typeof t=="object"&&O1(t)==="[object Arguments]"}function ZL(t){return sg(t)}function JL(){}function XL(t){if(rg(t))return t;if(Array.isArray(t)||sg(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function QL(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function eM(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=jf(s,o,r,new Map)}return s}function jf(t,e,n,r){if(rg(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return XL(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...P1(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Lw(a)&&(a={...a}),Lw(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Bw(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const g=d[h];u[g]=c[g]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Uw(c)&&Uw(a)?t[o]=jf(c,a,n,r):c==null&&QL(a)?t[o]=jf({},a,n,r):c==null&&ZL(a)?t[o]=Bw(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function tM(t,...e){return eM(t,...e,JL)}var nM=Object.defineProperty,rM=Object.defineProperties,sM=Object.getOwnPropertyDescriptors,Mw=Object.getOwnPropertySymbols,iM=Object.prototype.hasOwnProperty,oM=Object.prototype.propertyIsEnumerable,Fw=(t,e,n)=>e in t?nM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ml=(t,e)=>{for(var n in e||(e={}))iM.call(e,n)&&Fw(t,n,e[n]);if(Mw)for(var n of Mw(e))oM.call(e,n)&&Fw(t,n,e[n]);return t},aM=(t,e)=>rM(t,sM(e));function En(t,e,n){var r;const s=co(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${T1}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function ki(t){return t.includes(":")?t.split(":")[1]:t}function U1(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function cM(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function yl(t={},e={}){const n=jw(t),r=jw(e);return tM(n,r)}function jw(t){var e,n,r,s,i;const o={};if(!Os(t))return o;for(const[a,c]of Object.entries(t)){const l=Wu(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},g=io(a);o[g]=aM(ml(ml({},o[g]),c),{chains:Er(l,(e=o[g])==null?void 0:e.chains),methods:Er(u,(n=o[g])==null?void 0:n.methods),events:Er(d,(r=o[g])==null?void 0:r.events)}),(Os(h)||Os(((s=o[g])==null?void 0:s.rpcMap)||{}))&&(o[g].rpcMap=ml(ml({},h),(i=o[g])==null?void 0:i.rpcMap))}return o}function zw(t){return t.includes(":")?t.split(":")[2]:t}function qw(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=Wu(n)?[n]:r.chains?r.chains:U1(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function dh(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const B1={},$e=t=>B1[t],hh=(t,e)=>{B1[t]=e};var lM=Object.defineProperty,uM=(t,e,n)=>e in t?lM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hi=(t,e,n)=>uM(t,typeof e!="symbol"?e+"":e,n);class dM{constructor(e){Hi(this,"name","polkadot"),Hi(this,"client"),Hi(this,"httpProviders"),Hi(this,"events"),Hi(this,"namespace"),Hi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ki(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}}var hM=Object.defineProperty,fM=Object.defineProperties,pM=Object.getOwnPropertyDescriptors,Hw=Object.getOwnPropertySymbols,gM=Object.prototype.hasOwnProperty,mM=Object.prototype.propertyIsEnumerable,zf=(t,e,n)=>e in t?hM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ww=(t,e)=>{for(var n in e||(e={}))gM.call(e,n)&&zf(t,n,e[n]);if(Hw)for(var n of Hw(e))mM.call(e,n)&&zf(t,n,e[n]);return t},Vw=(t,e)=>fM(t,pM(e)),Wi=(t,e,n)=>zf(t,typeof e!="symbol"?e+"":e,n);class yM{constructor(e){Wi(this,"name","eip155"),Wi(this,"client"),Wi(this,"chainId"),Wi(this,"namespace"),Wi(this,"httpProviders"),Wi(this,"events"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||En(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(ki(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Vw(Ww({},u.sessionProperties||{}),{capabilities:Vw(Ww({},d||{}),{[l]:h})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Is("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${NL}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var wM=Object.defineProperty,bM=(t,e,n)=>e in t?wM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vi=(t,e,n)=>bM(t,typeof e!="symbol"?e+"":e,n);class vM{constructor(e){Vi(this,"name","solana"),Vi(this,"client"),Vi(this,"httpProviders"),Vi(this,"events"),Vi(this,"namespace"),Vi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ki(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}}var EM=Object.defineProperty,CM=(t,e,n)=>e in t?EM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gi=(t,e,n)=>CM(t,typeof e!="symbol"?e+"":e,n);class _M{constructor(e){Gi(this,"name","cosmos"),Gi(this,"client"),Gi(this,"httpProviders"),Gi(this,"events"),Gi(this,"namespace"),Gi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ki(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}}var AM=Object.defineProperty,IM=(t,e,n)=>e in t?AM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ki=(t,e,n)=>IM(t,typeof e!="symbol"?e+"":e,n);class SM{constructor(e){Ki(this,"name","algorand"),Ki(this,"client"),Ki(this,"httpProviders"),Ki(this,"events"),Ki(this,"namespace"),Ki(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||En(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ln(new or(r,$e("disableProviderPing")))}}var xM=Object.defineProperty,NM=(t,e,n)=>e in t?xM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yi=(t,e,n)=>NM(t,typeof e!="symbol"?e+"":e,n);class TM{constructor(e){Yi(this,"name","cip34"),Yi(this,"client"),Yi(this,"httpProviders"),Yi(this,"events"),Yi(this,"namespace"),Yi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=ki(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}}var PM=Object.defineProperty,OM=(t,e,n)=>e in t?PM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zi=(t,e,n)=>OM(t,typeof e!="symbol"?e+"":e,n);class RM{constructor(e){Zi(this,"name","elrond"),Zi(this,"client"),Zi(this,"httpProviders"),Zi(this,"events"),Zi(this,"namespace"),Zi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ki(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}}var DM=Object.defineProperty,$M=(t,e,n)=>e in t?DM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ji=(t,e,n)=>$M(t,typeof e!="symbol"?e+"":e,n);class kM{constructor(e){Ji(this,"name","multiversx"),Ji(this,"client"),Ji(this,"httpProviders"),Ji(this,"events"),Ji(this,"namespace"),Ji(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ki(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}}var UM=Object.defineProperty,BM=(t,e,n)=>e in t?UM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xi=(t,e,n)=>BM(t,typeof e!="symbol"?e+"":e,n);class LM{constructor(e){Xi(this,"name","near"),Xi(this,"client"),Xi(this,"httpProviders"),Xi(this,"events"),Xi(this,"namespace"),Xi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||En(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace);return typeof r>"u"?void 0:new Ln(new or(r,$e("disableProviderPing")))}}var MM=Object.defineProperty,FM=(t,e,n)=>e in t?MM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qi=(t,e,n)=>FM(t,typeof e!="symbol"?e+"":e,n);class jM{constructor(e){Qi(this,"name","tezos"),Qi(this,"client"),Qi(this,"httpProviders"),Qi(this,"events"),Qi(this,"namespace"),Qi(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||En(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace);return typeof r>"u"?void 0:new Ln(new or(r))}}var zM=Object.defineProperty,qM=(t,e,n)=>e in t?zM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eo=(t,e,n)=>qM(t,typeof e!="symbol"?e+"":e,n);class HM{constructor(e){eo(this,"name",no),eo(this,"client"),eo(this,"httpProviders"),eo(this,"events"),eo(this,"namespace"),eo(this,"chainId"),this.namespace=e.namespace,this.events=$e("events"),this.client=$e("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=co(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||En(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ln(new or(r,$e("disableProviderPing")))}}var WM=Object.defineProperty,VM=Object.defineProperties,GM=Object.getOwnPropertyDescriptors,Gw=Object.getOwnPropertySymbols,KM=Object.prototype.hasOwnProperty,YM=Object.prototype.propertyIsEnumerable,qf=(t,e,n)=>e in t?WM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wl=(t,e)=>{for(var n in e||(e={}))KM.call(e,n)&&qf(t,n,e[n]);if(Gw)for(var n of Gw(e))YM.call(e,n)&&qf(t,n,e[n]);return t},fh=(t,e)=>VM(t,GM(e)),Nn=(t,e,n)=>qf(t,typeof e!="symbol"?e+"":e,n);let ZM=class L1{constructor(e){Nn(this,"client"),Nn(this,"namespaces"),Nn(this,"optionalNamespaces"),Nn(this,"sessionProperties"),Nn(this,"scopedProperties"),Nn(this,"events",new xp),Nn(this,"rpcProviders",{}),Nn(this,"session"),Nn(this,"providerOpts"),Nn(this,"logger"),Nn(this,"uri"),Nn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Rc(So({level:(e==null?void 0:e.logger)||kw})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new L1(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:wl({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Vu(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:We("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=qw(this.session.namespaces);this.namespaces=yl(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=qw(s.namespaces);return this.namespaces=yl(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===no?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Kr(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await gL.init({core:this.providerOpts.core,logger:this.providerOpts.logger||kw,relayUrl:this.providerOpts.relayUrl||IL,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>io(n)))];hh("client",this.client),hh("events",this.events),hh("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=cM(n,this.session),s=U1(r),i=yl(this.namespaces,this.optionalNamespaces),o=fh(wl({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new yM({namespace:o});break;case"algorand":this.rpcProviders[n]=new SM({namespace:o});break;case"solana":this.rpcProviders[n]=new vM({namespace:o});break;case"cosmos":this.rpcProviders[n]=new _M({namespace:o});break;case"polkadot":this.rpcProviders[n]=new dM({namespace:o});break;case"cip34":this.rpcProviders[n]=new TM({namespace:o});break;case"elrond":this.rpcProviders[n]=new RM({namespace:o});break;case"multiversx":this.rpcProviders[n]=new kM({namespace:o});break;case"near":this.rpcProviders[n]=new LM({namespace:o});break;case"tezos":this.rpcProviders[n]=new jM({namespace:o});break;default:this.rpcProviders[no]?this.rpcProviders[no].updateNamespace(o):this.rpcProviders[no]=new HM({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Kr(o)&&this.events.emit("accountsChanged",o.map(zw))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=io(o),l=dh(o)!==dh(a)?`${c}:${dh(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=fh(wl({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",fh(wl({},We("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Mn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[no]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=yl(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>io(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=io(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(zw);if(!Kr(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${gl}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${gl}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${gl}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(gl)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const _a={getSIWX(){return z.state.siwx},async initializeIfEnabled(){var i;const t=z.state.siwx,e=T.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(T.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Be.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Fe.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=se._getClient())==null?void 0:i.disconnect().catch(console.error)),ge.reset("Connect"),Gn.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=z.state.siwx,e=ce.getPlainAddress(T.getActiveCaipAddress()),n=T.getActiveCaipNetwork(),r=se._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Y.getConnectorId(n.chainNamespace)===M.CONNECTOR_ID.AUTH&&ge.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Be.close(),Fe.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Be.state.open||ge.state.view==="ApproveTransaction")&&await Be.open({view:"SIWXSignMessage"}),i.isSmartAccount?Gn.showError("This application might not support Smart Accounts"):Gn.showError("Signature declined"),Fe.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await se.disconnect():Be.close(),ge.reset("Connect"),Fe.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=z.state.siwx,e=ce.getPlainAddress(T.getActiveCaipAddress()),n=T.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=ge.state.view==="ApproveTransaction",r=ge.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=_a.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=T.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Gn.showLoading("Authenticating...",{autoClose:!1}),K.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Fe.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:_a.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Fe.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:_a.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Gn.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=T.state.activeChain;return{network:((e=T.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=K.state.preferredAccountTypes)==null?void 0:n[t])===Ct.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Qe={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Ss={ConnectorExplorerIds:{[M.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[M.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[M.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[M.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[M.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Qe.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Qe.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Qe.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Qe.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Qe.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Qe.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Qe.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Qe.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Qe.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Qe.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Qe.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[M.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[M.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[M.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[M.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[M.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[M.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[M.CONNECTOR_ID.INJECTED]:"Browser Wallet",[M.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[M.CONNECTOR_ID.COINBASE]:"Coinbase",[M.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[M.CONNECTOR_ID.LEDGER]:"Ledger",[M.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[M.CONNECTOR_ID.INJECTED]:"INJECTED",[M.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[M.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[M.CONNECTOR_ID.AUTH]:"AUTH"}},cc={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Qe.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=T.state.activeChain;return M.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Y.getConnectorId(e)===M.CONNECTOR_ID.AUTH&&e===t)}},JM=new AbortController,tt={EmbeddedWalletAbortController:JM,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${XM()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function XM(){return typeof window<"u"}const QM={createLogger(t,e="error"){const n=So({level:e}),{logger:r}=Tp({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},eF="rpc.walletconnect.org";function Kw(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const ph=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],wr={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===eF}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:M.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${M.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return ph.includes(e)?Kw(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,g,f,p,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((p=(f=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:f.http)==null?void 0:p[0])||o,l=((m=r==null?void 0:r[i])==null?void 0:m.map(b=>b.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ss.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>wr.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(el(a.url,a.config))}),ph.includes(t.caipNetworkId)&&r.push(el(Kw(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(el(a))}),Vg(r)},extendWagmiTransports(t,e,n){if(ph.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Vg([n,el(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:M.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=G.getActiveCaipNetworkId(),n=T.getAllRequestedCaipNetworks(),r=Array.from(((c=T.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},ou={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Qt=Ze({providers:{...ou},providerIds:{...ou}}),He={state:Qt,subscribeKey(t,e){return Pt(Qt,t,e)},subscribe(t){return Nt(Qt,()=>{t(Qt)})},subscribeProviders(t){return Nt(Qt.providers,()=>t(Qt.providers))},setProvider(t,e){e&&(Qt.providers[t]=gi(e))},getProvider(t){return Qt.providers[t]},setProviderId(t,e){e&&(Qt.providerIds[t]=e)},getProviderId(t){if(t)return Qt.providerIds[t]},reset(){Qt.providers={...ou},Qt.providerIds={...ou}},resetChain(t){Qt.providers[t]=void 0,Qt.providerIds[t]=void 0}},Yw={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},St={set(t,e){bn.isClient&&localStorage.setItem(`${ae.STORAGE_KEY}${t}`,e)},get(t){return bn.isClient?localStorage.getItem(`${ae.STORAGE_KEY}${t}`):null},delete(t,e){bn.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ae.STORAGE_KEY}${t}`))}},bl=30*1e3,bn={checkIfAllowedToTriggerEmail(){const t=St.get(ae.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<bl){const n=Math.ceil((bl-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=St.get(ae.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<bl)return Math.ceil((bl-e)/1e3)}return 0},checkIfRequestExists(t){return Ct.NOT_SAFE_RPC_METHODS.includes(t.method)||Ct.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(Yw.transactionHash))||(t==null?void 0:t.match(Yw.signedMessage)))?ae.RPC_RESPONSE_TYPE_TX:ae.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ct.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var De;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(De||(De={}));var Hf;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Hf||(Hf={}));const te=De.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cs=t=>{switch(typeof t){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(t)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(t)?te.array:t===null?te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?te.promise:typeof Map<"u"&&t instanceof Map?te.map:typeof Set<"u"&&t instanceof Set?te.set:typeof Date<"u"&&t instanceof Date?te.date:te.object;default:return te.unknown}},H=De.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),tF=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class er extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,De.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}er.create=t=>new er(t);const lc=(t,e)=>{let n;switch(t.code){case H.invalid_type:t.received===te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case H.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,De.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:n=`Unrecognized key(s) in object: ${De.joinValues(t.keys,", ")}`;break;case H.invalid_union:n="Invalid input";break;case H.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${De.joinValues(t.options)}`;break;case H.invalid_enum_value:n=`Invalid enum value. Expected ${De.joinValues(t.options)}, received '${t.received}'`;break;case H.invalid_arguments:n="Invalid function arguments";break;case H.invalid_return_type:n="Invalid function return type";break;case H.invalid_date:n="Invalid date";break;case H.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:De.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case H.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case H.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case H.custom:n="Invalid input";break;case H.invalid_intersection_types:n="Intersection results could not be merged";break;case H.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case H.not_finite:n="Number must be finite";break;default:n=e.defaultError,De.assertNever(t)}return{message:n}};let M1=lc;function nF(t){M1=t}function au(){return M1}const cu=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},rF=[];function ie(t,e){const n=cu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,au(),lc].filter(r=>!!r)});t.common.issues.push(n)}class Mt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return be;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Mt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return be;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const be=Object.freeze({status:"aborted"}),F1=t=>({status:"dirty",value:t}),Wt=t=>({status:"valid",value:t}),Wf=t=>t.status==="aborted",Vf=t=>t.status==="dirty",uc=t=>t.status==="valid",lu=t=>typeof Promise<"u"&&t instanceof Promise;var de;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(de||(de={}));class Ir{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Zw=(t,e)=>{if(uc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new er(t.common.issues);return this._error=n,this._error}}};function Ee(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class _e{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Cs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Cs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mt,ctx:{common:e.parent.common,data:e.data,parsedType:Cs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(lu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cs(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Zw(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(lu(s)?s:Promise.resolve(s));return Zw(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:H.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new nr({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Yr.create(this,this._def)}nullable(){return Si.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tr.create(this,this._def)}promise(){return vo.create(this,this._def)}or(e){return pc.create([this,e],this._def)}and(e){return gc.create(this,e,this._def)}transform(e){return new nr({...Ee(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new vc({...Ee(this._def),innerType:this,defaultValue:n,typeName:ye.ZodDefault})}brand(){return new z1({typeName:ye.ZodBranded,type:this,...Ee(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new fu({...Ee(this._def),innerType:this,catchValue:n,typeName:ye.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Wc.create(this,e)}readonly(){return gu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sF=/^c[^\s-]{8,}$/i,iF=/^[a-z][a-z0-9]*$/,oF=/^[0-9A-HJKMNP-TV-Z]{26}$/,aF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cF=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let gh;const uF=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,dF=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,hF=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function fF(t,e){return!!((e==="v4"||!e)&&uF.test(t)||(e==="v6"||!e)&&dF.test(t))}class Jn extends _e{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:te.string,received:i.parsedType}),be}const r=new Mt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ie(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ie(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")cF.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"email",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")gh||(gh=new RegExp(lF,"u")),gh.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"emoji",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")aF.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"uuid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")sF.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"cuid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")iF.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"cuid2",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")oF.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"ulid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ie(s,{validation:"url",code:H.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"regex",code:H.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?hF(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ie(s,{code:H.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?fF(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ie(s,{validation:"ip",code:H.invalid_string,message:i.message}),r.dirty()):De.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:H.invalid_string,...de.errToObj(r)})}_addCheck(e){return new Jn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...de.errToObj(e)})}url(e){return this._addCheck({kind:"url",...de.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...de.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...de.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...de.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...de.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...de.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...de.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...de.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...de.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...de.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...de.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...de.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...de.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...de.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...de.errToObj(n)})}nonempty(e){return this.min(1,de.errToObj(e))}trim(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Jn.create=t=>{var e;return new Jn({checks:[],typeName:ye.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ee(t)})};function pF(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class js extends _e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:te.number,received:i.parsedType}),be}let r;const s=new Mt;for(const i of this._def.checks)i.kind==="int"?De.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:H.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?pF(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ie(r,{code:H.not_finite,message:i.message}),s.dirty()):De.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,de.toString(n))}gt(e,n){return this.setLimit("min",e,!1,de.toString(n))}lte(e,n){return this.setLimit("max",e,!0,de.toString(n))}lt(e,n){return this.setLimit("max",e,!1,de.toString(n))}setLimit(e,n,r,s){return new js({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:de.toString(s)}]})}_addCheck(e){return new js({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:de.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:de.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:de.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:de.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:de.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:de.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:de.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:de.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:de.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&De.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}js.create=t=>new js({checks:[],typeName:ye.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ee(t)});class zs extends _e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:te.bigint,received:i.parsedType}),be}let r;const s=new Mt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ie(r,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):De.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,de.toString(n))}gt(e,n){return this.setLimit("min",e,!1,de.toString(n))}lte(e,n){return this.setLimit("max",e,!0,de.toString(n))}lt(e,n){return this.setLimit("max",e,!1,de.toString(n))}setLimit(e,n,r,s){return new zs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:de.toString(s)}]})}_addCheck(e){return new zs({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:de.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:de.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:de.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:de.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:de.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zs.create=t=>{var e;return new zs({checks:[],typeName:ye.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ee(t)})};class dc extends _e{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:te.boolean,received:r.parsedType}),be}return Wt(e.data)}}dc.create=t=>new dc({typeName:ye.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ee(t)});class Ai extends _e{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_type,expected:te.date,received:i.parsedType}),be}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ie(i,{code:H.invalid_date}),be}const r=new Mt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ie(s,{code:H.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):De.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ai({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:de.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:de.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ai.create=t=>new Ai({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ye.ZodDate,...Ee(t)});class uu extends _e{_parse(e){if(this._getType(e)!==te.symbol){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:te.symbol,received:r.parsedType}),be}return Wt(e.data)}}uu.create=t=>new uu({typeName:ye.ZodSymbol,...Ee(t)});class hc extends _e{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:te.undefined,received:r.parsedType}),be}return Wt(e.data)}}hc.create=t=>new hc({typeName:ye.ZodUndefined,...Ee(t)});class fc extends _e{_parse(e){if(this._getType(e)!==te.null){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:te.null,received:r.parsedType}),be}return Wt(e.data)}}fc.create=t=>new fc({typeName:ye.ZodNull,...Ee(t)});class bo extends _e{constructor(){super(...arguments),this._any=!0}_parse(e){return Wt(e.data)}}bo.create=t=>new bo({typeName:ye.ZodAny,...Ee(t)});class hi extends _e{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wt(e.data)}}hi.create=t=>new hi({typeName:ye.ZodUnknown,...Ee(t)});class es extends _e{_parse(e){const n=this._getOrReturnCtx(e);return ie(n,{code:H.invalid_type,expected:te.never,received:n.parsedType}),be}}es.create=t=>new es({typeName:ye.ZodNever,...Ee(t)});class du extends _e{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:te.void,received:r.parsedType}),be}return Wt(e.data)}}du.create=t=>new du({typeName:ye.ZodVoid,...Ee(t)});class tr extends _e{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==te.array)return ie(n,{code:H.invalid_type,expected:te.array,received:n.parsedType}),be;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ie(n,{code:o?H.too_big:H.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ie(n,{code:H.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ie(n,{code:H.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ir(n,o,n.path,a)))).then(o=>Mt.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ir(n,o,n.path,a)));return Mt.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new tr({...this._def,minLength:{value:e,message:de.toString(n)}})}max(e,n){return new tr({...this._def,maxLength:{value:e,message:de.toString(n)}})}length(e,n){return new tr({...this._def,exactLength:{value:e,message:de.toString(n)}})}nonempty(e){return this.min(1,e)}}tr.create=(t,e)=>new tr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...Ee(e)});function ro(t){if(t instanceof nt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Yr.create(ro(r))}return new nt({...t._def,shape:()=>e})}else return t instanceof tr?new tr({...t._def,type:ro(t.element)}):t instanceof Yr?Yr.create(ro(t.unwrap())):t instanceof Si?Si.create(ro(t.unwrap())):t instanceof Sr?Sr.create(t.items.map(e=>ro(e))):t}class nt extends _e{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=De.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==te.object){const l=this._getOrReturnCtx(e);return ie(l,{code:H.invalid_type,expected:te.object,received:l.parsedType}),be}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof es&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ir(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof es){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ie(s,{code:H.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ir(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Mt.mergeObjectSync(r,l)):Mt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return de.errToObj,new nt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=de.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new nt({...this._def,unknownKeys:"strip"})}passthrough(){return new nt({...this._def,unknownKeys:"passthrough"})}extend(e){return new nt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nt({...this._def,catchall:e})}pick(e){const n={};return De.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new nt({...this._def,shape:()=>n})}omit(e){const n={};return De.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new nt({...this._def,shape:()=>n})}deepPartial(){return ro(this)}partial(e){const n={};return De.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new nt({...this._def,shape:()=>n})}required(e){const n={};return De.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Yr;)i=i._def.innerType;n[r]=i}}),new nt({...this._def,shape:()=>n})}keyof(){return j1(De.objectKeys(this.shape))}}nt.create=(t,e)=>new nt({shape:()=>t,unknownKeys:"strip",catchall:es.create(),typeName:ye.ZodObject,...Ee(e)});nt.strictCreate=(t,e)=>new nt({shape:()=>t,unknownKeys:"strict",catchall:es.create(),typeName:ye.ZodObject,...Ee(e)});nt.lazycreate=(t,e)=>new nt({shape:t,unknownKeys:"strip",catchall:es.create(),typeName:ye.ZodObject,...Ee(e)});class pc extends _e{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new er(a.ctx.common.issues));return ie(n,{code:H.invalid_union,unionErrors:o}),be}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new er(c));return ie(n,{code:H.invalid_union,unionErrors:a}),be}}get options(){return this._def.options}}pc.create=(t,e)=>new pc({options:t,typeName:ye.ZodUnion,...Ee(e)});const Ol=t=>t instanceof yc?Ol(t.schema):t instanceof nr?Ol(t.innerType()):t instanceof wc?[t.value]:t instanceof qs?t.options:t instanceof bc?Object.keys(t.enum):t instanceof vc?Ol(t._def.innerType):t instanceof hc?[void 0]:t instanceof fc?[null]:null;class Ju extends _e{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return ie(n,{code:H.invalid_type,expected:te.object,received:n.parsedType}),be;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ie(n,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Ol(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Ju({typeName:ye.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ee(r)})}}function Gf(t,e){const n=Cs(t),r=Cs(e);if(t===e)return{valid:!0,data:t};if(n===te.object&&r===te.object){const s=De.objectKeys(e),i=De.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Gf(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===te.array&&r===te.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Gf(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===te.date&&r===te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class gc extends _e{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Wf(i)||Wf(o))return be;const a=Gf(i.value,o.value);return a.valid?((Vf(i)||Vf(o))&&n.dirty(),{status:n.value,value:a.data}):(ie(r,{code:H.invalid_intersection_types}),be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}gc.create=(t,e,n)=>new gc({left:t,right:e,typeName:ye.ZodIntersection,...Ee(n)});class Sr extends _e{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.array)return ie(r,{code:H.invalid_type,expected:te.array,received:r.parsedType}),be;if(r.data.length<this._def.items.length)return ie(r,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),be;!this._def.rest&&r.data.length>this._def.items.length&&(ie(r,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ir(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Mt.mergeArray(n,o)):Mt.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Sr({...this._def,rest:e})}}Sr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sr({items:t,typeName:ye.ZodTuple,rest:null,...Ee(e)})};class mc extends _e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.object)return ie(r,{code:H.invalid_type,expected:te.object,received:r.parsedType}),be;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ir(r,a,r.path,a)),value:o._parse(new Ir(r,r.data[a],r.path,a))});return r.common.async?Mt.mergeObjectAsync(n,s):Mt.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof _e?new mc({keyType:e,valueType:n,typeName:ye.ZodRecord,...Ee(r)}):new mc({keyType:Jn.create(),valueType:e,typeName:ye.ZodRecord,...Ee(n)})}}class hu extends _e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.map)return ie(r,{code:H.invalid_type,expected:te.map,received:r.parsedType}),be;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Ir(r,a,r.path,[l,"key"])),value:i._parse(new Ir(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}hu.create=(t,e,n)=>new hu({valueType:e,keyType:t,typeName:ye.ZodMap,...Ee(n)});class Ii extends _e{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.set)return ie(r,{code:H.invalid_type,expected:te.set,received:r.parsedType}),be;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ie(r,{code:H.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ie(r,{code:H.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return be;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Ir(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Ii({...this._def,minSize:{value:e,message:de.toString(n)}})}max(e,n){return new Ii({...this._def,maxSize:{value:e,message:de.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ii.create=(t,e)=>new Ii({valueType:t,minSize:null,maxSize:null,typeName:ye.ZodSet,...Ee(e)});class lo extends _e{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.function)return ie(n,{code:H.invalid_type,expected:te.function,received:n.parsedType}),be;function r(a,c){return cu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,au(),lc].filter(l=>!!l),issueData:{code:H.invalid_arguments,argumentsError:c}})}function s(a,c){return cu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,au(),lc].filter(l=>!!l),issueData:{code:H.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof vo){const a=this;return Wt(async function(...c){const l=new er([]),u=await a._def.args.parseAsync(c,i).catch(g=>{throw l.addIssue(r(c,g)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(g=>{throw l.addIssue(s(d,g)),l})})}else{const a=this;return Wt(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new er([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new er([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new lo({...this._def,args:Sr.create(e).rest(hi.create())})}returns(e){return new lo({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new lo({args:e||Sr.create([]).rest(hi.create()),returns:n||hi.create(),typeName:ye.ZodFunction,...Ee(r)})}}class yc extends _e{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}yc.create=(t,e)=>new yc({getter:t,typeName:ye.ZodLazy,...Ee(e)});class wc extends _e{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ie(n,{received:n.data,code:H.invalid_literal,expected:this._def.value}),be}return{status:"valid",value:e.data}}get value(){return this._def.value}}wc.create=(t,e)=>new wc({value:t,typeName:ye.ZodLiteral,...Ee(e)});function j1(t,e){return new qs({values:t,typeName:ye.ZodEnum,...Ee(e)})}class qs extends _e{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{expected:De.joinValues(r),received:n.parsedType,code:H.invalid_type}),be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ie(n,{received:n.data,code:H.invalid_enum_value,options:r}),be}return Wt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return qs.create(e)}exclude(e){return qs.create(this.options.filter(n=>!e.includes(n)))}}qs.create=j1;class bc extends _e{_parse(e){const n=De.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==te.string&&r.parsedType!==te.number){const s=De.objectValues(n);return ie(r,{expected:De.joinValues(s),received:r.parsedType,code:H.invalid_type}),be}if(n.indexOf(e.data)===-1){const s=De.objectValues(n);return ie(r,{received:r.data,code:H.invalid_enum_value,options:s}),be}return Wt(e.data)}get enum(){return this._def.values}}bc.create=(t,e)=>new bc({values:t,typeName:ye.ZodNativeEnum,...Ee(e)});class vo extends _e{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.promise&&n.common.async===!1)return ie(n,{code:H.invalid_type,expected:te.promise,received:n.parsedType}),be;const r=n.parsedType===te.promise?n.data:Promise.resolve(n.data);return Wt(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}vo.create=(t,e)=>new vo({type:t,typeName:ye.ZodPromise,...Ee(e)});class nr extends _e{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ie(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!uc(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>uc(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);De.assertNever(s)}}nr.create=(t,e,n)=>new nr({schema:t,typeName:ye.ZodEffects,effect:e,...Ee(n)});nr.createWithPreprocess=(t,e,n)=>new nr({schema:e,effect:{type:"preprocess",transform:t},typeName:ye.ZodEffects,...Ee(n)});class Yr extends _e{_parse(e){return this._getType(e)===te.undefined?Wt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yr.create=(t,e)=>new Yr({innerType:t,typeName:ye.ZodOptional,...Ee(e)});class Si extends _e{_parse(e){return this._getType(e)===te.null?Wt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Si.create=(t,e)=>new Si({innerType:t,typeName:ye.ZodNullable,...Ee(e)});class vc extends _e{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}vc.create=(t,e)=>new vc({innerType:t,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ee(e)});class fu extends _e{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return lu(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new er(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new er(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}fu.create=(t,e)=>new fu({innerType:t,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ee(e)});class pu extends _e{_parse(e){if(this._getType(e)!==te.nan){const r=this._getOrReturnCtx(e);return ie(r,{code:H.invalid_type,expected:te.nan,received:r.parsedType}),be}return{status:"valid",value:e.data}}}pu.create=t=>new pu({typeName:ye.ZodNaN,...Ee(t)});const gF=Symbol("zod_brand");class z1 extends _e{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Wc extends _e{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?be:i.status==="dirty"?(n.dirty(),F1(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?be:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Wc({in:e,out:n,typeName:ye.ZodPipeline})}}class gu extends _e{_parse(e){const n=this._def.innerType._parse(e);return uc(n)&&(n.value=Object.freeze(n.value)),n}}gu.create=(t,e)=>new gu({innerType:t,typeName:ye.ZodReadonly,...Ee(e)});const q1=(t,e={},n)=>t?bo.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):bo.create(),mF={object:nt.lazycreate};var ye;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ye||(ye={}));const yF=(t,e={message:`Input not instance of ${t.name}`})=>q1(n=>n instanceof t,e),H1=Jn.create,W1=js.create,wF=pu.create,bF=zs.create,V1=dc.create,vF=Ai.create,EF=uu.create,CF=hc.create,_F=fc.create,AF=bo.create,IF=hi.create,SF=es.create,xF=du.create,NF=tr.create,TF=nt.create,PF=nt.strictCreate,OF=pc.create,RF=Ju.create,DF=gc.create,$F=Sr.create,kF=mc.create,UF=hu.create,BF=Ii.create,LF=lo.create,MF=yc.create,FF=wc.create,jF=qs.create,zF=bc.create,qF=vo.create,Jw=nr.create,HF=Yr.create,WF=Si.create,VF=nr.createWithPreprocess,GF=Wc.create,KF=()=>H1().optional(),YF=()=>W1().optional(),ZF=()=>V1().optional(),JF={string:t=>Jn.create({...t,coerce:!0}),number:t=>js.create({...t,coerce:!0}),boolean:t=>dc.create({...t,coerce:!0}),bigint:t=>zs.create({...t,coerce:!0}),date:t=>Ai.create({...t,coerce:!0})},XF=be;var A=Object.freeze({__proto__:null,defaultErrorMap:lc,setErrorMap:nF,getErrorMap:au,makeIssue:cu,EMPTY_PATH:rF,addIssueToContext:ie,ParseStatus:Mt,INVALID:be,DIRTY:F1,OK:Wt,isAborted:Wf,isDirty:Vf,isValid:uc,isAsync:lu,get util(){return De},get objectUtil(){return Hf},ZodParsedType:te,getParsedType:Cs,ZodType:_e,ZodString:Jn,ZodNumber:js,ZodBigInt:zs,ZodBoolean:dc,ZodDate:Ai,ZodSymbol:uu,ZodUndefined:hc,ZodNull:fc,ZodAny:bo,ZodUnknown:hi,ZodNever:es,ZodVoid:du,ZodArray:tr,ZodObject:nt,ZodUnion:pc,ZodDiscriminatedUnion:Ju,ZodIntersection:gc,ZodTuple:Sr,ZodRecord:mc,ZodMap:hu,ZodSet:Ii,ZodFunction:lo,ZodLazy:yc,ZodLiteral:wc,ZodEnum:qs,ZodNativeEnum:bc,ZodPromise:vo,ZodEffects:nr,ZodTransformer:nr,ZodOptional:Yr,ZodNullable:Si,ZodDefault:vc,ZodCatch:fu,ZodNaN:pu,BRAND:gF,ZodBranded:z1,ZodPipeline:Wc,ZodReadonly:gu,custom:q1,Schema:_e,ZodSchema:_e,late:mF,get ZodFirstPartyTypeKind(){return ye},coerce:JF,any:AF,array:NF,bigint:bF,boolean:V1,date:vF,discriminatedUnion:RF,effect:Jw,enum:jF,function:LF,instanceof:yF,intersection:DF,lazy:MF,literal:FF,map:UF,nan:wF,nativeEnum:zF,never:SF,null:_F,nullable:WF,number:W1,object:TF,oboolean:ZF,onumber:YF,optional:HF,ostring:KF,pipeline:GF,preprocess:VF,promise:qF,record:kF,set:BF,strictObject:PF,string:H1,symbol:EF,transformer:Jw,tuple:$F,undefined:CF,union:OF,unknown:IF,void:xF,NEVER:XF,ZodIssueCode:H,quotelessJson:tF,ZodError:er});const rt=A.object({message:A.string()});function ne(t){return A.literal(ae[t])}A.object({accessList:A.array(A.string()),blockHash:A.string().nullable(),blockNumber:A.string().nullable(),chainId:A.string().or(A.number()),from:A.string(),gas:A.string(),hash:A.string(),input:A.string().nullable(),maxFeePerGas:A.string(),maxPriorityFeePerGas:A.string(),nonce:A.string(),r:A.string(),s:A.string(),to:A.string(),transactionIndex:A.string().nullable(),type:A.string(),v:A.string(),value:A.string()});const QF=A.object({chainId:A.string().or(A.number())}),e9=A.object({email:A.string().email()}),t9=A.object({otp:A.string()}),n9=A.object({uri:A.string(),preferredAccountType:A.optional(A.string()),chainId:A.optional(A.string().or(A.number()))}),r9=A.object({chainId:A.optional(A.string().or(A.number())),preferredAccountType:A.optional(A.string()),socialUri:A.optional(A.string())}),s9=A.object({provider:A.enum(["google","github","apple","facebook","x","discord"])}),i9=A.object({email:A.string().email()}),o9=A.object({otp:A.string()}),a9=A.object({otp:A.string()}),c9=A.object({themeMode:A.optional(A.enum(["light","dark"])),themeVariables:A.optional(A.record(A.string(),A.string().or(A.number()))),w3mThemeVariables:A.optional(A.record(A.string(),A.string()))}),l9=A.object({metadata:A.object({name:A.string(),description:A.string(),url:A.string(),icons:A.array(A.string())}).optional(),sdkVersion:A.string().optional(),sdkType:A.string().optional(),projectId:A.string()}),u9=A.object({type:A.string()}),d9=A.object({action:A.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),h9=A.object({url:A.string()}),f9=A.object({userName:A.string()}),p9=A.object({email:A.string().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),accounts:A.array(A.object({address:A.string(),type:A.enum([Ct.ACCOUNT_TYPES.EOA,Ct.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:A.string().optional().nullable(),preferredAccountType:A.optional(A.string())}),g9=A.object({action:A.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),m9=A.object({email:A.string().email().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),smartAccountDeployed:A.optional(A.boolean()),accounts:A.array(A.object({address:A.string(),type:A.enum([Ct.ACCOUNT_TYPES.EOA,Ct.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:A.optional(A.string())}),y9=A.object({uri:A.string()}),w9=A.object({isConnected:A.boolean()}),b9=A.object({chainId:A.string().or(A.number())}),v9=A.object({chainId:A.string().or(A.number())}),E9=A.object({newEmail:A.string().email()}),C9=A.object({smartAccountEnabledNetworks:A.array(A.number())});A.object({address:A.string(),isDeployed:A.boolean()});const _9=A.object({version:A.string().optional()}),A9=A.object({type:A.string(),address:A.string()}),I9=A.any(),S9=A.object({method:A.literal("eth_accounts")}),x9=A.object({method:A.literal("eth_blockNumber")}),N9=A.object({method:A.literal("eth_call"),params:A.array(A.any())}),T9=A.object({method:A.literal("eth_chainId")}),P9=A.object({method:A.literal("eth_estimateGas"),params:A.array(A.any())}),O9=A.object({method:A.literal("eth_feeHistory"),params:A.array(A.any())}),R9=A.object({method:A.literal("eth_gasPrice")}),D9=A.object({method:A.literal("eth_getAccount"),params:A.array(A.any())}),$9=A.object({method:A.literal("eth_getBalance"),params:A.array(A.any())}),k9=A.object({method:A.literal("eth_getBlockByHash"),params:A.array(A.any())}),U9=A.object({method:A.literal("eth_getBlockByNumber"),params:A.array(A.any())}),B9=A.object({method:A.literal("eth_getBlockReceipts"),params:A.array(A.any())}),L9=A.object({method:A.literal("eth_getBlockTransactionCountByHash"),params:A.array(A.any())}),M9=A.object({method:A.literal("eth_getBlockTransactionCountByNumber"),params:A.array(A.any())}),F9=A.object({method:A.literal("eth_getCode"),params:A.array(A.any())}),j9=A.object({method:A.literal("eth_getFilterChanges"),params:A.array(A.any())}),z9=A.object({method:A.literal("eth_getFilterLogs"),params:A.array(A.any())}),q9=A.object({method:A.literal("eth_getLogs"),params:A.array(A.any())}),H9=A.object({method:A.literal("eth_getProof"),params:A.array(A.any())}),W9=A.object({method:A.literal("eth_getStorageAt"),params:A.array(A.any())}),V9=A.object({method:A.literal("eth_getTransactionByBlockHashAndIndex"),params:A.array(A.any())}),G9=A.object({method:A.literal("eth_getTransactionByBlockNumberAndIndex"),params:A.array(A.any())}),K9=A.object({method:A.literal("eth_getTransactionByHash"),params:A.array(A.any())}),Y9=A.object({method:A.literal("eth_getTransactionCount"),params:A.array(A.any())}),Z9=A.object({method:A.literal("eth_getTransactionReceipt"),params:A.array(A.any())}),J9=A.object({method:A.literal("eth_getUncleCountByBlockHash"),params:A.array(A.any())}),X9=A.object({method:A.literal("eth_getUncleCountByBlockNumber"),params:A.array(A.any())}),Q9=A.object({method:A.literal("eth_maxPriorityFeePerGas")}),e7=A.object({method:A.literal("eth_newBlockFilter")}),t7=A.object({method:A.literal("eth_newFilter"),params:A.array(A.any())}),n7=A.object({method:A.literal("eth_newPendingTransactionFilter")}),r7=A.object({method:A.literal("eth_sendRawTransaction"),params:A.array(A.any())}),s7=A.object({method:A.literal("eth_syncing"),params:A.array(A.any())}),i7=A.object({method:A.literal("eth_uninstallFilter"),params:A.array(A.any())}),Xw=A.object({method:A.literal("personal_sign"),params:A.array(A.any())}),o7=A.object({method:A.literal("eth_signTypedData_v4"),params:A.array(A.any())}),a7=A.object({method:A.literal("eth_sendTransaction"),params:A.array(A.any())}),c7=A.object({method:A.literal("solana_signMessage"),params:A.object({message:A.string(),pubkey:A.string()})}),l7=A.object({method:A.literal("solana_signTransaction"),params:A.object({transaction:A.string()})}),u7=A.object({method:A.literal("solana_signAllTransactions"),params:A.object({transactions:A.array(A.string())})}),d7=A.object({method:A.literal("solana_signAndSendTransaction"),params:A.object({transaction:A.string(),options:A.object({skipPreflight:A.boolean().optional(),preflightCommitment:A.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:A.number().optional(),minContextSlot:A.number().optional()}).optional()})}),h7=A.object({method:A.literal("wallet_sendCalls"),params:A.array(A.object({chainId:A.string().or(A.number()).optional(),from:A.string().optional(),version:A.string().optional(),capabilities:A.any().optional(),calls:A.array(A.object({to:A.string().startsWith("0x"),data:A.string().startsWith("0x").optional(),value:A.string().optional()}))}))}),f7=A.object({method:A.literal("wallet_getCallsStatus"),params:A.array(A.string())}),p7=A.object({method:A.literal("wallet_getCapabilities")}),g7=A.object({method:A.literal("wallet_grantPermissions"),params:A.array(A.any())}),m7=A.object({method:A.literal("wallet_revokePermissions"),params:A.any()}),y7=A.object({method:A.literal("wallet_getAssets"),params:A.any()}),Qw=A.object({token:A.string()}),re=A.object({id:A.string().optional()}),Qo={appEvent:re.extend({type:ne("APP_SWITCH_NETWORK"),payload:QF}).or(re.extend({type:ne("APP_CONNECT_EMAIL"),payload:e9})).or(re.extend({type:ne("APP_CONNECT_DEVICE")})).or(re.extend({type:ne("APP_CONNECT_OTP"),payload:t9})).or(re.extend({type:ne("APP_CONNECT_SOCIAL"),payload:n9})).or(re.extend({type:ne("APP_GET_FARCASTER_URI")})).or(re.extend({type:ne("APP_CONNECT_FARCASTER")})).or(re.extend({type:ne("APP_GET_USER"),payload:A.optional(r9)})).or(re.extend({type:ne("APP_GET_SOCIAL_REDIRECT_URI"),payload:s9})).or(re.extend({type:ne("APP_SIGN_OUT")})).or(re.extend({type:ne("APP_IS_CONNECTED"),payload:A.optional(Qw)})).or(re.extend({type:ne("APP_GET_CHAIN_ID")})).or(re.extend({type:ne("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(re.extend({type:ne("APP_INIT_SMART_ACCOUNT")})).or(re.extend({type:ne("APP_SET_PREFERRED_ACCOUNT"),payload:u9})).or(re.extend({type:ne("APP_RPC_REQUEST"),payload:Xw.or(y7).or(S9).or(x9).or(N9).or(T9).or(P9).or(O9).or(R9).or(D9).or($9).or(k9).or(U9).or(B9).or(L9).or(M9).or(F9).or(j9).or(z9).or(q9).or(H9).or(W9).or(V9).or(G9).or(K9).or(Y9).or(Z9).or(J9).or(X9).or(Q9).or(e7).or(t7).or(n7).or(r7).or(s7).or(i7).or(Xw).or(o7).or(a7).or(c7).or(l7).or(u7).or(d7).or(f7).or(h7).or(p7).or(g7).or(m7)})).or(re.extend({type:ne("APP_UPDATE_EMAIL"),payload:i9})).or(re.extend({type:ne("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:o9})).or(re.extend({type:ne("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:a9})).or(re.extend({type:ne("APP_SYNC_THEME"),payload:c9})).or(re.extend({type:ne("APP_SYNC_DAPP_DATA"),payload:l9})).or(re.extend({type:ne("APP_RELOAD")})),frameEvent:re.extend({type:ne("FRAME_SWITCH_NETWORK_ERROR"),payload:rt}).or(re.extend({type:ne("FRAME_SWITCH_NETWORK_SUCCESS"),payload:v9})).or(re.extend({type:ne("FRAME_CONNECT_EMAIL_SUCCESS"),payload:d9})).or(re.extend({type:ne("FRAME_CONNECT_EMAIL_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:h9})).or(re.extend({type:ne("FRAME_GET_FARCASTER_URI_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:f9})).or(re.extend({type:ne("FRAME_CONNECT_FARCASTER_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_CONNECT_OTP_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_CONNECT_OTP_SUCCESS")})).or(re.extend({type:ne("FRAME_CONNECT_DEVICE_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_CONNECT_DEVICE_SUCCESS")})).or(re.extend({type:ne("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:p9})).or(re.extend({type:ne("FRAME_CONNECT_SOCIAL_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_GET_USER_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_GET_USER_SUCCESS"),payload:m9})).or(re.extend({type:ne("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:y9})).or(re.extend({type:ne("FRAME_SIGN_OUT_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_SIGN_OUT_SUCCESS")})).or(re.extend({type:ne("FRAME_IS_CONNECTED_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_IS_CONNECTED_SUCCESS"),payload:w9})).or(re.extend({type:ne("FRAME_GET_CHAIN_ID_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_GET_CHAIN_ID_SUCCESS"),payload:b9})).or(re.extend({type:ne("FRAME_RPC_REQUEST_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_RPC_REQUEST_SUCCESS"),payload:I9})).or(re.extend({type:ne("FRAME_SESSION_UPDATE"),payload:Qw})).or(re.extend({type:ne("FRAME_UPDATE_EMAIL_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_UPDATE_EMAIL_SUCCESS"),payload:g9})).or(re.extend({type:ne("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(re.extend({type:ne("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:E9})).or(re.extend({type:ne("FRAME_SYNC_THEME_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_SYNC_THEME_SUCCESS")})).or(re.extend({type:ne("FRAME_SYNC_DAPP_DATA_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(re.extend({type:ne("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:C9})).or(re.extend({type:ne("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:A9})).or(re.extend({type:ne("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_READY"),payload:_9})).or(re.extend({type:ne("FRAME_RELOAD_ERROR"),payload:rt})).or(re.extend({type:ne("FRAME_RELOAD_SUCCESS")}))};function mh(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class w7{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=M.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!mh(ae.FRAME_EVENT_KEY,l))return;const u=Qo.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}bn.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{bn.isClient&&window.addEventListener("message",({data:o})=>{if(!mh(ae.FRAME_EVENT_KEY,o))return;const a=Qo.frameEvent.parse(o);i(a)})},onAppEvent:i=>{bn.isClient&&window.addEventListener("message",({data:o})=>{if(!mh(ae.APP_EVENT_KEY,o))return;const a=Qo.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(bn.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Qo.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(bn.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Qo.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),bn.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${A_}?projectId=${e}&chainId=${r}&version=${S_}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class b7{constructor(e){var i;const n=So({level:I_}),{logger:r,chunkLoggerController:s}=Tp({opts:n});this.logger=Ft(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class v7{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new b7(e)),this.abortController=i,this.w3mFrame=new w7({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===ae.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!St.get(ae.EMAIL_LOGIN_USED_KEY)}getEmail(){return St.get(ae.EMAIL)}getUsername(){return St.get(ae.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:ae.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{bn.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ae.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:ae.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:ae.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:ae.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:ae.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:ae.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:ae.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:ae.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:ae.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:ae.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:ae.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:ae.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:ae.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:ae.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ae.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:ae.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:ae.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:ae.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:ae.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:ae.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ct.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:ae.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ae.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ae.FRAME_IS_CONNECTED_ERROR&&e(),n.type===ae.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ae.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ae.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ae.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===ae.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ct.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ae.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===ae.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ct.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[ae.APP_SYNC_DAPP_DATA,ae.APP_SYNC_THEME,ae.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[ae.APP_CONNECT_EMAIL,ae.APP_CONNECT_DEVICE,ae.APP_CONNECT_OTP,ae.APP_CONNECT_SOCIAL,ae.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var g,f,p;const u=Math.random().toString(36).substring(7);(p=(g=this.w3mLogger)==null?void 0:(f=g.logger).info)==null||p.call(f,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(m,b){var C,y,E;m.id===u&&((y=b==null?void 0:(C=b.logger).info)==null||y.call(C,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((E=m.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){St.set(ae.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){St.set(ae.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&St.set(ae.EMAIL,e),St.set(ae.EMAIL_LOGIN_USED_KEY,"true"),St.delete(ae.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){St.delete(ae.EMAIL_LOGIN_USED_KEY),St.delete(ae.EMAIL),St.delete(ae.LAST_USED_CHAIN_KEY),St.delete(ae.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&St.set(ae.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=St.get(ae.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){St.set(ae.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class fi{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return fi.instance||(fi.instance=new v7({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),fi.instance}}var e0={};const E7={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof e0<"u"?e0.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Kf={filterOutDuplicatesByRDNS(t){const e=z.state.enableEIP6963?Y.state.connectors:[],n=G.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ce.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Y.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=G.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Y.state,{featuredWalletIds:n}=z.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=z.state.features)==null?void 0:c.connectMethodsOrder),r=e||Y.state.connectors;if(n)return n;const{injected:s,announced:i}=Rl.getConnectorsByType(r,ue.state.recommended,ue.state.featured),o=s.filter(Rl.showConnector),a=i.filter(Rl.showConnector);return o.length||a.length?["wallet","email","social"]:E7.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ue.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ue.state.excludedWallets.some(r=>cc.isLowerCaseMatch(r.name,t.name));return e||n}},Rl={getConnectorsByType(t,e,n){const{customWallets:r}=z.state,s=G.getRecentWallets(),i=Kf.filterOutDuplicateWallets(e),o=Kf.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ue.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ue.state.excludedWallets.some(i=>cc.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ce.isMobile()||ce.isMobile()&&!e&&!se.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(T.state.chains.values()).some(n=>Y.getConnectorId(n.namespace)===M.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=z.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Rl.getIsConnectedWithWC(),g=[{type:"walletConnect",isEnabled:z.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(b=>b.isEnabled),f=new Set(g.map(b=>b.type)),p=c.filter(b=>f.has(b)).map(b=>({type:b,isEnabled:!0})),m=g.filter(({type:b})=>!p.some(({type:y})=>y===b));return Array.from(new Set([...p,...m].map(({type:b})=>b)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ce.isMobile())return{accounts:[],chainId:void 0};if(t.id===M.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dl=globalThis,ig=Dl.ShadowRoot&&(Dl.ShadyCSS===void 0||Dl.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,og=Symbol(),t0=new WeakMap;let G1=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==og)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(ig&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=t0.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&t0.set(n,e))}return e}toString(){return this.cssText}};const Tn=t=>new G1(typeof t=="string"?t:t+"",void 0,og),uo=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new G1(n,t,og)},C7=(t,e)=>{if(ig)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Dl.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},n0=ig?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Tn(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:_7,defineProperty:A7,getOwnPropertyDescriptor:I7,getOwnPropertyNames:S7,getOwnPropertySymbols:x7,getPrototypeOf:N7}=Object,Rs=globalThis,r0=Rs.trustedTypes,T7=r0?r0.emptyScript:"",yh=Rs.reactiveElementPolyfillSupport,Aa=(t,e)=>t,Yf={toAttribute(t,e){switch(e){case Boolean:t=t?T7:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},K1=(t,e)=>!_7(t,e),s0={attribute:!0,type:String,converter:Yf,reflect:!1,useDefault:!1,hasChanged:K1};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Rs.litPropertyMetadata??(Rs.litPropertyMetadata=new WeakMap);let so=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=s0){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&A7(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=I7(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??s0}static _$Ei(){if(this.hasOwnProperty(Aa("elementProperties")))return;const e=N7(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Aa("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Aa("properties"))){const n=this.properties,r=[...S7(n),...x7(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(n0(s))}else e!==void 0&&n.push(n0(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return C7(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:Yf).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Yf;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??K1)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};so.elementStyles=[],so.shadowRootOptions={mode:"open"},so[Aa("elementProperties")]=new Map,so[Aa("finalized")]=new Map,yh==null||yh({ReactiveElement:so}),(Rs.reactiveElementVersions??(Rs.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ia=globalThis,mu=Ia.trustedTypes,i0=mu?mu.createPolicy("lit-html",{createHTML:t=>t}):void 0,Y1="$lit$",_s=`lit$${Math.random().toFixed(9).slice(2)}$`,Z1="?"+_s,P7=`<${Z1}>`,xi=document,Ec=()=>xi.createComment(""),Cc=t=>t===null||typeof t!="object"&&typeof t!="function",ag=Array.isArray,O7=t=>ag(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",wh=`[ 	
\f\r]`,ea=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,o0=/-->/g,a0=/>/g,Js=RegExp(`>|${wh}(?:([^\\s"'>=/]+)(${wh}*=${wh}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),c0=/'/g,l0=/"/g,J1=/^(?:script|style|textarea|title)$/i,X1=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),pq=X1(1),gq=X1(2),Eo=Symbol.for("lit-noChange"),vt=Symbol.for("lit-nothing"),u0=new WeakMap,ui=xi.createTreeWalker(xi,129);function Q1(t,e){if(!ag(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return i0!==void 0?i0.createHTML(e):e}const R7=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=ea;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===ea?u[1]==="!--"?o=o0:u[1]!==void 0?o=a0:u[2]!==void 0?(J1.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Js):u[3]!==void 0&&(o=Js):o===Js?u[0]===">"?(o=s??ea,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Js:u[3]==='"'?l0:c0):o===l0||o===c0?o=Js:o===o0||o===a0?o=ea:(o=Js,s=void 0);const g=o===Js&&t[a+1].startsWith("/>")?" ":"";i+=o===ea?c+P7:d>=0?(r.push(l),c.slice(0,d)+Y1+c.slice(d)+_s+g):c+_s+(d===-2?a:g)}return[Q1(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class _c{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=R7(e,n);if(this.el=_c.createElement(l,r),ui.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=ui.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(Y1)){const h=u[o++],g=s.getAttribute(d).split(_s),f=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:f[2],strings:g,ctor:f[1]==="."?$7:f[1]==="?"?k7:f[1]==="@"?U7:Xu}),s.removeAttribute(d)}else d.startsWith(_s)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(J1.test(s.tagName)){const d=s.textContent.split(_s),h=d.length-1;if(h>0){s.textContent=mu?mu.emptyScript:"";for(let g=0;g<h;g++)s.append(d[g],Ec()),ui.nextNode(),c.push({type:2,index:++i});s.append(d[h],Ec())}}}else if(s.nodeType===8)if(s.data===Z1)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(_s,d+1))!==-1;)c.push({type:7,index:i}),d+=_s.length-1}i++}}static createElement(e,n){const r=xi.createElement("template");return r.innerHTML=e,r}}function Co(t,e,n=t,r){var o,a;if(e===Eo)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Cc(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Co(t,s._$AS(t,e.values),s,r)),e}class D7{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??xi).importNode(n,!0);ui.currentNode=s;let i=ui.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Vc(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new B7(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=ui.nextNode(),o++)}return ui.currentNode=xi,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Vc{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=vt,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Co(this,e,n),Cc(e)?e===vt||e==null||e===""?(this._$AH!==vt&&this._$AR(),this._$AH=vt):e!==this._$AH&&e!==Eo&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):O7(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==vt&&Cc(this._$AH)?this._$AA.nextSibling.data=e:this.T(xi.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=_c.createElement(Q1(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new D7(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=u0.get(e.strings);return n===void 0&&u0.set(e.strings,n=new _c(e)),n}k(e){ag(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Vc(this.O(Ec()),this.O(Ec()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Xu{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=vt,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=vt}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Co(this,e,n,0),o=!Cc(e)||e!==this._$AH&&e!==Eo,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Co(this,a[r+c],n,c),l===Eo&&(l=this._$AH[c]),o||(o=!Cc(l)||l!==this._$AH[c]),l===vt?e=vt:e!==vt&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===vt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class $7 extends Xu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===vt?void 0:e}}class k7 extends Xu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==vt)}}class U7 extends Xu{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Co(this,e,n,0)??vt)===Eo)return;const r=this._$AH,s=e===vt&&r!==vt||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==vt&&(r===vt||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class B7{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Co(this,e)}}const bh=Ia.litHtmlPolyfillSupport;bh==null||bh(_c,Vc),(Ia.litHtmlVersions??(Ia.litHtmlVersions=[])).push("3.3.0");const L7=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Vc(e.insertBefore(Ec(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pi=globalThis;class $l extends so{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=L7(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Eo}}var C0;$l._$litElement$=!0,$l.finalized=!0,(C0=pi.litElementHydrateSupport)==null||C0.call(pi,{LitElement:$l});const vh=pi.litElementPolyfillSupport;vh==null||vh({LitElement:$l});(pi.litElementVersions??(pi.litElementVersions=[])).push("4.2.0");let Sa,Ds,$s;function mq(t,e){Sa=document.createElement("style"),Ds=document.createElement("style"),$s=document.createElement("style"),Sa.textContent=ho(t).core.cssText,Ds.textContent=ho(t).dark.cssText,$s.textContent=ho(t).light.cssText,document.head.appendChild(Sa),document.head.appendChild(Ds),document.head.appendChild($s),eC(e)}function eC(t){Ds&&$s&&(t==="light"?(Ds.removeAttribute("media"),$s.media="enabled"):($s.removeAttribute("media"),Ds.media="enabled"))}function M7(t){Sa&&Ds&&$s&&(Sa.textContent=ho(t).core.cssText,Ds.textContent=ho(t).dark.cssText,$s.textContent=ho(t).light.cssText)}function ho(t){return{core:uo`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Tn(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Tn((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Tn((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Tn((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Tn((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:uo`
      :root {
        --w3m-color-mix: ${Tn((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Tn(Wr(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Tn(Wr(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:uo`
      :root {
        --w3m-color-mix: ${Tn((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Tn(Wr(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Tn(Wr(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const yq=uo`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,wq=uo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,bq=uo`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,fa={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},F7={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},j7={block:x2({format(t){var n;return{transactions:(n=t.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const s=Ru(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?Yn(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:I2({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?Yn(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:NS({format(t){return{l1GasPrice:t.l1GasPrice?Yn(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?Yn(t.l1GasUsed):null,l1Fee:t.l1Fee?Yn(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function z7(t,e){return W7(t)?H7(t):qS(t,e)}const q7={transaction:z7};function H7(t){V7(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,l=[e,r,a??"0x",o?Xn(o):"0x",c?Xn(c):"0x",s?Xn(s):"0x",i?"0x1":"0x",n??"0x"];return ns(["0x7e",Ls(l)])}function W7(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function V7(t){const{from:e,to:n}=t;if(e&&!Tt(e))throw new un({address:e});if(n&&!Tt(n))throw new un({address:n})}const Hs={blockTime:2e3,contracts:F7,formatters:j7,serializers:q7},tC=ir({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),nC=ir({id:421614,name:"Arbitrum Sepolia",nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://sepolia.arbiscan.io",apiUrl:"https://api-sepolia.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:81930}},testnet:!0}),ta=1,rC=ir({...Hs,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...Hs.contracts,disputeGameFactory:{[ta]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[ta]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[ta]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[ta]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:ta}),na=11155111,sC=ir({...Hs,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...Hs.contracts,disputeGameFactory:{[na]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[na]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[na]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[na]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:na}),iC=ir({id:5,name:"Goerli",nativeCurrency:{name:"Goerli Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://5.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://goerli.etherscan.io",apiUrl:"https://api-goerli.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xfc4AC75C46C914aF5892d6d3eFFcebD7917293F1",blockCreated:10339206},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:6507670}},testnet:!0}),oC=ir({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),ra=1,aC=ir({...Hs,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...Hs.contracts,disputeGameFactory:{[ra]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[ra]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[ra]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[ra]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:ra}),sa=11155111,cC=ir({...Hs,id:11155420,name:"OP Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.optimism.io"]}},blockExplorers:{default:{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com",apiUrl:"https://optimism-sepolia.blockscout.com/api"}},contracts:{...Hs.contracts,disputeGameFactory:{[sa]:{address:"0x05F9613aDB30026FFd634f38e5C4dFd30a197Fa1"}},l2OutputOracle:{[sa]:{address:"0x90E9c4f8a994a250F6aEfd61CAFb4F2e895D458F"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1620204},portal:{[sa]:{address:"0x16Fc5058F25648194471939df75CF27A2fdC48BC"}},l1StandardBridge:{[sa]:{address:"0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1"}}},testnet:!0,sourceId:sa}),lC=ir({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),uC=ir({id:80002,name:"Polygon Amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://amoy.polygonscan.com",apiUrl:"https://api-amoy.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3127388}},testnet:!0}),dC=ir({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});function Gc(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const d0=Gc({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),h0=Gc({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Gc({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Gc({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Gc({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const G7={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},xa={getMethodsByChainNamespace(t){return G7[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case d0.caipNetworkId:u.chains.push(d0.deprecatedCaipNetworkId);break;case h0.caipNetworkId:u.chains.push(h0.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ma.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class cg{constructor({provider:e,namespace:n}){this.id=M.CONNECTOR_ID.WALLET_CONNECT,this.name=Ss.ConnectorNamesMap[M.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ss.ConnectorImageIds[M.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=T.getCaipNetworks.bind(T),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=z.state.universalProviderConfigOverride,s=xa.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return _a.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:K7})}}const K7=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class hC{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>T.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:M.CONNECTOR_ID.AUTH,type:"AUTH",name:M.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ss.ConnectorImageIds[M.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){K.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=K.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof cg);if(!e)throw new Error("WalletConnectConnector not found");return e}}class Y7 extends hC{setUniversalProvider(e){this.addConnector(new cg({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ce.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Me.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(K.state.balanceLoading&&e.chainId===((c=T.state.activeCaipNetwork)==null?void 0:c.id))return{balance:K.state.balance||"0.00",symbol:K.state.balanceSymbol||""};const s=(await K.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=T.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===M.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Po.encode(new TextEncoder().encode(r)),pubkey:s}},(a=T.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=T.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===M.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Xn(n.id)}]}))}catch(u){if(u.code===fa.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===fa.ERROR_INVALID_CHAIN_ID||u.code===fa.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===fa.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Xn(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const Z7=["email","socials","swaps","onramp","activity","reownBranding"],vl={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Me.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Me.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Me.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Me.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Me.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Me.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Me.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Me.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Me.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},J7={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=vl[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=vl[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return vl[t].processApi(e)},processFallbackFeature(t,e){return vl[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ue.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Me.DEFAULT_REMOTE_FEATURES:Me.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of Z7){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Me.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;ot.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class X7{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=T.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=T.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=T.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return T.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>T.getCaipNetworks(n),this.getActiveChainNamespace=()=>T.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{T.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>T.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>T.state.activeChain===n||!n?T.state.activeCaipAddress:T.getAccountProp("caipAddress",n),this.setClientId=n=>{pe.setClientId(n)},this.getProvider=n=>He.getProvider(n),this.getProviderType=n=>He.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=K.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{K.setCaipAddress(n,r),n&&z.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{K.setBalance(n,r,s)},this.setProfileName=(n,r)=>{K.setProfileName(n,r)},this.setProfileImage=(n,r)=>{K.setProfileImage(n,r)},this.setUser=(n,r)=>{K.setUser(n,r)},this.resetAccount=n=>{K.resetAccount(n)},this.setCaipNetwork=n=>{T.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{T.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{K.setAllAccounts(n,r),z.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{K.setStatus(n,r),Y.isConnected()?G.setConnectionStatus("connected"):G.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>T.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Y.state.allConnectors,...n];Y.setConnectors(r)},this.setConnections=(n,r)=>{se.setConnections(n,r)},this.fetchIdentity=n=>pe.fetchIdentity(n),this.getReownName=n=>ma.getNamesForAddress(n),this.getConnectors=()=>Y.getConnectors(),this.getConnectorImage=n=>x0.getConnectorImage(n),this.getConnections=n=>Oa.getConnectionsData(n).connections,this.getRecentConnections=n=>Oa.getConnectionsData(n).recentConnections,this.switchConnection=n=>se.switchConnection(n),this.deleteConnection=n=>G.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=He.getProviderId(r),i=n?{...n,type:s}:void 0;K.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!T.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{K.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{K.removeAddressLabel(n,r)},this.getAddress=n=>T.state.activeChain===n||!n?K.state.address:T.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>T.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{T.resetNetwork(n)},this.addConnector=n=>{Y.addConnector(n)},this.resetWcConnection=()=>{se.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{K.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{K.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{T.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{K.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{z.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await J7.fetchRemoteFeatures(e),z.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Zh.setOnrampProviders(this.remoteFeatures.onramp),((n=z.state.remoteFeatures)!=null&&n.email||Array.isArray((r=z.state.remoteFeatures)==null?void 0:r.socials)&&((s=z.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await ue.fetchAllowedOrigins();if(!e||!ce.isClient()){ot.open(tt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;xa.isOriginAllowed(n,e,fa.DEFAULT_ALLOWED_ANCESTORS)||ot.open(tt.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){ot.open(tt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":ot.open(tt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;ot.open({shortMessage:tt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:tt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:ot.open(tt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Fe.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&nn.setThemeMode(e.themeMode),e.themeVariables&&nn.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");T.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&T.setActiveCaipNetwork(n)}initializeConnectionController(e){se.initialize(e.adapters??[]),se.setWcBasic(e.basic??!1)}initializeConnectorController(){Y.initialize(this.chainNamespaces)}initializeProjectSettings(e){z.setProjectId(e.projectId),z.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;z.setDebug(e.debug!==!1),z.setEnableWalletConnect(e.enableWalletConnect!==!1),z.setEnableWalletGuide(e.enableWalletGuide!==!1),z.setEnableWallets(e.enableWallets!==!1),z.setEIP6963Enabled(e.enableEIP6963!==!1),z.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),z.setEnableAuthLogger(e.enableAuthLogger!==!1),z.setCustomRpcUrls(e.customRpcUrls),z.setEnableEmbedded(e.enableEmbedded),z.setAllWallets(e.allWallets),z.setIncludeWalletIds(e.includeWalletIds),z.setExcludeWalletIds(e.excludeWalletIds),z.setFeaturedWalletIds(e.featuredWalletIds),z.setTokens(e.tokens),z.setTermsConditionsUrl(e.termsConditionsUrl),z.setPrivacyPolicyUrl(e.privacyPolicyUrl),z.setCustomWallets(e.customWallets),z.setFeatures(e.features),z.setAllowUnsupportedChain(e.allowUnsupportedChain),z.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),z.setPreferUniversalLinks(e.experimental_preferUniversalLinks),z.setDefaultAccountTypes(e.defaultAccountTypes);const n=G.getPreferredAccountTypes()||{},r={...z.state.defaultAccountTypes,...n};K.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),z.setMetadata(e.metadata),z.setDisableAppend(e.disableAppend),z.setEnableEmbedded(e.enableEmbedded),z.setSIWX(e.siwx),!e.projectId){ot.open(tt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===M.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");z.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ce.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=wr.getUnsupportedNetwork(`${n}:${e}`);T.setActiveCaipNetwork(r)}}getDefaultNetwork(){return wr.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return wr.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return wr.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?wr.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=He.getProvider(e),s=He.getProviderId(e),{caipAddress:i}=T.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),G.removeConnectedNamespace(e),He.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Y.removeConnectorId(e),T.resetAccount(e),T.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=T.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),G.setConnectedNamespaces([...T.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Y.setConnectorId(Qe.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var p,m,b,C,y,E;const c=T.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const w=this.getCaipNetworks().find(v=>v.chainNamespace===i);w&&this.setCaipNetwork(w)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((b=(m=(p=o==null?void 0:o.rpcUrls)==null?void 0:p.default)==null?void 0:m.http)==null?void 0:b[0])||((E=(y=(C=d==null?void 0:d.rpcUrls)==null?void 0:C.default)==null?void 0:y.http)==null?void 0:E[0])});if(!h)return;G.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const g=K.state.allAccounts,{accounts:f}=(g==null?void 0:g.length)>0?{accounts:[...g]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(f,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=T.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),G.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=O_(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));ke.resetSend(),se.resetWcConnection(),await _a.clearSessions(),Y.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));G.deleteConnectedSocialProvider(),Fe.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(T.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:K.state.address,provider:He.getProvider(T.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Me.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(T.state.activeChain),s=He.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===M.CHAIN.EVM){const n=this.getAdapter(T.state.activeChain),r=He.getProvider(T.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:K.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:T.state.activeChain}),K.state.profileImage||!1},getEnsAddress:async e=>await xa.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(T.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=He.getProvider(T.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(T.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(T.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(T.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(T.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(T.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(T.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!K.state.address||this.updateNativeBalance(K.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},se.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(He.getProviderId(T.state.activeChain)===Qe.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=He.getProvider(n),i=He.getProviderId(n);if(e.chainNamespace===T.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Qe.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=yn.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Y7({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=G.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(G.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=T.state.activeChain===e,c=T.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=K.state.address,i=T.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=T.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=T.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=T.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===M.CHAIN.EVM&&ce.isSafeApp()&&Y.setConnectorId(M.CONNECTOR_ID.SAFE,e);const n=Y.getConnectorId(e);switch(this.setStatus("connecting",e),n){case M.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case M.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Y.getConnectorId(e),s=this.getCaipNetwork(e),o=Y.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ce.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,g,f;const o=this.getAdapter(i),a=((g=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:g.accounts)||[],c=(f=T.state.activeCaipNetwork)==null?void 0:f.id,l=a.find(p=>{const{chainId:m}=yn.parseCaipAddress(p);return m===(c==null?void 0:c.toString())})||a[0];if(l){const p=yn.validateCaipAddress(l),{chainId:m,address:b}=yn.parseCaipAddress(p);if(He.setProviderId(i,Qe.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&T.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==M.CHAIN.EVM){const C=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:T.state.activeCaipNetwork});He.setProvider(i,C)}else He.setProvider(i,this.universalProvider);Y.setConnectorId(M.CONNECTOR_ID.WALLET_CONNECT,i),G.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:b,chainId:m,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await T.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=yn.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ce.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){He.setProviderId(s,e),He.setProvider(s,n),Y.setConnectorId(r,s)}async syncAllAccounts(e){const n=Y.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===T.state.activeChain,r=T.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=G.getActiveNetworkProps(),c=i||a,l=((d=T.state.activeCaipNetwork)==null?void 0:d.name)===M.UNSUPPORTED_NETWORK_NAME,u=T.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let g=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),f=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!g&&!f){const m=this.getApprovedCaipNetworkIds()||[],b=m.find(y=>{var E;return((E=yn.parseCaipNetworkId(y))==null?void 0:E.chainId)===c.toString()}),C=m.find(y=>{var E;return((E=yn.parseCaipNetworkId(y))==null?void 0:E.chainNamespace)===o});g=this.getCaipNetworks().find(y=>y.caipNetworkId===b),f=this.getCaipNetworks().find(y=>y.caipNetworkId===C||"deprecatedCaipNetworkId"in y&&y.deprecatedCaipNetworkId===C)}const p=g||f;(p==null?void 0:p.chainNamespace)===T.state.activeChain?z.state.enableNetworkSwitch&&!z.state.allowUnsupportedChain&&((h=T.state.activeCaipNetwork)==null?void 0:h.name)===M.UNSUPPORTED_NETWORK_NAME?T.showUnsupportedChainUI():this.setCaipNetwork(p):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),cc.isLowerCaseMatch(s,K.state.address)||this.syncAccountInfo(s,p==null?void 0:p.id,o),n?await this.syncBalance({address:s,chainId:p==null?void 0:p.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Y.getConnectorId(e),r=He.getProviderId(e);if(r===Qe.CONNECTOR_TYPE_ANNOUNCED||r===Qe.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Qe.CONNECTOR_TYPE_WALLET_CONNECT){const i=He.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===M.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===M.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!Pa.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=T.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=QM.createLogger((g,...f)=>{g&&this.handleAlertError(g),console.error(...f)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};z.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await ZM.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{se.setUri(e)}),this.universalProvider.on("connect",se.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),se.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(xa.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ce.isCaipAddress(r[0])&&this.syncAccount(yn.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ce.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Fe.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(tt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=tt.ALERT_ERRORS[o];a&&(ot.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&se.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Be.open({...e,data:{swap:e.arguments}})}return Be.open(e)}async close(){await this.injectModalUi(),Be.close()}setLoading(e,n){Be.setLoading(e,n)}async disconnect(e){await se.disconnect({namespace:e})}getSIWX(){return z.state.siwx}getError(){return""}getChainId(){var e;return(e=T.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){ot.open(tt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await T.switchActiveNetwork(n)}getWalletProvider(){return T.state.activeChain?He.state.providers[T.state.activeChain]:null}getWalletProviderType(){return He.getProviderId(T.state.activeChain)}subscribeProviders(e){return He.subscribeProviders(e)}getThemeMode(){return nn.state.themeMode}getThemeVariables(){return nn.state.themeVariables}setThemeMode(e){nn.setThemeMode(e),eC(nn.state.themeMode)}setTermsConditionsUrl(e){z.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){z.setPrivacyPolicyUrl(e)}setThemeVariables(e){nn.setThemeVariables(e),M7(nn.state.themeVariables)}subscribeTheme(e){return nn.subscribe(e)}subscribeConnections(e){return se.subscribe(e)}getWalletInfo(){return K.state.connectedWalletInfo}getAccount(e){var o;const n=Y.getAuthConnector(e),r=T.getAccountData(e),s=T.state.activeChain,i=G.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ce.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===M.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:G.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?T.subscribeChainProp("accountState",r,n):T.subscribe(r),Y.subscribe(r)}subscribeNetwork(e){return T.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return K.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){K.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){T.subscribeKey("activeCaipNetwork",e)}getState(){return vr.state}subscribeState(e){return vr.subscribe(e)}showErrorMessage(e){Gn.showError(e)}showSuccessMessage(e){Gn.showSuccess(e)}getEvent(){return{...Fe.state}}subscribeEvents(e){return Fe.subscribe(e)}replace(e){ge.replace(e)}redirect(e){ge.push(e)}popTransactionStack(e){ge.popTransactionStack(e)}isOpen(){return Be.state.open}isTransactionStackEmpty(){return ge.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){z.setFeatures(e)}updateRemoteFeatures(e){z.setRemoteFeatures(e)}updateOptions(e){const r={...z.state||{},...e};z.setOptions(r)}setConnectMethodsOrder(e){z.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){z.setWalletFeaturesOrder(e)}setCollapseWallets(e){z.setCollapseWallets(e)}setSocialsOrder(e){z.setSocialsOrder(e)}getConnectMethodsOrder(){return Kf.getConnectOrderMethod(z.state.features,Y.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||T.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&T.removeNetwork(e,n)}}let f0=!1;class Q7 extends X7{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{bn.checkIfRequestExists(n)?bn.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ct.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ct.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=bn.checkIfRequestIsSafe(r),i=K.state.address,o=T.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=T.state.activeChain;Y.getConnectorId(n)===M.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=T.state.activeChain,s=r===M.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=z.state.defaultAccountTypes[r],o=(l=K.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;cc.isLowerCaseMatch(n.address,K.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...K.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ce.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ce.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...K.state.user||{},username:n},T.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,T.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,T.state.activeChain)})}async syncAuthConnector(e,n){var d,h,g,f;const r=M.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===T.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=K.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=nn.getSnapshot(),u=z.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:Wr(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:M.CONNECTOR_ID.AUTH,info:{name:M.CONNECTOR_ID.AUTH},type:Qe.CONNECTOR_TYPE_AUTH,provider:e,chainId:(g=T.state.activeCaipNetwork)==null?void 0:g.id,chain:n})),this.setStatus("connected",n)):Y.getConnectorId(n)===M.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),G.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ce.isTelegram())return;const r=G.getTelegramSocialProvider();if(!r||!ce.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;K.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Y.getAuthConnector();r&&o&&(this.setLoading(!0,e),await se.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),G.setConnectedSocialProvider(r),G.removeTelegramSocialProvider(),Fe.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!M.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=cc.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=fi.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:tt.EmbeddedWalletAbortController,onTimeout:g=>{g==="iframe_load_failed"?ot.open(tt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):g==="iframe_request_timeout"?ot.open(tt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):g==="unverified_domain"&&ot.open(tt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),vr.subscribeOpen(g=>{var f;!g&&this.isTransactionStackEmpty()&&((f=this.authProvider)==null||f.rejectRpcRequests())}));const c=e===T.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ue.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=T.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=He.getProvider(r),u=He.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=He.getProviderId(n)===Qe.CONNECTOR_TYPE_AUTH,u=He.getProviderId(r),d=u===Qe.CONNECTOR_TYPE_AUTH,h=M.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(T.state.activeChain=e.chainNamespace,s){const g=this.getAdapter(r);await(g==null?void 0:g.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:M.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Qe.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Qe.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),vr.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==M.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=He.getProviderId(e);if(n===Qe.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=G.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ce.isClient()&&!f0)try{const e={...Me.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ce.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!z.state.disableAppend&&!z.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}f0=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ce.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Lt(()=>import("./CT0gzPnX.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),n.email&&r.push(Lt(()=>import("./DWrVWhaS.js"),__vite__mapDeps([16,4,5,15,9,14,8,13,17,10]),import.meta.url)),n.socials&&r.push(Lt(()=>import("./DZbxmvnF.js"),__vite__mapDeps([18,4,5,19,8,20,21,14,22,13,9,15,23,7,24]),import.meta.url)),n.swaps&&n.swaps.length>0&&r.push(Lt(()=>import("./C5o8buha.js"),__vite__mapDeps([25,4,5,13,9,26,27,28,7,14,24,10,8]),import.meta.url)),e.send&&r.push(Lt(()=>import("./Ds16yR4G.js"),__vite__mapDeps([29,4,5,13,9,14,8,20,15,28,7,10,30,31]),import.meta.url)),e.receive&&r.push(Lt(()=>import("./BR_gbFP7.js"),__vite__mapDeps([32,4,5,33,7,23]),import.meta.url)),n.onramp&&n.onramp.length>0&&r.push(Lt(()=>import("./DTLUvoe_.js"),__vite__mapDeps([34,4,5,35,24,14,7,9,36,19,8,20,37,15,13,22,10]),import.meta.url)),n.activity&&r.push(Lt(()=>import("./NmkuyrqU.js"),__vite__mapDeps([38,4,5,39,35,24,14,15,7]),import.meta.url)),e.pay&&r.push(Lt(()=>import("./H5LtYLrv.js"),__vite__mapDeps([40,4,5,13,9,41,7,14,11,36,31,22]),import.meta.url)),await Promise.all([...r,Lt(()=>import("./1G0r1HB8.js"),__vite__mapDeps([42,4,5,7,9,30,14,43,27,11,36,13,12,41,39,35,24,15,26,31,8,10,17,19,20,21,6,22,33,23,37]),import.meta.url),Lt(()=>import("./BH_mKRvT.js"),__vite__mapDeps([44,4,5,11,7,14,12,9,27,43]),import.meta.url)])}}const ej="1.7.9";function tj(t){return new Q7({...t,sdkVersion:ce.generateSdkVersion(t.adapters??[],"html",ej)})}function $n(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const kl="2.17.3",nj=()=>`@wagmi/core@${kl}`;var fC=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},yu,pC;class rr extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return nj()}constructor(e,n={}){var i;super(),yu.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof rr?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof rr&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return fC(this,yu,"m",pC).call(this,this,e)}}yu=new WeakSet,pC=function t(e,n){return n!=null&&n(e)?e:e.cause?fC(this,yu,"m",t).call(this,e.cause,n):e};class Ac extends rr{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class rj extends rr{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class sj extends rr{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class ij extends rr{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class oj extends rr{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class aj extends rr{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Eh(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new rj;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function Qu(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new aj({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new sj;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new oj({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=xr(e.account??n.accounts[0]);if(o&&(o.address=si(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new ij({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return tv({account:o,chain:a,name:"Connector Client",transport:l=>RS(c)({...l,retryCount:0})})}async function cj(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function lj(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await Qu(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return $n(o,Fb,"estimateGas")({...s,account:i})}function gC(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(KI[t])}function Na(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function uj(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return $n(o,XS,"multicall")({allowFailure:n,contracts:s,...i})}function dj(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $n(s,Zb,"readContract")(r)}async function hj(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,g]of o.entries()){const f=g.chainId??t.state.chainId;c[f]||(c[f]=[]),(a=c[f])==null||a.push({contract:g,index:h})}const l=()=>Object.entries(c).map(([h,g])=>uj(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:g.map(({contract:f})=>f)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:g})=>g));return u.reduce((h,g,f)=>(h&&(h[d[f]]=g),h),[])}catch(c){if(c instanceof Eb)throw c;const l=()=>o.map(u=>dj(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function fj(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await p0(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const g=await p0(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),f=Q0(Zr(g.symbol,{dir:"right"}));return{...g,symbol:f}}throw h}const c=t.getClient({chainId:i}),u=await $n(c,Mb,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Io(u,gC(a)),symbol:d.nativeCurrency.symbol,value:u}}async function p0(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await hj(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Io(c??"0",gC(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function wu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!wu(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!wu(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let El=[];function Xs(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||wu(El,e)?El:(El=e,e)}async function pj(t,e){const{account:n,chainId:r,...s}=e,i=n??Na(t).address,o=t.getClient({chainId:r});return $n(o,Ep,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Ch=!1;async function g0(t,e={}){var l,u;if(Ch)return[];Ch=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(p=>p===h)||!await d.isAuthorized())continue;const f=await d.connect({isReconnecting:!0}).catch(()=>null);f&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(p=>{const m=new Map(o?p.connections:new Map).set(d.uid,{accounts:f.accounts,chainId:f.chainId,connector:d});return{...p,current:o?p.current:d.uid,connections:m}}),a.push({accounts:f.accounts,chainId:f.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Ch=!1,a}async function gj(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Qu(t,{account:n??void 0,chainId:r,connector:s}),await $n(o,Xb,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function mj(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await Qu(t,{account:n,connector:r}),$n(i,nx,"signMessage")({...s,...n?{account:n}:{}})}class vs extends rr{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class yj extends rr{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function m0(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new yj({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Ac;return t.setState(a=>({...a,chainId:r})),i}function wj(t,e){const{onChange:n}=e;return t.subscribe(()=>Na(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return wu(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function bj(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function vj(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=$n(l,tx,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function Ej(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await $n(i,ex,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await $n(i,rv,"getTransaction")({hash:a.transactionHash}),d=await $n(i,Yb,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?Q0(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Cj(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await Qu(t,{account:n??void 0,chainId:r,connector:s}),await $n(o,SS,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function vq(t){return t}ed.type="injected";function ed(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{..._j[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:ed.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var g,f,p,m,b,C;const d=await this.getProvider();if(!d)throw new vs;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(m=(p=(f=(g=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:g.caveats)==null?void 0:f[0])==null?void 0:p.value)==null?void 0:m.map(E=>si(E)),h.length>0&&(h=await this.getAccounts())}catch(y){const E=y;if(E.code===ft.code)throw new ft(E);if(E.code===Ns.code)throw E}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(w=>si(w))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let y=await this.getChainId();if(l&&y!==l){const E=await this.switchChain({chainId:l}).catch(w=>{if(w.code===ft.code)throw w;return{id:y}});y=(E==null?void 0:E.id)??y}return e&&await((b=c.storage)==null?void 0:b.removeItem(`${this.id}.disconnected`)),t.target||await((C=c.storage)==null?void 0:C.setItem("injected.connected",!0)),{accounts:h,chainId:y}}catch(y){const E=y;throw E.code===ft.code?new ft(E):E.code===Ns.code?new Ns(E):E}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new vs;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await nv(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new vs;return(await l.request({method:"eth_accounts"})).map(d=>si(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new vs;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Ul(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const f=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",f),!!await this.getProvider()),p=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(b=>window.addEventListener("ethereum#initialized",()=>b(f()),{once:!0}))]:[],new Promise(b=>setTimeout(()=>b(f()),p))]))return!0}throw new vs}return!!(await Hl(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var f,p,m,b;const d=await this.getProvider();if(!d)throw new vs;const h=c.chains.find(C=>C.id===u);if(!h)throw new _r(new Ac);const g=new Promise(C=>{const y=E=>{"chainId"in E&&E.chainId===u&&(c.emitter.off("change",y),C())};c.emitter.on("change",y)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:ee(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),g]),h}catch(C){const y=C;if(y.code===4902||((p=(f=y==null?void 0:y.data)==null?void 0:f.originalError)==null?void 0:p.code)===4902)try{const{default:E,...w}=h.blockExplorers??{};let v;l!=null&&l.blockExplorerUrls?v=l.blockExplorerUrls:E&&(v=[E.url,...Object.values(w).map(x=>x.url)]);let _;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?_=l.rpcUrls:_=[((b=h.rpcUrls.default)==null?void 0:b.http[0])??""];const N={blockExplorerUrls:v,chainId:ee(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:_};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new ft(new Error("User rejected switch after adding network."))}),g]),h}catch(E){throw new ft(E)}throw y.code===ft.code?new ft(y):new _r(y)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>si(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const _j={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Ul(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Ul(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Ul(t,"isPhantom")}}};function Ul(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Aj(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Ij(){const t=new Set;let e=[];const n=()=>Aj(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Sj=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const g=o(h);if(!u(d,g)){const f=d;a(d=g,f)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},xj=Sj;function Nj(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Zf=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Zf(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Zf(r)(n)}}}},Tj=(t,e)=>(n,r,s)=>{let i={storage:Nj(()=>localStorage),partialize:p=>p,version:0,merge:(p,m)=>({...m,...p}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...p)},r,s);const u=()=>{const p=i.partialize({...r()});return l.setItem(i.name,{state:p,version:i.version})},d=s.setState;s.setState=(p,m)=>{d(p,m),u()};const h=t((...p)=>{n(...p),u()},r,s);s.getInitialState=()=>h;let g;const f=()=>{var p,m;if(!l)return;o=!1,a.forEach(C=>{var y;return C((y=r())!=null?y:h)});const b=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(p=r())!=null?p:h))||void 0;return Zf(l.getItem.bind(l))(i.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==i.version){if(i.migrate)return[!0,i.migrate(C.state,C.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var y;const[E,w]=C;if(g=i.merge(w,(y=r())!=null?y:h),n(g,!0),E)return u()}).then(()=>{b==null||b(g,void 0),g=r(),o=!0,c.forEach(C=>C(g))}).catch(C=>{b==null||b(void 0,C)})};return s.persist={setOptions:p=>{i={...i,...p},p.storage&&(l=p.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},i.skipHydration||f(),g||h},Pj=Tj,y0=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(g=>g(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},_h=t=>t?y0(t):y0;var Ah={exports:{}},w0;function Oj(){return w0||(w0=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new s(u,d||c,h),f=n?n+l:l;return c._events[f]?c._events[f].fn?c._events[f]=[c._events[f],g]:c._events[f].push(g):(c._events[f]=g,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,g=d.length,f=new Array(g);h<g;h++)f[h]=d[h].fn;return f},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,g,f){var p=n?n+l:l;if(!this._events[p])return!1;var m=this._events[p],b=arguments.length,C,y;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,g),!0;case 6:return m.fn.call(m.context,u,d,h,g,f),!0}for(y=1,C=new Array(b-1);y<b;y++)C[y-1]=arguments[y];m.fn.apply(m.context,C)}else{var E=m.length,w;for(y=0;y<E;y++)switch(m[y].once&&this.removeListener(l,m[y].fn,void 0,!0),b){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,u);break;case 3:m[y].fn.call(m[y].context,u,d);break;case 4:m[y].fn.call(m[y].context,u,d,h);break;default:if(!C)for(w=1,C=new Array(b-1);w<b;w++)C[w-1]=arguments[w];m[y].fn.apply(m[y].context,C)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var g=n?n+l:l;if(!this._events[g])return this;if(!u)return o(this,g),this;var f=this._events[g];if(f.fn)f.fn===u&&(!h||f.once)&&(!d||f.context===d)&&o(this,g);else{for(var p=0,m=[],b=f.length;p<b;p++)(f[p].fn!==u||h&&!f[p].once||d&&f[p].context!==d)&&m.push(f[p]);m.length?this._events[g]=m.length===1?m[0]:m:o(this,g)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(Ah)),Ah.exports}var Rj=Oj();const Dj=bu(Rj);class $j{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Dj})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function kj(t){return new $j(t)}function Uj(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function b0(t,e){return t.slice(0,e).join(".")||"."}function v0(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Bj(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=v0(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=v0(s,c);if(u!==0)return r?e.call(this,a,c,b0(i,u)):`[ref=${b0(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Lj(t,e,n,r){return JSON.stringify(t,Bj((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Mj(t){const{deserialize:e=Uj,key:n="wagmi",serialize:r=Lj,storage:s=mC}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const mC={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Fj(){const t=typeof window<"u"&&window.localStorage?window.localStorage:mC;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const Jf=256;let Cl=Jf,_l;function jj(t=11){if(!_l||Cl+t>Jf*2){_l="",Cl=0;for(let e=0;e<Jf;e++)_l+=(256+Math.random()*256|0).toString(16).substring(1)}return _l.substring(Cl,Cl+++t)}function zj(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Mj({storage:Fj()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Ij():void 0,a=_h(()=>i.chains),c=_h(()=>{const w=[],v=new Set;for(const _ of i.connectors??[]){const N=l(_);if(w.push(N),!s&&N.rdns){const x=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const O of x)v.add(O)}}if(!s&&o){const _=o.getProviders();for(const N of _)v.has(N.info.rdns)||w.push(l(u(N)))}return w});function l(w){var N;const v=kj(jj()),_={...w({emitter:v,chains:a.getState(),storage:n,transports:i.transports}),emitter:v,uid:v.uid};return v.on("connect",y),(N=_.setup)==null||N.call(_),_}function u(w){const{info:v}=w,_=w.provider;return ed({target:{...v,id:v.rdns,provider:_}})}const d=new Map;function h(w={}){const v=w.chainId??m.getState().chainId,_=a.getState().find(x=>x.id===v);if(w.chainId&&!_)throw new Ac;{const x=d.get(m.getState().chainId);if(x&&!_)return x;if(!_)throw new Ac}{const x=d.get(v);if(x)return x}let N;if(i.client)N=i.client({chain:_});else{const x=_.id,O=a.getState().map(B=>B.id),P={},k=Object.entries(i);for(const[B,L]of k)if(!(B==="chains"||B==="client"||B==="connectors"||B==="transports"))if(typeof L=="object")if(x in L)P[B]=L[x];else{if(O.some(S=>S in L))continue;P[B]=L}else P[B]=L;N=tv({...P,chain:_,batch:P.batch??{multicall:!0},transport:B=>i.transports[x]({...B,connectors:c})})}return d.set(v,N),N}function g(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let f;const p="0.0.0-canary-";kl.startsWith(p)?f=Number.parseInt(kl.replace(p,"")):f=Number.parseInt(kl.split(".")[0]??"0");const m=_h(xj(n?Pj(g,{migrate(w,v){if(v===f)return w;const _=g(),N=b(w,_.chainId);return{..._,chainId:N}},name:"store",partialize(w){return{connections:{__type:"Map",value:Array.from(w.connections.entries()).map(([v,_])=>{const{id:N,name:x,type:O,uid:P}=_.connector;return[v,{..._,connector:{id:N,name:x,type:O,uid:P}}]})},chainId:w.chainId,current:w.current}},merge(w,v){typeof w=="object"&&w&&"status"in w&&delete w.status;const _=b(w,v.chainId);return{...v,...w,chainId:_}},skipHydration:s,storage:n,version:f}):g));m.setState(g());function b(w,v){return w&&typeof w=="object"&&"chainId"in w&&typeof w.chainId=="number"&&a.getState().some(_=>_.id===w.chainId)?w.chainId:v}r&&m.subscribe(({connections:w,current:v})=>{var _;return v?(_=w.get(v))==null?void 0:_.chainId:void 0},w=>{if(a.getState().some(_=>_.id===w))return m.setState(_=>({..._,chainId:w??_.chainId}))}),o==null||o.subscribe(w=>{const v=new Set,_=new Set;for(const x of c.getState())if(v.add(x.id),x.rdns){const O=typeof x.rdns=="string"?[x.rdns]:x.rdns;for(const P of O)_.add(P)}const N=[];for(const x of w){if(_.has(x.info.rdns))continue;const O=l(u(x));v.has(O.id)||N.push(O)}n&&!m.persist.hasHydrated()||c.setState(x=>[...x,...N],!0)});function C(w){m.setState(v=>{const _=v.connections.get(w.uid);return _?{...v,connections:new Map(v.connections).set(w.uid,{accounts:w.accounts??_.accounts,chainId:w.chainId??_.chainId,connector:_.connector})}:v})}function y(w){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(v=>{const _=c.getState().find(N=>N.uid===w.uid);return _?(_.emitter.listenerCount("connect")&&_.emitter.off("connect",C),_.emitter.listenerCount("change")||_.emitter.on("change",C),_.emitter.listenerCount("disconnect")||_.emitter.on("disconnect",E),{...v,connections:new Map(v.connections).set(w.uid,{accounts:w.accounts,chainId:w.chainId,connector:_}),current:w.uid,status:"connected"}):v})}function E(w){m.setState(v=>{const _=v.connections.get(w.uid);if(_){const x=_.connector;x.emitter.listenerCount("change")&&_.connector.emitter.off("change",C),x.emitter.listenerCount("disconnect")&&_.connector.emitter.off("disconnect",E),x.emitter.listenerCount("connect")||_.connector.emitter.on("connect",y)}if(v.connections.delete(w.uid),v.connections.size===0)return{...v,connections:new Map,current:null,status:"disconnected"};const N=v.connections.values().next().value;return{...v,connections:new Map(v.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(w){let v;typeof w=="function"?v=w(m.getState()):v=w;const _=g();typeof v!="object"&&(v=_),Object.keys(_).some(x=>!(x in v))&&(v=_),m.setState(v,!0)},subscribe(w,v,_){return m.subscribe(w,v,_?{..._,fireImmediately:_.emitImmediately}:void 0)},_internal:{mipd:o,store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(w){const v=typeof w=="function"?w(a.getState()):w;if(v.length!==0)return a.setState(v,!0)},subscribe(w){return a.subscribe(w)}},connectors:{providerDetailToConnector:u,setup:l,setState(w){return c.setState(typeof w=="function"?w(c.getState()):w,!0)},subscribe(w){return c.subscribe(w)}},events:{change:C,connect:y,disconnect:E}}}}function qj(t){let e=[],n,r;function s(a){return Pa.parseEvmChainId(a)||1}function i(){var a;return n||(n=fi.getInstance({projectId:t.options.projectId,chainId:(a=T.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ot.open(tt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ot.open(tt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ot.open(tt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:tt.EmbeddedWalletAbortController})),n}async function o(a={}){var p,m;const c=i();let l=a.chainId;if(a.isReconnecting){const b=Pa.parseEvmChainId(c.getLastUsedChainId()||""),C=(p=t.chains)==null?void 0:p[0].id;if(l=b||C,!l)throw new Error("ChainId not found in provider")}const u=(m=K.state.preferredAccountTypes)==null?void 0:m.eip155,{address:d,chainId:h,accounts:g}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(g==null?void 0:g.map(b=>b.address))||[d];const f=s(h);return{accounts:e,account:d,chainId:f,chain:{id:f,unsuported:!1}}}return a=>({id:M.CONNECTOR_ID.AUTH,name:M.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:M.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=fi.getInstance({projectId:t.options.projectId,chainId:(c=T.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:tt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ot.open(tt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ot.open(tt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ot.open(tt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=T.state.activeChain===M.CHAIN.EVM;if(M.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Y.getConnectorId(h)===M.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(p=>p.id===c);if(!d)throw new _r(new Error("chain not found on connector."));const h=await this.getProvider(),g=(l=K.state.preferredAccountTypes)==null?void 0:l.eip155,f=await h.connect({chainId:c,preferredAccountType:g});return e=((u=f==null?void 0:f.accounts)==null?void 0:u.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new _r(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(si)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}lg.type="walletConnect";function lg(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:lg.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,g,f;try{const p=T.getCaipNetworks(),m=await this.getProvider();if(!m)throw new vs;a||(a=this.onDisplayUri,m.on("display_uri",a));const b=await this.isChainsStale();m.session&&b&&await m.disconnect();const C=z.state.universalProviderConfigOverride;if(!m.session||b){const x=xa.createNamespaces(p,C);await m.connect({optionalNamespaces:x,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(p.map(O=>Number(O.id)))}const y=await this.getAccounts(),E=await this.getChainId(),w=(f=(g=(h=m.session)==null?void 0:h.namespaces)==null?void 0:g.eip155)==null?void 0:f.chains,v=w==null?void 0:w.some(x=>Number(x.split(":")[1])===E);let _=1;v?_=E:w!=null&&w[0]&&(_=Number(w[0].split(":")[1])),a&&(m.removeListener("display_uri",a),a=void 0),o&&(m.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),m.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),m.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),m.on("session_delete",c));const N=C==null?void 0:C.defaultChain;return m.setDefaultChain(N??`eip155:${_}`),{accounts:y,chainId:_}}catch(p){throw/(user rejected|connection request reset)/i.test(p==null?void 0:p.message)?new ft(p):p}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var f,p,m;const d=await this.getProvider();if(!((f=d==null?void 0:d.session)!=null&&f.namespaces))return[];const h=(m=(p=d==null?void 0:d.session)==null?void 0:p.namespaces[M.CHAIN.EVM])==null?void 0:m.accounts;return(h==null?void 0:h.map(b=>b.split(":")[2]))??[]},async getProvider({chainId:d}={}){var f,p;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=G.getActiveNamespace(),g=(f=e.getCaipNetwork())==null?void 0:f.id;if(d&&g!==d&&h){const m=G.getStoredActiveCaipNetworkId(),b=e.getCaipNetworks(h),C=b==null?void 0:b.find(y=>y.id===m);C&&C.chainNamespace===M.CHAIN.EVM&&await((p=this.switchChain)==null?void 0:p.call(this,{chainId:Number(C.id)}))}return r},async getChainId(){var p,m,b,C;const d=(p=e.getCaipNetwork(M.CHAIN.EVM))==null?void 0:p.id;if(d)return d;const g=(C=(b=(m=(await this.getProvider()).session)==null?void 0:m.namespaces[M.CHAIN.EVM])==null?void 0:b.chains)==null?void 0:C[0],f=T.getCaipNetworks().find(y=>y.id===g);return f==null?void 0:f.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var p,m,b,C;const g=await this.getProvider();if(!g)throw new vs;const f=T.getCaipNetworks().find(y=>y.id===h);if(!f)throw new _r(new Ac);try{await g.request({method:"wallet_switchEthereumChain",params:[{chainId:ee(h)}]}),f!=null&&f.caipNetworkId&&g.setDefaultChain(f==null?void 0:f.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const y=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...y,h]),{...f,id:f.id}}catch(y){const E=y;if(/(?:user rejected)/iu.test(E.message))throw new ft(E);try{let w;d!=null&&d.blockExplorerUrls?w=d.blockExplorerUrls:w=(p=f.blockExplorers)!=null&&p.default.url?[(m=f.blockExplorers)==null?void 0:m.default.url]:[];const v=((C=(b=f.rpcUrls)==null?void 0:b.chainDefault)==null?void 0:C.http)||[],_={blockExplorerUrls:w,chainId:ee(h),chainName:f.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:f.nativeCurrency,rpcUrls:v};await g.request({method:"wallet_addEthereumChain",params:[_]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...f,id:f.id}}catch(w){throw new ft(w)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>si(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(T.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var g,f,p;if(!((g=r==null?void 0:r.session)!=null&&g.namespaces))return[];const d=(p=(f=r==null?void 0:r.session)==null?void 0:f.namespaces[M.CHAIN.EVM])==null?void 0:p.accounts;return(d==null?void 0:d.map(m=>Number.parseInt(m.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(f=>f.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(f=>d.includes(f)))return!1;const g=await this.getRequestedChainsIds();return!d.every(f=>g.includes(Number(f)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const ia=Ze({pendingTransactions:0}),E0={state:ia,subscribeKey(t,e){return Pt(ia,t,e)},increase(t){ia[t]+=1},decrease(t){ia[t]-=1},reset(t){ia[t]=0}};function Hj(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Wj(t){if(ce.isSafeApp()){const{safe:e}=await Lt(async()=>{const{safe:n}=await import("./D2S8kQ25.js");return{safe:n}},__vite__mapDeps([45,5]),import.meta.url);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Vj(t){try{const{coinbaseWallet:e}=await Lt(async()=>{const{coinbaseWallet:n}=await import("./D2S8kQ25.js");return{coinbaseWallet:n}},__vite__mapDeps([45,5]),import.meta.url);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Gj={enable:!1,pollingInterval:3e4};class Kj extends hC{constructor(e){const n=wr.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=M.CHAIN.EVM,this.adapterType=M.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Gj,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===M.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ce.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Na(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ce.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Na(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===M.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=wr.getCaipNetworkId(s);i?n[s.id]=wr.extendWagmiTransports(s,e.projectId,i):n[s.id]=wr.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=zj({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=vj(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),E0.increase("pendingTransactions")}});const e=E0.subscribeKey("pendingTransactions",n=>{var r;n>=M.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){wj(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Vj(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Wj(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(lg(e,n)),e.enableInjected!==!1&&r.push(ed({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(qj({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await mj(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Na(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await pj(this.wagmiConfig,s);const i=await gj(this.wagmiConfig,s);return await Ej(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(Pa.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Cj(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await lj(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return JS(e.value,e.decimals)}formatUnits(e){return Io(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===M.CONNECTOR_ID.AUTH||e.id===M.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Ss.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Ss.ConnectorNamesMap[e.id]??e.name,imageId:Ss.ConnectorImageIds[e.id],type:Ss.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===M.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){bj(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Xs(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ce.isSafeApp()&&n===M.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Eh(this.wagmiConfig,{connector:d,chainId:Number(r)}),g=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:g,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Eh(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await m0(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,g,f;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===M.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const p=(f=(g=this.wagmiConfig.state)==null?void 0:g.connections)==null?void 0:f.get(c.uid);if(p)return{address:p==null?void 0:p.accounts[0],chainId:p==null?void 0:p.chainId,provider:r,type:s,id:n}}const l=await Eh(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await g0(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=G.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await fj(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});G.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Xs(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await cj(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await m0(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Xs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=Hj(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Xs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Xs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Xs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=Xs(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");r&&!n.find(s=>s.connector.id===r.id)&&g0(this.wagmiConfig,{connectors:[r]})}),this.addConnector(new cg({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}let Ih=!1;async function Yj(t,e={}){var l,u;if(Ih)return[];Ih=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(p=>p===h)||!await d.isAuthorized())continue;const f=await d.connect({isReconnecting:!0}).catch(()=>null);f&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(p=>{const m=new Map(o?p.connections:new Map).set(d.uid,{accounts:f.accounts,chainId:f.chainId,connector:d});return{...p,current:o?p.current:d.uid,connections:m}}),a.push({accounts:f.accounts,chainId:f.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Ih=!1,a}const yC="",wC=new Kj({projectId:yC,networks:[oC,dC,iC,tC,nC,aC,cC,lC,uC,rC,sC]});tj({adapters:[wC],projectId:yC,networks:[oC,dC,iC,tC,nC,aC,cC,lC,uC,rC,sC],metadata:{name:"Svelte EVM Template",description:"Svelte EVM Template with AppKit",url:"https://example.com",icons:["/logo.png"]},features:{analytics:!0,email:!1,socials:!1}});typeof window<"u"&&Yj(wC.wagmiConfig);var Zj=Xf("<appkit-button></appkit-button>",2);function Jj(t,e){RC(e,!1),kC(()=>{}),UC();var n=Zj();Qf(t,n),DC()}var Xj=Xf('<nav class="fixed left-0 right-0 top-0 flex items-center justify-between border-b border-gray-300 p-1 backdrop-blur-sm"><a href="/" class="rounded px-3 py-1 text-lg font-bold italic hover:bg-gray-100"><img src="/logo.png" alt="Logo" class="inline-block mr-2" style="width: 42px; height: 24px;"/> Your Thing here</a> <div class="space-x-4"><a href="/placeholder1" class="text-black hover:text-gray-600">Placeholder 1</a> <a href="/placeholder2" class="text-black hover:text-gray-600">Placeholder 2</a> <a href="/placeholder3" class="text-black hover:text-gray-600">Placeholder 3</a></div> <div><!></div></nav>');function Qj(t){var e=Xj(),n=_0(Sh(e),4),r=Sh(n);Jj(r,{}),xh(n),xh(e),Qf(t,e)}var ez=Xf('<!>; <main class="pt-14"><!></main>',1);function Eq(t,e){var n=ez(),r=$C(n);Qj(r);var s=_0(r,2),i=Sh(s);BC(i,()=>e.children),xh(s),Qf(t,n)}export{Nu as $,K as A,pe as B,E7 as C,ce as D,vt as E,R_ as F,ot as G,sb as H,Sp as I,Me as J,T0 as K,Y as L,Be as M,QC as N,M as O,vs as P,x0 as Q,ge as R,_r as S,nn as T,ft as U,G as V,Ct as W,Da as X,op as Y,ks as Z,lz as _,pz as a,Kf as a$,ap as a0,cz as a1,az as a2,gb as a3,ns as a4,Ll as a5,PA as a6,$A as a7,_z as a8,OI as a9,Qe as aA,bu as aB,_a as aC,Vn as aD,ue as aE,mq as aF,ke as aG,K1 as aH,Yf as aI,Eo as aJ,Zh as aK,xc as aL,Xn as aM,bI as aN,Tt as aO,un as aP,vz as aQ,ct as aR,uz as aS,_u as aT,Ht as aU,xu as aV,B2 as aW,Dj as aX,Rl as aY,Oa as aZ,cc as a_,F as aa,up as ab,Dn as ac,WI as ad,H2 as ae,Yb as af,go as ag,pa as ah,Us as ai,mz as aj,ZA as ak,gz as al,yz as am,Ml as an,wz as ao,U2 as ap,ca as aq,z as ar,v7 as as,tt as at,Wr as au,ma as av,yn as aw,r_ as ax,He as ay,bn as az,Fl as b,sx as b0,HC as b1,ux as b2,gr as b3,Oj as b4,Eq as b5,Ra as c,wi as d,gq as e,$l as f,wq as g,bq as h,uo as i,vq as j,si as k,Ac as l,ed as m,ee as n,Cn as o,Ze as p,Nt as q,yq as r,Pt as s,ep as t,Gn as u,se as v,nv as w,pq as x,Fe as y,T as z};
